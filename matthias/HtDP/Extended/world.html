<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from world.tex by tex2page, v 20070609
(running on MzScheme 370.6, unix), 
(c) Dorai Sitaram, 
http://www.ccs.neu.edu/~dorai/tex2page/tex2page-doc.html

-->
<head>
<title>
world
</title>
<link rel="stylesheet" type="text/css" href="world-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<div align=right class=navigation>[Go to <span class=disable>first, previous</span><span><span class=disable>, </span><a href="world-Z-H-1.html">next</a></span> page]</div>
<p></p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>





</p>
<p>
</p>
<p>
 </p>
<p>

</p>
<p>
</p>
<p>


</p>
<p>





</p>
<p>



</p>
<p>
</p>
<p>
 </p>
<p>














</p>
<p>



</p>
<p>
 
 
 </p>
<p>
 </p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>


</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>

</p>
<p>



</p>
<p>
  </p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>


</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
    </p>
<p>

</p>
<p>



</p>
<p>
  </p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>

</p>
<p>





</p>
<p>


</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>





</p>
<p>



</p>
<p>

</p>
<p>













</p>
<p>


</p>
<p>








</p>
<p>
</p>
<p>



</p>
<p>


  </p>
<p>
</p>
<p>
  </p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>







</p>
<p>
</p>
<p>
 </p>
<p>
</p>
<p>
</p>
<p>


</p>
<p>











</p>
<p>
</p>
<p>

 
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>



</p>
<p>
</p>
<p>


</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>




</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>





</p>
<p>





</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
 
 </p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
  </p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>







</p>
<p>
</p>
<p>
 </p>
<p>
</p>
<p>
</p>
<p>


</p>
<p>











</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>

</p>
<a name="node_sec_Temp_1"></a>
<h1 class=section>Extended Exercise: Animations (Draft 1)</h1>
<p></p>
<a name="node_sec_Temp_2"></a>
<h2 class=section>A Supplement to
<a href="http://www.htdp.org"> &#8220;How to Design Programs&#8221;</a></h2>
<p>&copy;2004 Felleisen, Findler, Flatt, Krishnamurthi
 <br>
 <br>
 <br>
</p>
<p>
</p>
<a name="node_sec_1"></a>
<h1 class=section>1&nbsp;&nbsp;Numbers, Expressions, and Simple Programs</h1>
<p>Programming is all about representing the world and calculating with these
representation. Consider a game program that allows players to shoot down
UFOs. The program needs to represent the UFO and the shots and many more
things so that it can keep track of them and so that it can draw them on
the computer screen. Representing the UFO means to use numbers,
combination of numbers, and other forms of data that we don&#8217;t know
yet. The program then computes new data from these given pieces of data
and it may use them to draw something, too. In this section, we learn to
deal with the basics of representing real or imagined objects in Scheme as
numbers, how to calculate with them, and how to draw them so that they
appear to move.</p>
<p>

<blockquote><table bgcolor="beige"><tr><td>

</p>
<a name="node_fig_Temp_3"></a>
<div class=figure align=center><table width=100%><tr><td align=center><p>
</p>
<p>


</p>
<p>
</p>
<blockquote>


<img src=Images/ufo-down-ss.jpg width="100" alt="[A UFO gliding down in Scheme]">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<img src=Images/ufo-down.jpg width="200" alt="[A UFO gliding down]">
</blockquote><p>
</p>
</td></tr>
<tr><td align=center><b>Figure 1:</b>&nbsp;&nbsp;A UFO descending to the ground</td></tr>
<tr><td>
</td></tr></table></div><p>

</td></tr></table></blockquote>
</p>
<p>
</p>
<a name="node_sec_1.1"></a>
<h2 class=section>1.1&nbsp;&nbsp;Flying a UFO</h2>
<p>Say you want to write a game that involves shooting UFOs. One of the things
you have to figure out first is how the UFO descends on a computer window,
also known as a <em>canvas</em>.</p>
<p>
Figure&nbsp;<a href="#node_fig_Temp_3">1</a> depicts a descending UFO, drawn as a &#8220;flying
saucer&#8221;, on a canvas and on a mathematical grid.<a name="node_call_footnote_Temp_4"></a><sup><small><a href="#node_footnote_Temp_4">1</a></small></sup>  Let&#8217;s see how we can simulate this kind of movement with a
program.  We begin with some mathematics but we are going to see moving
pictures real soon. In Algebra, your teacher asked you to create tables
like this:
</p>
<div align=center><table><tr><td>

<table border=1><tr><td valign=top ><em>t</em>  =   </td><td valign=top >0         </td><td valign=top >1         </td><td valign=top >2          </td><td valign=top >3          </td><td valign=top >4          </td><td valign=top ><tt>...</tt></td><td valign=top >7 </td><td valign=top ></td></tr>
<tr><td valign=top ><em>X</em>  =   </td><td valign=top >20</td><td valign=top >30</td><td valign=top >40 </td><td valign=top >50 </td><td valign=top >60 </td><td valign=top ><tt>...</tt></td><td valign=top >? </td><td valign=top ></td></tr>
<tr><td valign=top ></td></tr></table>
</td></tr></table></div>

The table tells us what the <i>X</i> coordinate of the UFO is when <i>t</i> is 0, 1, 2, and so on.<p>
Creating this kind of table helps people figure out where the UFO is at all
times. For example, it&#8217;s relatively easy to see that when <i>t</i> is 5,
the UFO is at 70. Where is it when <i>t</i> is 7 or when <i>t</i> is 9?
Using a table is inconvenient, however, because for something like a
computer game we may need to know the <i>X</i> coordinate of the UFO for
dozens, hundreds, and thousands of values of <i>t</i>. For this purpose,
it is better to figure out an <em>algebraic formula</em> that describes what
<i>X</i> is for a given value of <i>t</i>.</p>
<p>
Here is the algebraic formula that relates <i>X</i> to <i>t</i>: 
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  10  &middot;  <em>t</em>  +  20 </td></tr></table></div>
<p class=noindent>
Right now, it just showed up. Usually your teacher asks you to come up
with such a formula on your own, generalizing from a table like the one
above. In that case, it is good practice to test whether it works
properly. <em>Testing</em> means to pick some values for <i>t</i> for
which we know what <i>X</i> should be and to check that the formula
really produces the correct value of <i>X</i>. When <i>t</i> is 0, the
formula becomes
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  10  &middot;  0  +  20 </td></tr></table></div>
<p class=noindent>
and with a little bit of calculation we see that 
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  20 </td></tr></table></div>
<p class=noindent>
as expected from the figure and the table. The calculation for the case
when <i>t</i> is 1 is equally simple: 
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  10  &middot;  1  +  20 </td></tr></table></div>
<p class=noindent>
which we can simplify to 10  +  20 and therefore
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  30 </td></tr></table></div>
<p class=noindent>
also as predicted in the figure and the table. </p>
<p>
</p>
<p></p>
<hr>
<p></p>
<p><strong>Exercises</strong>
</p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.1.1"></a>
<b>Exercise 1.1.1.</b>&nbsp;&nbsp; 
Fill in the missing numbers in this table:
</p>
<div align=center><table><tr><td>

<table border=1><tr><td valign=top ><em>t</em>  =   </td><td valign=top >0     </td><td valign=top >1     </td><td valign=top >2     </td><td valign=top >3     </td><td valign=top >4     </td><td valign=top ><tt>...</tt></td><td valign=top >9 </td><td valign=top ></td></tr>
<tr><td valign=top ><em>Y</em>  =   </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top ><tt>...</tt></td><td valign=top > </td><td valign=top ></td></tr>
<tr><td valign=top ></td></tr></table>
</td></tr></table></div>

The table describes how far down the UFO is at the various
times.<p>
Formulate an algebraic formula that describes the relationship between <i>t</i> and <i>Y</i>. Test the algebraic formula with the examples from your
table.&nbsp;<a href="../Solutions/ufo-y-algebra.html">Solution</a></p>
<p></p>
<p>

<blockquote><table bgcolor="beige"><tr><td>

</p>
<a name="node_fig_Temp_5"></a>
<div class=figure align=center><table width=100%><tr><td align=center><p>
</p>
<p>


</p>
<p>
</p>
<blockquote>


<img src=Images/shot-up-ss.jpg width="100" alt="[A SHOT going up]">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<img src=Images/shot-up.jpg width="200" alt="[A SHOT going up]">
</blockquote><p>
</p>
</td></tr>
<tr><td align=center><b>Figure 2:</b>&nbsp;&nbsp;A shot from the ground</td></tr>
<tr><td>
</td></tr></table></div><p>

</td></tr></table></blockquote>
</p>
<p>
</p>
<p><a name="node_thm_1.1.2"></a>
<b>Exercise 1.1.2.</b>&nbsp;&nbsp;  
Take a look at figure&nbsp;<a href="#node_fig_Temp_5">2</a>. It depicts a shot that was fired
from the ground going straight up. The left version is again a 
canvas, and the right version is a similar picture drawn on a grid.</p>
<p>
Fill in the following table, which relates the <i>Y</i> position of the
shot with the time <i>t</i>: 
</p>
<div align=center><table><tr><td>

<table border=1><tr><td valign=top ><em>t</em>  =   </td><td valign=top >0     </td><td valign=top >1     </td><td valign=top >2     </td><td valign=top >3     </td><td valign=top >4     </td><td valign=top ><tt>...</tt></td><td valign=top >6 </td><td valign=top ></td></tr>
<tr><td valign=top ><em>Y</em>  =   </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top > </td><td valign=top ><tt>...</tt></td><td valign=top > </td><td valign=top ></td></tr>
<tr><td valign=top ></td></tr></table>
</td></tr></table></div>

At what <i>X</i> position is the shot all the time? <p>
Formulate an algebraic formula that describes the relationship between <i>t</i> and <i>Y</i> for the shot. Test the algebraic formula with the
examples from your table. If you find a mistake, does it have to be in the
formula? Could it be in the table? Or both? Also formulate an algebraic
formula that specifies what <i>X</i> is given the current value of
<code class=scheme><span class=variable>t</span></code>.&nbsp;<a href="../Solutions/shot-y-algebra.html">Solution</a></p>
<p></p>
<hr>
<p></p>
<p></p>
<p></p>
<p>
</p>
<p>
It&#8217;s time to start writing our game program. First, we tackle the UFO&#8217;s flying
action. Specifically, we want a program that computes the UFO&#8217;s <i>X</i>
coordinate given the time <i>t</i>:
</p>
<div align=left><pre class=scheme>(<span class=keyword>define</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=builtin>+</span> (<span class=builtin>*</span> <span class=selfeval>10</span> <span class=variable>t</span>) <span class=selfeval>20</span>))
</pre></div><p>
If we squint, the program looks just like the algebraic formula:
</p>
<div class=mathdisplay align=center><table><tr><td> <em>X</em>  =  10  &middot;  <em>t</em>  +  20 </td></tr></table></div>
<p class=noindent>
Let&#8217;s look at the differences: 
</p>
<ol>
<li><p>The most obvious difference is that the program is littered with
parentheses. Compare the variable expression on the left of the equality 
</p>
<div class=mathdisplay align=center><table><tr><td> 10  &middot;  <em>t</em>  +  20 </td></tr></table></div>
<p class=noindent>
with the Scheme expression in the program:
</p>
<div align=left><pre class=scheme>(<span class=builtin>+</span> (<span class=builtin>*</span> <span class=selfeval>10</span> <span class=variable>t</span>) <span class=selfeval>20</span>)
</pre></div><p>
Clearly, every Scheme expression is surrounded with <code class=scheme>(</code> and <code class=scheme>)</code>,
and it always mentions the operator first. Hence, there is never a question
what is to be done next and in what order.</p>
<p>
</p>
<li><p>The word <code class=scheme><span class=keyword>define</span></code> is a big marker. It says that we are
defining a <em>function</em>, which is the real name for such algebraic
formulas. Scheme programs consist of many functions, and that&#8217;s all there
is to programming mostly.</p>
<p>
</p>
<li><p>The middle piece tells us two things: the name of the expression, <i>X</i> in this case, and the name of the variable, <i>t</i>, on which it
depends. 
</p>
</ol><p>
It looks different from regular algebra, but what differs is the looks,
not the meaning.<a name="node_call_footnote_Temp_6"></a><sup><small><a href="#node_footnote_Temp_6">2</a></small></sup></p>
<p>
Now that we have defined the function in Scheme, we must learn to use it. As we
just discussed, the definition tells us that <code class=scheme><span class=variable>X</span></code> depends on
<code class=scheme><span class=variable>t</span></code>. This means that when we want to use <code class=scheme><span class=variable>X</span></code>, we must supply a
value for <code class=scheme><span class=variable>t</span></code>, and then the Scheme program replies with the value of
<code class=scheme><span class=variable>X</span></code>. Here are some example: 
</p>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>0</span>)
<span class=selfeval>20</span>
<span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>1</span>)
<span class=selfeval>30</span>
<span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>2</span>)
<span class=selfeval>40</span>
<span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>3</span>)
<span class=selfeval>50</span>
</pre></div><p>
In other words, to supply a value to a function, we write &#8220;<code class=scheme>(</code>&#8221;,
the name of the function, a value for the independent variable of the
function (<code class=scheme><span class=variable>t</span></code> here), and a &#8220;<code class=scheme>)</code>&#8221;. What we get is an
expression just like <code class=scheme>(<span class=builtin>+</span> <span class=selfeval>1</span> <span class=selfeval>1</span>)</code> or <code class=scheme>(<span class=builtin>*</span> <span class=selfeval>2</span> <span class=selfeval>2</span>)</code>. DrScheme, which
is basically a calculator for Scheme functions, then evaluates this
expression for us, using the rules from algebra that we know so
well. Indeed, if you use DrScheme&#8217;s Stepper, it evaluates the expression
exactly like you evaluate an algebraic expression for your homework. </p>
<p>
If you compare these four evaluations with the table above, you see that the
results are just the ones we expected: <code class=scheme><span class=selfeval>20</span></code>, when <i>t</i> is
<code class=scheme><span class=selfeval>0</span></code>;  <code class=scheme><span class=selfeval>30</span></code> when <i>t</i> is <code class=scheme><span class=selfeval>1</span></code>; and so on. Of course, we
can also try randomly chosen inputs such as <code class=scheme><span class=selfeval>8</span></code> or <code class=scheme><span class=selfeval>22</span></code>, just to
see what <code class=scheme><span class=variable>X</span></code> is for such values of <code class=scheme><span class=variable>t</span></code>: 
</p>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>8</span>)
<span class=selfeval>100</span>
<span class=builtin>&gt;</span> (<span class=variable>X</span> <span class=selfeval>22</span>)
<span class=selfeval>240</span>
</pre></div><p>
The game program uses this function all the time to figure out where to
draw the UFO.</p>
<p>
</p>
<p></p>
<hr>
<p></p>
<p><strong>Exercises</strong>
</p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.1.3"></a>
<b>Exercise 1.1.3.</b>&nbsp;&nbsp; 
In exercise&nbsp;<a href="#node_thm_1.1.1">1.1.1</a> you figured out that the algebraic
formula for <i>Y</i> given <i>t</i>: 
</p>
<div class=mathdisplay align=center><table><tr><td> <em>Y</em>  =  <tt>&middot;&middot;&middot;</tt> <em>t</em> <tt>&middot;&middot;&middot;</tt> </td></tr></table></div>
<p class=noindent>
Use this formula to develop the function <code class=scheme><span class=variable>Y</span></code>, which&#8212;like
<code class=scheme><span class=variable>X</span></code>&#8212;consumes <code class=scheme><span class=variable>t</span></code> and computes the <i>Y</i> coordinate for
the UFO. Test the function with inputs from the table that you used to
develop the formula. Compare the results with the expected outputs in the
table.&nbsp;<a href="../Solutions/ufo-y-scheme.html">Solution</a></p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.1.4"></a>
<b>Exercise 1.1.4.</b>&nbsp;&nbsp; 
Exercise&nbsp;<a href="#node_thm_1.1.2">1.1.2</a> asked you to figure out how a shot moves
across a grid. That included making up tables and algebraic formulas for
the <i>X</i> and <i>Y</i> coordinates formula. Remember that the formulas
describe how to compute the coordinates given a value for <i>t</i>. </p>
<p>
Use these formulas to develop the function <code class=scheme><span class=variable>shot-X</span></code> and
<code class=scheme><span class=variable>shot-Y</span></code>, which consume <code class=scheme><span class=variable>t</span></code> and compute the <i>X</i> and
<i>Y</i> coordinates for the shot. Test the functions with inputs from
figure&nbsp;<a href="#node_fig_Temp_5">2</a>.  Compare the results with the expected
outputs from the table.&nbsp;<a href="../Solutions/shot-y-scheme.html">Solution</a></p>
<p></p>
<p>
</p>
<p>
</p>
<a name="node_sec_1.2"></a>
<h2 class=section>1.2&nbsp;&nbsp;Drawing a UFO</h2>
<p>Now we know how to compute where a UFO is, but we don&#8217;t know yet how to draw one
let alone create a canvas in which we can draw one. This is where &#8220;libraries&#8221;
come in. A library&#8212;here also called <small>T</small><small>E</small><small>A</small><small>C</small><small>H</small><small>P</small><small>A</small><small>C</small><small>K</small>&#8212;is a collection of
functions (or instructions) that assist us with just such tasks. </p>
<p>
For drawing, we use the <tt><strong>simple-draw.ss</strong></tt> teachpack. It provides four
functions that matter now:
</p>
<ol>
<li><p><code class=scheme>(<span class=variable>start</span> <span class=variable>width</span> <span class=variable>height</span>)</code> creates a canvas of <code class=scheme><span class=variable>width</span></code> &times;
<code class=scheme><span class=variable>height</span></code> pixels; </p>
<p>
</p>
<li><p><code class=scheme>(<span class=variable>draw-solid-disk0</span> <span class=variable>x</span> <span class=variable>y</span> <span class=variable>r</span> <span class=variable>c</span>)</code>, which draws a colored disk at
position (<code class=scheme><span class=variable>x</span></code>,<code class=scheme><span class=variable>y</span></code>), with radius <code class=scheme><span class=variable>r</span></code> and color <code class=scheme><span class=variable>c</span></code>;</p>
<p>
</p>
<li><p><code class=scheme>(<span class=variable>draw-solid-rect0</span> <span class=variable>x</span> <span class=variable>y</span> <span class=variable>w</span> <span class=variable>h</span> <span class=variable>c</span>)</code>, which draws a colored rectangle at
position (<code class=scheme><span class=variable>x</span></code>,<code class=scheme><span class=variable>y</span></code>), of <code class=scheme><span class=variable>w</span></code> &times; <code class=scheme><span class=variable>h</span></code> pixels, and
color <code class=scheme><span class=variable>c</span></code>;</p>
<p>
</p>
<li><p><code class=scheme>(<span class=variable>draw-solid-line0</span> <span class=variable>x0</span> <span class=variable>y0</span> <span class=variable>x1</span> <span class=variable>y1</span> <span class=variable>c</span>)</code>, which draws a colored line of
color <code class=scheme><span class=variable>c</span></code> between the two positions (<code class=scheme><span class=variable>x0</span></code>,<code class=scheme><span class=variable>y0</span></code>) and
(<code class=scheme><span class=variable>x1</span></code>,<code class=scheme><span class=variable>y1</span></code>).
</p>
</ol><p>
That&#8217;s all there is to <tt><strong>simple-draw.ss</strong></tt>. </p>
<p>
Except that we don&#8217;t know what to write where these functions expect a
color. Until now, all of our functions have consumed numbers and produced
numbers. It is therefore almost natural to expect some encoding that says
<code class=scheme><span class=selfeval>0</span></code> represents white, <code class=scheme><span class=selfeval>1</span></code> represents yellow, <code class=scheme><span class=selfeval>2</span></code>
represents orange, and so on. Of course, after a while we wouldn&#8217;t
remember which number represents which color, so this is clearly not a
good idea. The simple drawing teachpack therefore uses a more intuitive
way to say we want a blue line or a red disk:
</p>
<div align=center><table><tr><td>

<code class=scheme><span class=keyword>'</span><span class=variable>white</span></code> <code class=scheme><span class=keyword>'</span><span class=variable>yellow</span></code> <code class=scheme><span class=keyword>'</span><span class=variable>red</span></code> <code class=scheme><span class=keyword>'</span><span class=variable>blue</span></code> <code class=scheme><span class=keyword>'</span><span class=variable>green</span></code> <code class=scheme><span class=keyword>'</span><span class=variable>black</span></code>
</td></tr></table></div>

In short, think of a color word and put a tick in front of it, but
remember that this library doesn&#8217;t know all the colors. <p>
Let&#8217;s experiment with these functions a bit:<a name="node_call_footnote_Temp_7"></a><sup><small><a href="#node_footnote_Temp_7">3</a></small></sup>
</p>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>start</span> <span class=selfeval>100</span> <span class=selfeval>200</span>)
<span class=builtin>true</span>
</pre></div><p>
</p>
<p></p>
<div align=left>
This creates a canvas on your computer&#8217;s monitor that is 100 pixels wide
and 200 pixels high. To draw a green disk at the center of this canvas, we
enter this instruction:
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>draw-solid-disk0</span> <span class=selfeval>50</span> <span class=selfeval>50</span> <span class=selfeval>10</span> <span class=keyword>'</span><span class=variable>green</span>)
<span class=builtin>true</span>
</pre></div><p> 
</p>
</div><p>&nbsp;</p>
<div align=center>&nbsp;<img src="world-Z-G-1.gif" border="0" alt="[world-Z-G-1.gif]">&nbsp;</div>
<p>
</p>

<p class=noindent>The resulting disk has a radius of 10 pixels, as the accompanying
picture shows. If we also draw a thin rectangle 20 pixels to the left of
the disk&#8217;s center:</p>
<p>
</p>

<p class=noindent></p>
<p></p>
<div align=left>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>draw-solid-rect0</span> <span class=selfeval>30</span> <span class=selfeval>50</span> <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=keyword>'</span><span class=variable>green</span>)
<span class=builtin>true</span>
</pre></div><p>
the figure looks approximately like a flying saucer. To get a better
understanding of this picture, figure out why the width of the rectangle
is <code class=scheme><span class=selfeval>40</span></code>.
</p>
</div><p>&nbsp;</p>
<div align=center>&nbsp;<img src="world-Z-G-2.gif" border="0" alt="[world-Z-G-2.gif]">&nbsp;</div>
<p>
A descending UFO isn&#8217;t drawn once, but many times. Otherwise it looks
stationary. More precisely, the game program must draw the UFO when t is
<code class=scheme><span class=selfeval>0</span></code>, <code class=scheme><span class=selfeval>1</span></code>, <code class=scheme><span class=selfeval>2</span></code>, and so on. So let&#8217;s figure out how we
can accomplish this step by step. </p>
<p>
To draw the UFO one more time, we need to copy the above two lines and
change the <i>X</i> and <i>Y</i> coordinates:</p>
<p>
</p>

<p class=noindent></p>
<p></p>
<div align=left>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>draw-solid-disk0</span> <span class=selfeval>60</span> <span class=selfeval>70</span> <span class=selfeval>10</span> <span class=keyword>'</span><span class=variable>green</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>draw-solid-rect0</span> <span class=selfeval>40</span> <span class=selfeval>70</span> <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=keyword>'</span><span class=variable>green</span>)
<span class=builtin>true</span>
</pre></div><p>
Recall that for each step, the UFO moves down by <code class=scheme><span class=selfeval>20</span></code> pixels and
right by <code class=scheme><span class=selfeval>10</span></code>. This leaves us with two UFOs now. 
</p>
</div><p>&nbsp;</p>
<div align=center>&nbsp;<img src="world-Z-G-3.gif" border="0" alt="[world-Z-G-3.gif]">&nbsp;</div>
<p>
Clearly, copying and editing code is not feasible if we want to draw the
UFOs hundreds of times. Instead, we define a function for drawing UFOs
and use it as often as needed. Defining this function is similar to
<table align=left border=2><tr><td><span class=footnotesize>show table with expressions?</span></td></tr></table>
defining a function that computes the <i>Y</i> coordinate of the
UFO. Specifically, we try to reuse the expressions (or instructions) that we
used to draw the UFO twice and we generalize from it: 
</p>
<div align=left><pre class=scheme>(<span class=keyword>define</span> (<span class=variable>ufo-draw</span> ...)
  (<span class=keyword>and</span> (<span class=variable>draw-solid-disk0</span> ... ... <span class=selfeval>10</span> <span class=keyword>'</span><span class=variable>green</span>)
       (<span class=variable>draw-solid-rect0</span> ... ... <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=keyword>'</span><span class=variable>green</span>)))
</pre></div><p>
Since we drew a disk and a rectangle to draw the UFO, the function says
that to draw a UFO first draw a disk <code class=scheme><span class=keyword>and</span></code> then a rectangle. Of
course, the dots tell us that the function is still incomplete.</p>
<p>
The dots signal that we don&#8217;t know yet what to write down at these
places. More precisely, the dots in the draw-solid- instructions say we
don&#8217;t know the <i>X</i> and <i>Y</i> coordinates of the UFO. We know,
however, that the location of UFO depends on the value of <code class=scheme><span class=variable>t</span></code> and
that the functions <code class=scheme><span class=variable>X</span></code> (from above) and the function <code class=scheme><span class=variable>Y</span></code> (from
exercise&nbsp;<a href="#node_thm_1.1.3">1.1.3</a>) describe how to get the respective
coordinates when we have <code class=scheme><span class=variable>t</span></code>. This suggests the following
refinement of the definition:
</p>
<div align=left><pre class=scheme>(<span class=keyword>define</span> (<span class=variable>ufo-draw</span> <span class=variable>t</span>)
  (<span class=keyword>and</span> (<span class=variable>draw-solid-disk0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>10</span> <span class=keyword>'</span><span class=variable>green</span>)
       (<span class=variable>draw-solid-rect0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=keyword>'</span><span class=variable>green</span>)))
</pre></div><p>
In other words, the function <code class=scheme><span class=variable>ufo-draw</span></code> consumes <code class=scheme><span class=variable>t</span></code>,
computes the <i>X</i> and <i>Y</i> coordinates of the UFO for
<code class=scheme><span class=variable>t</span></code>, and then draws a disk and a rectangle. </p>
<p>
Using <code class=scheme><span class=variable>ufo-draw</span></code> it is easy to draw the UFO four times or a hundred
times: </p>
<p>
</p>

<p class=noindent></p>
<p></p>
<div align=left>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>draw-ufo</span> <span class=selfeval>0</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>draw-ufo</span> <span class=selfeval>1</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>draw-ufo</span> <span class=selfeval>2</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>draw-ufo</span> <span class=selfeval>3</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>draw-ufo</span> <span class=selfeval>4</span>)
<span class=builtin>true</span>
</pre></div><p>
Recall that for each step, the UFO moves down by <code class=scheme><span class=selfeval>20</span></code> pixels and
right by <code class=scheme><span class=selfeval>10</span></code>. In the end, we have with five UFOs. 
</p>
</div><p>&nbsp;</p>
<div align=center>&nbsp;<img src="world-Z-G-4.gif" border="0" alt="[world-Z-G-4.gif]">&nbsp;</div>
<p>
</p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
</p>
<p></p>
<hr>
<p></p>
<p><strong>Exercises</strong>
</p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.2.1"></a>
<b>Exercise 1.2.1.</b>&nbsp;&nbsp; 
Create a canvas of 100 by 200 pixels and draw a shot close to the bottom of
the canvas. For now, use thin, tall rectangles to depict shots. Draw a
second shot. </p>
<p>
Define the function <code class=scheme><span class=variable>shot-draw</span></code>, which&#8212;like
<code class=scheme><span class=variable>ufo-draw</span></code>&#8212;consumes <code class=scheme><span class=variable>t</span></code> and draws a shot. It computes the
<i>X</i> and <i>Y</i> coordinates of the shot using the functions from
exercise&nbsp;<a href="#node_thm_1.1.4">1.1.4</a>.&nbsp;<a href="../Solutions/draw-shot.html">Solution</a></p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.2.2"></a>
<b>Exercise 1.2.2.</b>&nbsp;&nbsp; 
Shots don&#8217;t look good as squares. Let&#8217;s use thin, upward pointing,
equilateral triangles instead. </p>
<p>
To start with, create a canvas of 100 by 100 pixels, and draw a small
equilateral triangle into it with these base points:
</p>
<div align=center><table><tr><td>

<img src="world-Z-G-5.gif" border="0" alt="[world-Z-G-5.gif]">
</td></tr></table></div>

Connect the base points with three lines. What is the height of the
triangle? What is the width of its base? <p>
Next, draw a triangle of the same width and height but with the highest
point at (70,10). </p>
<p>
Draw two more shots, one at (20,30) and another one at (80,30). You can
think of these last two and the first shot as one and the same shot moving
upwards. </p>
<p>
Use your experience with the four triangle to define a function that can
draw a triangle of this size, given the coordinates of the base point: 
</p>
<div align=left><pre class=scheme><span class=comment>;; given: <code class=scheme><span class=variable>xtop</span></code> is a the <em>x</em> coordinate of the top-most point,</span>
<span class=comment>;; <code class=scheme><span class=variable>ytop</span></code> is the <em>y</em> coordinate </span>
(<span class=keyword>define</span> (<span class=variable>triangle-draw</span> <span class=variable>xtop</span> <span class=variable>ytop</span>)
  (<span class=keyword>and</span> ...
       ...
       ...))
</pre></div><p>
The first two lines are called comments, and they remind you what
<code class=scheme><span class=variable>xtop</span></code> and <code class=scheme><span class=variable>ytop</span></code> are, when you will read this program in
two months or three years from now. </p>
<p>
Finally, define the function <code class=scheme><span class=variable>shot-draw</span></code>, which draws a shot as a
triangle. It consumes a single number, the time <code class=scheme><span class=variable>t</span></code>, and draws a
triangle on a canvas of size 100 by 200:
</p>
<div align=left><pre class=scheme><span class=comment>;; given: <code class=scheme><span class=variable>t</span></code></span>
(<span class=keyword>define</span> (<span class=variable>shot-draw</span> <span class=variable>t</span>)
  ...)
</pre></div><p>
Use the functions <code class=scheme><span class=variable>shot-X</span></code> and <code class=scheme><span class=variable>shot-Y</span></code> from exercise to
determine where the base point is. Hint: You should use
<code class=scheme><span class=variable>triangle-draw</span></code>.&nbsp;<a href="../Solutions/draw-shot-tri.html">Solution</a></p>
<p></p>
<hr>
<p></p>
<p></p>
<p></p>
<p>
So far we know how to draw the UFO when <code class=scheme><span class=variable>t</span></code> is <code class=scheme><span class=selfeval>0</span></code>,
<code class=scheme><span class=selfeval>1</span></code>, <code class=scheme><span class=selfeval>2</span></code>, <code class=scheme><span class=selfeval>3</span></code> and <code class=scheme><span class=selfeval>4</span></code>, but this doesn&#8217;t really
show how the UFO moves. It just shows the same UFO at five different
times. In a computer game, we would just see the UFO glide across the
screen like this: 
</p>
<div align=center><table><tr><td>





<img src=Images/ufo-step1.jpg width="100" alt="[UFO1]">
<img src=Images/ufo-step2.jpg width="100" alt="[UFO2]">
<img src=Images/ufo-step3.jpg width="100" alt="[UFO3]">
<img src=Images/ufo-step4.jpg width="100" alt="[UFO4]">
<img src=Images/ufo-step5.jpg width="100" alt="[UFO5]">
</td></tr></table></div>

The left-most screenshot depicts the scene when <code class=scheme><span class=variable>t</span></code> is <code class=scheme><span class=selfeval>0</span></code>,
and the right one represents the scene when <code class=scheme><span class=variable>t</span></code> is <code class=scheme><span class=selfeval>4</span></code>.<p>
Put differently, as the program updates the scene, going from <em>t</em> to <em>t</em> + 1,
it must erase the old UFO and draw the new one. So what does erasing mean?
Say the UFO is green and the canvas is white. If the program draws a UFO
in <em>white</em> at the <em>same place</em>, the UFO is no longer
visible. So erasing really just means &#8220;draw the shape in white&#8221; and is
nothing special. </p>
<p>
Since the program must erase the UFO as often as it draws it, let&#8217;s define
a function for this action. The only difference between this erasing
function and the drawing is the color that we give the drawing
instructions. Hence, copying the definition of <code class=scheme><span class=variable>ufo-draw</span></code> and
replacing <code class=scheme><span class=keyword>'</span><span class=variable>green</span></code> with <code class=scheme><span class=keyword>'</span><span class=variable>white</span></code> should work:
</p>
<div align=left><pre class=scheme>(<span class=keyword>define</span> (<span class=variable>ufo-erase</span> <span class=variable>t</span>)
  (<span class=keyword>and</span> (<span class=variable>draw-solid-disk0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>10</span> <span class=keyword>'</span><span class=variable>white</span>)
       (<span class=variable>draw-solid-rect0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=keyword>'</span><span class=variable>white</span>)))
</pre></div><p></p>
<p>
</p>

<p class=noindent></p>
<p></p>
<div align=left>
Here is a test: 
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>ufo-draw</span> <span class=selfeval>0</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>ufo-erase</span> <span class=selfeval>0</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>ufo-draw</span> <span class=selfeval>1</span>)
<span class=builtin>true</span>
</pre></div><p>
</p>
</div><p>&nbsp;</p>
<div align=center>&nbsp;<img src="world-Z-G-6.gif" border="0" alt="[world-Z-G-6.gif]">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="world-Z-G-7.gif" border="0" alt="[world-Z-G-7.gif]">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="world-Z-G-8.gif" border="0" alt="[world-Z-G-8.gif]">&nbsp;</div>
<p>
</p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>

<p class=noindent>The first instruction draws the UFO when <code class=scheme><span class=variable>t</span></code> is
<code class=scheme><span class=selfeval>0</span></code> and produces the left-most canvas in the sequence. The second
instruction erases the UFO and produces the blank canvas in the
middle. The last instruction draws the UFO when <code class=scheme><span class=variable>t</span></code> is
<code class=scheme><span class=selfeval>1</span></code>. As we can see from the sequence of screen shots, our pair of
functions performs as expected, and if we could somehow repeat these kind
of instructions quickly, say, once a second or even faster, we would have
the beginning of a game program. </p>
<p>

<blockquote><table bgcolor="beige"><tr><td>

</p>
<a name="node_fig_Temp_8"></a>
<div class=figure align=center><table width=100%><tr><td align=center><div align=left><pre class=scheme><span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, the time, and <code class=scheme><span class=variable>c</span></code>, a color</span>
(<span class=keyword>define</span> (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=variable>c</span>)
  (<span class=keyword>and</span> (<span class=variable>draw-solid-disk0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>10</span> <span class=variable>c</span>)
       (<span class=variable>draw-solid-rect0</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>) <span class=selfeval>40</span> <span class=selfeval>3</span> <span class=variable>c</span>)))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, the time </span>
(<span class=keyword>define</span> (<span class=variable>ufo-draw</span> <span class=variable>t</span>) (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=keyword>'</span><span class=variable>green</span>))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, the time </span>
(<span class=keyword>define</span> (<span class=variable>ufo-erase</span> <span class=variable>t</span>) (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=keyword>'</span><span class=variable>white</span>))
</pre></div><p></p>
<p>
</p>
</td></tr>
<tr><td align=center><b>Figure 3:</b>&nbsp;&nbsp;Drawing and erasing UFOs properly</td></tr>
<tr><td>
</td></tr></table></div><p>

</td></tr></table></blockquote>
</p>
<p>
Still, this is <em>not</em> a good way to write this function, especially if
the program grows and consists of hundreds or thousands of such small
functions. To understand why this is bad, imagine you want a blue
background. It&#8217;s easy to accomplish; just have your function draw a blue
rectangle of the size of the canvas before anything else. What would you
have to change in the definition of <code class=scheme><span class=variable>ufo-erase</span></code> to get the moving
effect for the UFO? Since there are two occurrences of <code class=scheme><span class=keyword>'</span><span class=variable>white</span></code>, a
good and valid guess is that we must replace both occurrences with
<code class=scheme><span class=keyword>'</span><span class=variable>blue</span></code>. </p>
<p>
Imagine a second change. Say the UFO should have an antenna. For
simplicity, the function can draw the antenna as a short line that sticks
out of the disk, pointing upwards. Of course, adding this line drawing
instruction to <code class=scheme><span class=variable>ufo-draw</span></code> is not enough. In addition, we need to
add it to <code class=scheme><span class=variable>ufo-erase</span></code> and replace <code class=scheme><span class=keyword>'</span><span class=variable>green</span></code> with the
background color. </p>
<p>
Because we copied the code for <code class=scheme><span class=variable>ufo-draw</span></code> and created
<code class=scheme><span class=variable>ufo-erase</span></code> from it, changes to the program require duplicate
work. Although such duplicate work looks harmless right now, especially
with such small functions as ours, it is a good idea to avoid it from the
very beginning. </p>
<p>
The trick to avoiding duplicate work is <em>abstraction</em>, a fancy word
for defining a function. In our case, we want to define a function that is
like <code class=scheme><span class=variable>ufo-draw</span></code> and <code class=scheme><span class=variable>ufo-erase</span></code> but it can do both. Since
the difference between the two functions is the color that they use, the
natural way to merge them into one function is to use an argument for the
color. That is, we define a function that takes two arguments: the value of
<code class=scheme><span class=variable>t</span></code> and a color. It then draws the UFO shape in the given color,
using <code class=scheme>(<span class=variable>X</span> <span class=variable>t</span>)</code> and <code class=scheme>(<span class=variable>Y</span> <span class=variable>t</span>)</code> for the coordinates. </p>
<p>
Take a look at figure&nbsp;<a href="#node_fig_Temp_8">3</a>. The first definition&#8212;named
<code class=scheme><span class=variable>ufo-paint</span></code>&#8212;is this general function. Take a look at the revised
definitions of <code class=scheme><span class=variable>ufo-draw</span></code> and <code class=scheme><span class=variable>ufo-erase</span></code> in this
figure. They just use <code class=scheme><span class=variable>ufo-paint</span></code> to draw the UFO at the proper
place and in the proper color. If we now change the shape of the UFO, all
we have to do is change <code class=scheme><span class=variable>ufo-paint</span></code>, once! If we want to change the
background color to blue, we can do so, by changing <code class=scheme><span class=variable>ufo-erase</span></code>, in
one place. In short, by working a bit extra now, we can save ourselves and
other people working on the function a lot of time in the future.</p>
<p>
</p>
<a name="node_sec_1.3"></a>
<h2 class=section>1.3&nbsp;&nbsp;Animating the UFO&#8217;s Flight</h2>
<p>In the first subsection, we learned to compute the <i>X</i> and <i>Y</i>
coordinates from the value of <code class=scheme><span class=variable>t</span></code>. In the second subsection, we
learned to draw a UFO at its proper coordinates in various colors. And we
saw how to move the UFO across a canvas. Unfortunately, the UFO&#8217;s movement
is too slow for a game. Worse, thus far, we merely know how to move the
UFO manually via instructions issued at the prompt of DrScheme&#8217;s
Interactions window. </p>
<p>
What we really want is a mechanism for redrawing the canvas every so often
automatically. To support just this kind of action, the
<tt><strong>simple-draw.ss</strong></tt> teachpack supports three more instructions: 
</p>
<ol>
<li><p><code class=scheme>(<span class=variable>big-bang</span> <span class=variable>n</span> <span class=variable>x</span>)</code> starts the clock and makes it tick every
<code class=scheme><span class=variable>n</span></code> seconds; it creates a world from <code class=scheme><span class=variable>x</span></code>;</p>
<p>
</p>
<li><p><code class=scheme>(<span class=variable>on-tick-event</span> <span class=variable>tock</span>)</code> sets the tick handler to <code class=scheme><span class=variable>tock</span></code>,
which is applied to the current world at every tick of the clock and
produces the next world; 
</p>
</ol><p>
Clearly, to understand these functions and to see what they do, we must
understand what it means to create a world and to compute a new one. </p>
<p>
A world in the sense of the teachpack is something that we want to track
during our computations. Usually it is an entire collection, say a UFO and
a bunch of shots and perhaps some surface vehicles that fire these shots
and so on. Since all we know, however, are numbers, our world is just a
number. For example, if all we want to do is move a single UFO across the
canvas, we can just use <code class=scheme><span class=variable>t</span></code> to represent the world. From that,
other functions can compute the UFO&#8217;s coordinates and a third function can
draw the UFO at these coordinates.</p>
<p>
This suggests the following to get started: 
</p>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>start</span> <span class=selfeval>100</span> <span class=selfeval>200</span>)
<span class=builtin>true</span>
<span class=builtin>&gt;</span> (<span class=variable>big-bang</span> <span class=selfeval>.5</span> <span class=selfeval>0</span>)
<span class=builtin>true</span>
</pre></div><p>
The first instruction creates the canvas. The second starts the clock and
sets <code class=scheme><span class=variable>t</span></code> to <code class=scheme><span class=selfeval>0</span></code>.</p>
<p>
The critical step is to tell the teachpack which function we want to run at
every tick of the clock. Let&#8217;s call this function <code class=scheme><span class=variable>next</span></code>. Once we
enter
</p>
<div align=left><pre class=scheme><span class=builtin>&gt;</span> (<span class=variable>on-tick-event</span> <span class=variable>next</span>)
<span class=builtin>true</span>
</pre></div><p>
the teachpack applies <code class=scheme><span class=variable>next</span></code> to the first world, call it
<code class=scheme><span class=variable>w0</span></code>, and <code class=scheme><span class=variable>next</span></code> produces another world, say
<code class=scheme><span class=variable>w1</span></code>. Then the teachpack applies <code class=scheme><span class=variable>next</span></code> to <code class=scheme><span class=variable>w1</span></code> and
obtains <code class=scheme><span class=variable>w2</span></code>, and so on. Put differently, the teachpack uses
<code class=scheme><span class=variable>next</span></code> in a chain that looks like this: 
</p>
<div align=left><pre class=scheme>... 
 (<span class=variable>next</span> 
  (<span class=variable>next</span> 
   (<span class=variable>next</span> 
    (<span class=variable>next</span> 
     (<span class=variable>next</span> <span class=variable>w0</span>))))) ...
</pre></div><p>
Every use of <code class=scheme><span class=variable>next</span></code> is synchronized with the tick of the clock. </p>
<p>

<blockquote><table bgcolor="beige"><tr><td>

</p>
<a name="node_fig_Temp_9"></a>
<div class=figure align=center><table width=100%><tr><td align=center><div align=left><pre class=scheme><span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, compute the <code class=scheme><span class=variable>x</span></code> coordinate for the UFO</span>
(<span class=keyword>define</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=builtin>+</span> <span class=selfeval>20</span> (<span class=builtin>*</span> <span class=selfeval>10</span> <span class=variable>t</span>)))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, compute the <code class=scheme><span class=variable>y</span></code> coordinate for the UFO</span>
(<span class=keyword>define</span> (<span class=variable>Y</span> <span class=variable>t</span>) (<span class=builtin>+</span> <span class=selfeval>50</span> (<span class=builtin>*</span> <span class=selfeval>20</span> <span class=variable>t</span>)))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code> and a color <code class=scheme><span class=variable>c</span></code>, </span>
<span class=comment>;; paint the UFO at the coordinates for <code class=scheme><span class=variable>t</span></code> in color <code class=scheme><span class=variable>c</span></code></span>
(<span class=keyword>define</span> (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=variable>color</span>)
  (<span class=keyword>and</span> (<span class=variable>draw-solid-disk</span> (<span class=builtin>make-posn</span> (<span class=variable>X</span> <span class=variable>t</span>) (<span class=variable>Y</span> <span class=variable>t</span>)) <span class=selfeval>5</span> <span class=variable>color</span>)
       (<span class=variable>draw-solid-rect</span> (<span class=builtin>make-posn</span> (<span class=builtin>-</span> (<span class=variable>X</span> <span class=variable>t</span>) <span class=selfeval>15</span>) (<span class=variable>Y</span> <span class=variable>t</span>)) <span class=selfeval>30</span> <span class=selfeval>1</span> <span class=variable>color</span>)))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, paint the UFO at the coordinates for <code class=scheme><span class=variable>t</span></code> in <code class=scheme><span class=keyword>'</span><span class=variable>green</span></code></span>
(<span class=keyword>define</span> (<span class=variable>ufo-draw</span> <span class=variable>t</span>) (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=keyword>'</span><span class=variable>green</span>))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, erase the UFO</span>
<span class=comment>;; by painting it at the coordinates for <code class=scheme><span class=variable>t</span></code> in the background color</span>
(<span class=keyword>define</span> (<span class=variable>ufo-erase</span> <span class=variable>t</span>) (<span class=variable>ufo-paint</span> <span class=variable>t</span> <span class=keyword>'</span><span class=variable>white</span>))

<span class=comment>;; given: <code class=scheme><span class=variable>t</span></code>, erase the UFO at <code class=scheme><span class=variable>t</span></code>, draw it </span>
<span class=comment>;; at <code class=scheme>(<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span></code>, and return <code class=scheme>(<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>)</code> as the new value </span>
(<span class=keyword>define</span> (<span class=variable>tock</span> <span class=variable>t</span>)
  (<span class=keyword>draw</span> (<span class=variable>ufo-erase</span> <span class=variable>t</span>)
        (<span class=variable>ufo-draw</span> (<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>))
	<span class=keyword>produce</span>
	(<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>)))
<span class=comment></span>
<span class=comment>;; create the canvas</span>
(<span class=variable>start</span> <span class=selfeval>100</span> <span class=selfeval>200</span>)

<span class=comment>;; start the clock, make it tick every .5 seconds; the initial &quot;world&quot; is 0</span>
(<span class=variable>big-bang</span> <span class=selfeval>.5</span> <span class=selfeval>0</span>)

<span class=comment>;; every time the clock tick, apply tock to the current world</span>
<span class=comment>;; and let it produce the next world</span>
(<span class=variable>on-tick-event</span> <span class=variable>tock</span>)
</pre></div><p>
</p>
</td></tr>
<tr><td align=center><b>Figure 4:</b>&nbsp;&nbsp;A UFO Animation</td></tr>
<tr><td> 
</td></tr></table></div><p>

</td></tr></table></blockquote>
</p>
<p>
In our specific example, the world is <code class=scheme><span class=variable>t</span></code> and we know that
<code class=scheme><span class=variable>t</span></code> starts with <code class=scheme><span class=selfeval>0</span></code>, and then becomes <code class=scheme><span class=selfeval>1</span></code>,
<code class=scheme><span class=selfeval>2</span></code>, and so on. Hence, the function that consumes <code class=scheme><span class=variable>t</span></code> and
produces the next one just adds <code class=scheme><span class=selfeval>1</span></code> to <code class=scheme><span class=variable>t</span></code>:
</p>
<div align=left><pre class=scheme><span class=comment>;; draft 1</span>
(<span class=keyword>define</span> (<span class=variable>next-time</span> <span class=variable>t</span>) (<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>))
</pre></div><p>
Given that <code class=scheme><span class=variable>w0</span></code> in our example is <code class=scheme><span class=selfeval>0</span></code>, we now know that the
<code class=scheme><span class=variable>teachpack</span></code> executes something like this: 
</p>
<div align=left><pre class=scheme>... 
 (<span class=variable>next-time</span> 
  (<span class=variable>next-time</span> 
   (<span class=variable>next-time</span> 
    (<span class=variable>next-time</span> 
     (<span class=variable>next-time</span> <span class=selfeval>0</span>))))) ...
</pre></div><p>
Of course, this accomplishes nothing yet. The first use of
<code class=scheme><span class=variable>next-time</span></code> consumes <code class=scheme><span class=selfeval>0</span></code> and produces <code class=scheme><span class=selfeval>1</span></code>, the second
consumes the <code class=scheme><span class=selfeval>1</span></code> and produces <code class=scheme><span class=selfeval>2</span></code>, and so forth, but no UFO
is drawn or erased. </p>
<p>
To get out &#8220;world transforming&#8221; functions to draw something on the canvas,
we need one more piece of knowledge about <tt><strong>simple-draw.ss</strong></tt>. Take a
look at this function definition: 
</p>
<div align=left><pre class=scheme><span class=comment>;; draft 2: </span>
(<span class=keyword>define</span> (<span class=variable>next-time</span> <span class=variable>t</span>)
  (<span class=keyword>draw</span> (<span class=variable>ufo-erase</span> <span class=variable>t</span>)
        (<span class=variable>ufo-draw</span> (<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>))
	<span class=keyword>produce</span> (<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>)))
</pre></div><p>
Like the first draft, this version of <code class=scheme><span class=variable>next-time</span></code> consumes the
value of <code class=scheme><span class=variable>t</span></code> and, as the bold <code class=scheme><span class=keyword>produce</span></code> says, produces
<code class=scheme>(<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>)</code>. In addition, however, the function also performs two
<code class=scheme><span class=keyword>draw</span></code>ing tasks: it erases the UFO at <code class=scheme><span class=variable>t</span></code> and draws it at
<code class=scheme>(<span class=builtin>+</span> <span class=variable>t</span> <span class=selfeval>1</span>)</code>.</p>
<p>
One good way to study the behavior of <code class=scheme><span class=variable>next-time</span></code> is to tabulate the
uses of the function: 
</p>
<div align=center><table><tr><td>

<table border=1><tr><td valign=top >clock tick </td><td valign=top >.5 </td><td valign=top >1.0 </td><td valign=top >1.5 </td></tr>
<tr><td valign=top >given: 
<code class=scheme><span class=variable>t</span></code> </td><td valign=top >0 </td><td valign=top >1  </td><td valign=top >2  </td></tr>
<tr><td valign=top ><code class=scheme><span class=keyword>draw</span></code> 
</td><td valign=top ><code class=scheme>(<span class=variable>ufo-erase</span> <span class=selfeval>0</span>)</code> </td><td valign=top ></td><td valign=top ></td></tr>
<tr><td valign=top ></td><td valign=top ><code class=scheme>(<span class=variable>ufo-draw</span> <span class=selfeval>1</span>)</code>  </td><td valign=top ><code class=scheme>(<span class=variable>ufo-erase</span> <span class=selfeval>1</span>)</code> </td><td valign=top ></td></tr>
<tr><td valign=top ></td><td valign=top ></td><td valign=top ><code class=scheme>(<span class=variable>ufo-draw</span> <span class=selfeval>2</span>)</code> </td><td valign=top ><code class=scheme>(<span class=variable>ufo-erase</span> <span class=selfeval>2</span>)</code></td></tr>
<tr><td valign=top ></td><td valign=top ></td><td valign=top ></td><td valign=top ><code class=scheme>(<span class=variable>ufo-draw</span> <span class=selfeval>3</span>)</code></td></tr>
<tr><td valign=top ><code class=scheme><span class=keyword>produce</span></code> </td><td valign=top >1 </td><td valign=top >2  </td><td valign=top >3  </td></tr>
<tr><td valign=top ></td></tr></table>
</td></tr></table></div>

Each column shows when <code class=scheme><span class=variable>next-time</span></code> is used, the value of <code class=scheme><span class=variable>t</span></code>
that it consumes, the <code class=scheme><span class=keyword>draw</span></code> actions that it performs, and the
value that it <code class=scheme><span class=keyword>produce</span></code>s. As explained already, the value that it
produces is the value that <code class=scheme><span class=variable>next-time</span></code> consumes next. <p>
To clarify how the drawing actions interact, the table depicts them in a
&#8220;stacked&#8221; manner. This shows that <code class=scheme>(<span class=variable>ufo-draw</span> <span class=selfeval>1</span>)</code> when <code class=scheme><span class=variable>t</span></code>
is <code class=scheme><span class=selfeval>0</span></code> is followed by <code class=scheme>(<span class=variable>ufo-erase</span> <span class=selfeval>1</span>)</code> when <code class=scheme><span class=variable>t</span></code> is
<code class=scheme><span class=selfeval>1</span></code>. Similarly, <code class=scheme>(<span class=variable>ufo-draw</span> <span class=selfeval>2</span>)</code> is followed by
<code class=scheme>(<span class=variable>ufo-erase</span> <span class=selfeval>2</span>)</code> when <code class=scheme><span class=variable>t</span></code> is <code class=scheme><span class=selfeval>2</span></code>. More concisely,
<code class=scheme><span class=variable>next-time</span></code> ensures that each use of <code class=scheme><span class=variable>ufo-draw</span></code> is followed
by an equivalent use of <code class=scheme><span class=variable>ufo-erase</span></code>, which erases the UFO before it
is redrawn at a different spot. </p>
<p>
After all this preliminary work, we know enough to discuss and understand
the program in figure&nbsp;<a href="#node_fig_Temp_9">4</a>. The program consists of six
function definitions and three expressions, separated by a horizontal
line. The bottom half creates a canvas, starts the clock, and tells the
teachpack to run the function <code class=scheme><span class=variable>tock</span></code> on every clock tick.  The top
half of the figure introduces the two functions for computing a UFO&#8217;s
coordinates, the three functions for drawing and erasing the UFO, and the
function <code class=scheme><span class=variable>tock</span></code> that is run for every tick of the clock. And that&#8217;s
all there is to flying a UFO across your computer&#8217;s monitor. The next goal
is to make the UFO land and to enable the player to shoot at the UFO at
least once to prevent it from landing.</p>
<p>
</p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
</p>
<p></p>
<hr>
<p></p>
<p><strong>Exercises</strong>
</p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.3.1"></a>
<b>Exercise 1.3.1.</b>&nbsp;&nbsp; 
Explore the program in figure&nbsp;<a href="#node_fig_Temp_9">4</a>. </p>
<p>
Find out how <code class=scheme><span class=variable>tock</span></code> in that figure works manually.  Enter expression
expressions such as <code class=scheme>(<span class=variable>tock</span> <span class=selfeval>0</span>)</code> and <code class=scheme>(<span class=variable>tock</span> <span class=selfeval>1</span>)</code> into
DrScheme&#8217;s Interactions window and see what their results and their
effects on the canvas are. Hint: Execute the program in
figure&nbsp;<a href="#node_fig_Temp_9">4</a> but comment out the expression
<code class=scheme>(<span class=variable>on-tick-event</span> <span class=variable>tock</span>)</code>. </p>
<p>
Make the UFO animation slower and/or faster. </p>
<p>
Render the UFO as a yellow shape. Add an antenna. Make the background
blue. </p>
<p>
Swap the two <code class=scheme><span class=keyword>draw</span></code>ing actions in <code class=scheme><span class=variable>tock</span></code>. Does this make a
difference? Why? Why not?&nbsp;<a href="../Solutions/ufo-practice.html">Solution</a></p>
<p></p>
<p>
</p>
<p><a name="node_thm_1.3.2"></a>
<b>Exercise 1.3.2.</b>&nbsp;&nbsp; 
Develop a complete function for simulating the flight of a shot, starting at
the bottom of the canvas: 
</p>
<div align=center><table><tr><td>





<img src=Images/shot-step1.jpg width="100" alt="[SHOT1]">
<img src=Images/shot-step2.jpg width="100" alt="[SHOT2]">
<img src=Images/shot-step3.jpg width="100" alt="[SHOT3]">
<img src=Images/shot-step4.jpg width="100" alt="[SHOT4]">
</td></tr></table></div>

Use the functions from exercises&nbsp;<a href="#node_thm_1.1.4">1.1.4</a>
and&nbsp;<a href="#node_thm_1.2.1">1.2.1</a>. Display the shot as a small disk first and then
use the function from exercise&nbsp;<a href="#node_thm_1.2.2">1.2.2</a> to turn it into a
triangle.&nbsp;<a href="../Solutions/shot-complete.html">Solution</a><p></p>
<p>
</p>
<p><a name="node_thm_1.3.3"></a>
<b>Exercise 1.3.3.</b>&nbsp;&nbsp; 
Combine the UFO and the shot simulation in one canvas. That is, the UFO
should descend from the top and the shot should fly upwards from the
bottom, starting at the same time on the same
canvas.&nbsp;<a href="../Solutions/combine-ufo-shot.html">Solution</a></p>
<p></p>
<hr>
<p></p>
<p></p>
<p></p>
<p>
</p>
<div class=footnoterule><hr></div><p></p>
<div class=footnote><p><a name="node_footnote_Temp_4"></a><sup><small><a href="#node_call_footnote_Temp_4">1</a></small></sup> Unlike in
mathematics, the vertical grid numbers grow downwards. That&#8217;s just one of
those differences between mathematics and programming that you need to
accept.</p>
<p><a name="node_footnote_Temp_6"></a><sup><small><a href="#node_call_footnote_Temp_6">2</a></small></sup> As you will see over time, this style has
advantages, and it takes little time to get used to it.</p>
<p><a name="node_footnote_Temp_7"></a><sup><small><a href="#node_call_footnote_Temp_7">3</a></small></sup> Ignore the &#8220;true&#8221;
part for now.</p>
</div>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span class=disable>first, previous</span><span><span class=disable>, </span><a href="world-Z-H-1.html">next</a></span> page]</div>
</p>
<p></p>
<div align=right class=colophon>Last modified: Thursday, July 22nd, 2004 9:41:38am<br><div align=right class=advertisement>HTML conversion by <a href="http://www.ccs.neu.edu/~dorai/tex2page/tex2page-doc.html">TeX2page 20070609</a></div></div>
</div>
</body>
</html>
