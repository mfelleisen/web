<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>16&nbsp;Your Turn</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Redex Summer School</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="mon-mor.html" class="tocviewlink" data-pltdoc="x">The Theoretical Framework</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="mon-aft.html" class="tocviewlink" data-pltdoc="x">Syntax and Metafunctions</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="lab-mon-aft.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Designing Metafunctions</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="tue-mor.html" class="tocviewlink" data-pltdoc="x">Reductions and Semantics</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="lab-tue-mor.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Designing Reductions</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="tue-aft.html" class="tocviewlink" data-pltdoc="x">Types and Property Testing</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="lab-tue-aft.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Type Checking</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="wed-mor.html" class="tocviewlink" data-pltdoc="x">Imperative Extensions</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="lab-wed-mor.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Contexts and Stores</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="wed-aft.html" class="tocviewlink" data-pltdoc="x">Abstract Machines</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="lab-wed-aft.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Machine Transitions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="thu-mor.html" class="tocviewlink" data-pltdoc="x">Abstracting Abstract Machines I</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="lab-thu-mor.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Abstracting Abstract Machines I</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="thu-aft.html" class="tocviewlink" data-pltdoc="x">Abstracting Abstract Machines II</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="lab-thu-aft.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Lab</span> Abstracting Abstract Machines II</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Your Turn</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>16&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Your Turn</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">16.1&nbsp;</td><td><a href="#%28part._.Suggestions_for_.Small_.Practice_.Problems%29" class="tocviewlink" data-pltdoc="x">Suggestions for Small Practice Problems</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">16.1<tt>&nbsp;</tt></span><a href="#%28part._.Suggestions_for_.Small_.Practice_.Problems%29" class="tocsubseclink" data-pltdoc="x">Suggestions for Small Practice Problems</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.2.900.4</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lab-thu-aft.html" title="backward to &quot;15 Lab Abstracting Abstract Machines II&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Redex Summer School&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>16<tt>&nbsp;</tt><a name="(part._fri-mor)"></a>Your Turn</h3><p>It&rsquo;s your turn. If you came to this summer school, you probably did so
because you wanted to use Redex for a project. Now is the time to get
started and/or resume your work. All of us will be available to help so
it&rsquo;s probably best to experiment with those parts of the project that seems
to pose significant problems.</p><p>For those who just wish to expand their Redex skills, the exercises below
 offer a range of possibilities: programming language extensions, hardware,
 games, and so on.</p><h4>16.1<tt>&nbsp;</tt><a name="(part._.Suggestions_for_.Small_.Practice_.Problems)"></a>Suggestions for Small Practice Problems</h4><blockquote class="SubFlow"><p><a name="(counter._(exercise._p1))"></a><span style="font-weight: bold">Exercise</span>&nbsp;18. Design a small model of untyped objects: a language,
scoping, an adapted substitution function, and a (standard or regular)
reduction system.</p><p><div class="SIntrapara">Start with the simplification of objects as multi-entry functions:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">y</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">object</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">this</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Sometimes we wish to treat <span class="RktSym">this</span> like a variable and at other
 times, we want to exclude it from this world. To support this two-faced
 treatment, the grammar includes the syntactic category of <span class="RktVar">y</span>,
 which consists of the set <span class="RktVar">x</span> of variables and <span class="RktSym">this</span>.</div></p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-obj.rkt">fri-mor-obj.rkt</a>.</p><p><div class="SIntrapara">This solution shows how numbers are interpreted as objects and messages to
these numbers might include symbols such as <span class="RktSym">+</span>. Consider extending
this solution with some of the following:
</div><div class="SIntrapara"><ul><li><p>recognize stuck states for expressions such as
<span class="RktPn">(</span><span class="RktSym">send</span><span class="stt"> </span><span class="RktVar">n</span><span class="stt"> </span><span class="RktSym">+</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">object</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span>,
<span class="RktPn">(</span><span class="RktSym">send</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">object</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">+</span><span class="stt"> </span><span class="RktVar">n</span><span class="RktPn">)</span>,
or
<span class="RktPn">(</span><span class="RktSym">send</span><span class="stt"> </span><span class="RktSym">o</span><span class="stt"> </span><span class="RktSym">m</span><span class="stt"> </span><span class="RktSym">v</span><span class="RktPn">)</span> where <span class="RktVar">o</span> does not have an entry point
labeled <span class="RktVar">m</span>.</p></li><li><p>a <span class="RktSym">clone</span> operation for objects</p></li><li><p>an <span class="RktSym">update</span> operation for objects that adds a new method</p></li><li><p>and the inclusion of fields.</p></li></ul></div><div class="SIntrapara">If you think of other extensions, go for them. <img src="pict_18.png" alt="image" width="3" height="10"/></div></p></blockquote><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(counter._(exercise._p2))"></a><span style="font-weight: bold">Exercise</span>&nbsp;19. Design a reduction system that models type checking by
reducing terms to their types. Formulate a metafunction that maps terms to
types or <span class="RktVal">#false</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-metafunction%29%29" class="RktStxLink" data-pltdoc="x">define-metafunction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">TLambda-tc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">tc</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">more here </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">.....</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">It produces <span class="RktVal">#false</span> when type checking fails.</div></p><p><div class="SIntrapara">You start with the normal term language:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">TLambda</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The reduction systems gradually reduces terms to types, like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-checking</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._reduction-relation%29%29" class="RktStxLink" data-pltdoc="x">reduction-relation</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._--~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">--&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._in-hole%29%29" class="RktStxLink" data-pltdoc="x">in-hole</a></span><span class="hspace">&nbsp;</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._in-hole%29%29" class="RktStxLink" data-pltdoc="x">in-hole</a></span><span class="hspace">&nbsp;</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._--~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">--&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._in-hole%29%29" class="RktStxLink" data-pltdoc="x">in-hole</a></span><span class="hspace">&nbsp;</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._in-hole%29%29" class="RktStxLink" data-pltdoc="x">in-hole</a></span><span class="hspace">&nbsp;</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">you need more here</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">.....</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><span style="font-weight: bold">Hint</span> The key is to design a language of contexts that extends the
given expression language so the reduction system can find all possible
terms.</p><p>Consider adding <span class="RktSym">if</span> and <span class="RktSym">let</span> expressions to the
language once you have the core model working.</p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-tc.rkt">fri-mor-tc.rkt</a>.  Also
consult chapter III.23 in the Redex book for ideas. <img src="pict_19.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(counter._(exercise._p3))"></a><span style="font-weight: bold">Exercise</span>&nbsp;20. Here is a old puzzle from the 1800s:
</div><div class="SIntrapara"><blockquote><p>&ldquo;Once upon a time, three cannibals were guiding
 three missionaries through a jungle. They were on their way to the nearest
 mission station. After some time, they arrived at a wide river, filled
 with deadly snakes and fish. There was no way to cross the river without a
 boat. Fortunately, they found a rowing boat with two oars after a short
 search. Unfortunately, the boat was too small to carry all of them. It
 could barely carry two people at a time.  Worse, because of the river&rsquo;s
 width someone had to row the boat back.</p><p>&ldquo;Since the missionaries could not trust the cannibals, they had to figure out
 a plan to get all six of them safely across the river. The problem was
 that these cannibals would kill and eat missionaries as soon as there were
 more cannibals than missionaries at some place. Thus our
 missionaries had to devise a plan that guaranteed that there were
 never any missionaries in the minority at either side of the river.  The
 cannibals, however, could be trusted to cooperate otherwise. Specifically,
 they wouldn&rsquo;t abandon any potential food, just as the missionaries
 wouldn&rsquo;t abandon any potential converts.&rdquo;</p></blockquote></div></p><p>Formulate a reduction system that solves this puzzle. Use <span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28def._%28%28lib._redex%2Fgui..rkt%29._traces%29%29" class="RktValLink" data-pltdoc="x">traces</a></span>
 to visualize the solution space. You want to impose a side condition on
 the rules so that no boat is sent back to the other side of the river when
 a configuration represents a solutions. The other side conditions just
 ensure that no missionary will be eaten.</p><p>Consider running <span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28def._%28%28lib._redex%2Fgui..rkt%29._traces%29%29" class="RktValLink" data-pltdoc="x">traces</a></span> with a subject-reduction test. The
 predicate you want to check is that the parties on both sides of the river
 are safe.</p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-mc.rkt">fri-mor-mc.rkt</a>. <img src="pict_20.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><a name="(counter._(exercise._p4))"></a><span style="font-weight: bold">Exercise</span>&nbsp;21. Implement a solver for
<a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi">Tower of Hanoi</a>
as a reduction relation, where a step by the reduction corresponds to a
move in the game. You can implement the solver as an exploration of all
possible game moves via the reduction relation, checking whether a solution
state is reachable.</p><p><span style="font-weight: bold">Hints</span> While you can implement the game using just
<span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span> and <span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._reduction-relation%29%29" class="RktStxLink" data-pltdoc="x">reduction-relation</a></span>, a metafunction
that checks whether a stack of ties will &ldquo;accept&rdquo; a given additional tile
makes the reduction easier to write. Among the possible choices for
representing a tile, a list of <span class="stt">&#8226;</span>s works well and looks nice.</p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-hanoi.rkt">fri-mor-hanoi.rkt</a>. <img src="pict_21.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(counter._(exercise._p5))"></a><span style="font-weight: bold">Exercise</span>&nbsp;22. Consider the language of stored binary trees:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">V</span><span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">&#931;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">&#963;</span><span class="hspace">&nbsp;</span><span class="RktSym">V</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">&#963;</span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Design the <span class="RktSym"><span class="nobreak">--&gt;</span>gc</span> reduction relation, which implements garbage
collection. The <span class="RktSym"><span class="nobreak">--&gt;</span>gc</span> reduction relation operates on a
configuration that combines the store <span class="RktSym">&#931;</span>, a set of &ldquo;gray&rdquo;
addresses, i.e., <span class="RktSym">&#963;</span>s) to be explored (the addresses of the
initially reachable objects, also called roots, plus a set of &ldquo;black&rdquo;
addresses (initially empty).  Each step operates on one gray address,
adjusting the gray and black sets based on the address&rsquo;s value in the
store. No more steps are possible when the set of gray addresses goes
empty, at which point every address not in the black list can be pruned
from the store.</div></p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-gc.rkt">fri-mor-gc.rkt</a>. Also
check chapter I.7 for a closely related variant. <img src="pict_22.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><a name="(counter._(exercise._p6))"></a><span style="font-weight: bold">Exercise</span>&nbsp;23. Implement a reduction relation that executes a given
finite-state machine with a given initial state on a given input
sequence. Your representation for finite-state machine should accommodate a
non-deterministic set of transition rules.</p><p><span style="font-weight: bold">Challenge</span> Implement a metafunction that converts a non-deterministic
machine to a deterministic one.</p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-fsm.rkt">fri-mor-fsm.rkt</a>. <img src="pict_23.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(counter._(exercise._p7))"></a><span style="font-weight: bold">Exercise</span>&nbsp;24. Add process forking and channel-based communication to a
call-by-value functional language. Here is the proposed grammar:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Lambda</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_!_</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if0</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fork</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">put</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="RktPn">(</span><span class="RktSym">spawn</span><span class="stt"> </span><span class="RktVar">e</span><span class="RktPn">)</span> expression creates a new thread from the given
 sub-expression, while <span class="RktSym">put</span> and <span class="RktSym">get</span> expressions allow
 these threads to communicate. Specifically, when one thread evaluates
 <span class="RktPn">(</span><span class="RktSym">put</span><span class="stt"> </span><span class="RktVar">c</span><span class="stt"> </span><span class="RktVar">v</span><span class="RktPn">)</span> and another evaluates <span class="RktPn">(</span><span class="RktSym">get</span><span class="stt"> </span><span class="RktVar">c</span><span class="RktPn">)</span> for the same
 <span class="RktVar">c</span>, the <span class="RktSym">get</span> thread receives value <span class="RktVar">v</span> while the
 <span class="RktSym">put</span> thread&rsquo;s expression evaluates to <span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span>.</div></p><p><span style="font-weight: bold">Hints</span> Instead of a single expression, your reductions must deal with
 a set of expressions, one per thread.  Reducing <span class="RktPn">(</span><span class="RktSym">spawn</span><span class="stt"> </span><span class="RktVar">e</span><span class="RktPn">)</span> in one
 of these expressions thus adds an <span class="RktVar">e</span> to that set; use
 <span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span> as the result of this action. When any one thread has
 <span class="RktPn">(</span><span class="RktSym">get</span><span class="stt"> </span><span class="RktVar">c</span><span class="RktPn">)</span> as its redex and another has <span class="RktPn">(</span><span class="RktSym">put</span><span class="stt"> </span><span class="RktVar">c</span><span class="stt"> </span><span class="RktVar">v</span><span class="RktPn">)</span>, the
 two redexes are simultaneously replaced with their contractions.</p><p>In Redex, sets are currently realized with sequences. The key difference is
 that sets are <span style="font-style: italic">unordered</span> and sequences are <span style="font-style: italic">ordered</span>. Keep this
 in mind when you formulate reduction relations for
 <span class="RktSym">put</span>-<span class="RktSym">get</span> communications.</p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-channels.rkt">fri-mor-channels.rkt</a>. <img src="pict_24.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(counter._(exercise._p8))"></a><span style="font-weight: bold">Exercise</span>&nbsp;25. Design a reduction semantics (standard or regular) for a
Lambda language with contracts. Here is the syntax:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Lambda</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if0</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym">&#9878;</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blame</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">num?</span><span class="hspace">&nbsp;</span><span class="RktSym">even?</span><span class="hspace">&nbsp;</span><span class="RktSym">odd?</span><span class="hspace">&nbsp;</span><span class="RktSym">pos?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">variable-not-otherwise-mentioned</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The contract primitives are interpreted as follows:
</div><div class="SIntrapara"><ul><li><p><span class="RktPn">(</span><span class="RktSym">num?</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span> checks whether <span class="RktSym">x</span> is a number, not a function</p></li><li><p><span class="RktPn">(</span><span class="RktSym">pos?</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span> checks whether <span class="RktSym">x</span> is a positive number</p></li><li><p><span class="RktPn">(</span><span class="RktSym">even?</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span> checks whether <span class="RktSym">x</span> is an even number</p></li><li><p><span class="RktPn">(</span><span class="RktSym">odd?</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span> checks whether <span class="RktSym">x</span> is an even number</p></li></ul></div><div class="SIntrapara">The contract form <span class="RktPn">(</span><span class="RktSym">c</span><span class="stt"> </span><span class="RktSym">&#9878;</span><span class="stt"> </span><span class="RktSym">e</span><span class="stt"> </span><span class="RktSym">x_s</span><span class="stt"> </span><span class="RktSym">x_c</span><span class="RktPn">)</span> checks contract <span class="RktVar">c</span> on
<span class="RktVar">e</span>. If <span class="RktVar">e</span> breaks the contract, the semantics signals a
<span class="RktPn">(</span><span class="RktSym">blame</span><span class="stt"> </span><span class="RktSym">x_s</span><span class="RktPn">)</span> error; other contract violations signal a
<span class="RktPn">(</span><span class="RktSym">blame</span><span class="stt"> </span><span class="RktSym">x_c</span><span class="RktPn">)</span> error.</div></p><p><div class="SIntrapara">Consider these three examples where the same contracted function works
well, is blamed, or blames its context depending on the argument:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">a-module</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktPn">(</span><span class="RktSym">even?</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">pos?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#9878;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">server</span><span class="hspace">&nbsp;</span><span class="RktSym">client</span><span class="RktPn">}</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">p-good</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktRdr">,</span><span class="RktSym">a-module</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bad-server</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktRdr">,</span><span class="RktSym">a-module</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bad-client</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktRdr">,</span><span class="RktSym">a-module</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Work through the examples by hand to find out why the three programs work
fine, blame the server, and blame the client for contract violations,
respectively.</div></p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-con.rkt">fri-mor-con.rkt</a>. <img src="pict_25.png" alt="image" width="3" height="10"/></p></blockquote><blockquote class="SubFlow"><p><a name="(counter._(exercise._p.A))"></a><span style="font-weight: bold">Exercise</span>&nbsp;26. Redex can also model hardware scenarios.</p><p><div class="SIntrapara">Here is a language of <span style="font-style: italic">bit</span> expressions:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._define-language%29%29" class="RktStxLink" data-pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._~3a~3a~3d%29%29" class="RktStxLink" data-pltdoc="x">::=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">natural</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Your task is to design a standard reduction system that mimics addition on
sequences of bits (binary digits).</div></p><p><span style="font-weight: bold">Hints</span> Raw values are sequences of booleans, not just one.  For
<span class="RktSym">or</span>, you can reduce sequences that have more than one element into
<span class="RktSym">append</span>s of <span class="RktSym">or</span>s that each have a single element, and then
actually handle <span class="RktSym">or</span>&rsquo;s logic for arrays that have just one
element. This also works for <span class="RktSym">and</span> and <span class="RktSym">not</span>. This idea
doesn&rsquo;t work for <span class="RktSym">add</span>.</p><p><div class="SIntrapara">Here are some test cases to get you started:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">module+</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test--~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">test--&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">For testing <span class="RktSym">add</span>, we suggest comparing it to Racket&rsquo;s <span class="RktSym">+</span>
operation using this helper function:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">v -&gt; n (in </span><span class="RktSym">L</span><span class="RktCmt">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">convert a sequence of bits to a natural number </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">module+</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._test-equal%29%29" class="RktStxLink" data-pltdoc="x">test-equal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/matthias/plt/racket/doc/redex/The_Redex_Reference.html#%28form._%28%28lib._redex%2Freduction-semantics..rkt%29._term%29%29" class="RktStxLink" data-pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-nat</span><span class="hspace">&nbsp;</span><span class="RktSym">bs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for/sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reverse</span><span class="hspace">&nbsp;</span><span class="RktSym">bs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-naturals</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expt</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><span style="font-weight: bold">Solution</span> See <a href="Code/fri-mor-bit-strings.rkt">fri-mor-bit-string.rkt</a>. <img src="pict_26.png" alt="image" width="3" height="10"/></p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lab-thu-aft.html" title="backward to &quot;15 Lab Abstracting Abstract Machines II&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Redex Summer School&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>