<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3&nbsp;Racket is a Programming-Language Programming Language</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="figure.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">The Racket Manifesto</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Racket__Historically_Speaking.html" class="tocviewlink" data-pltdoc="x">Racket, Historically Speaking</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="The_Principles_of_Racket.html" class="tocviewlink" data-pltdoc="x">The Principles of Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Racket is a Programming-<wbr></wbr>Language Programming Language</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="sec_full.html" class="tocviewlink" data-pltdoc="x">Racket Covers a Full Programming Language Spectrum</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="sec_intern.html" class="tocviewlink" data-pltdoc="x">Racket Internalizes Extra-<wbr></wbr>Linguistic Mechanisms</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="sec_feedback.html" class="tocviewlink" data-pltdoc="x">The Racket Design Feedback Loop</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="sec_future.html" class="tocviewlink" data-pltdoc="x">Racket, the Future:<span class="mywbr"> &nbsp;</span> From Imperfections
to Research Opportunities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="The_Principles_of_Racket.html" title="backward to &quot;2 The Principles of Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The Racket Manifesto&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sec_full.html" title="forward to &quot;4 Racket Covers a Full Programming Language Spectrum&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._sec~3apl-pl)"></a>Racket is a Programming-Language Programming Language</h3><p>Racket is a programming language. Actually, at first glance it looks like a
 family of conventional languages, including a small untyped,
 mostly-functional by-value language (<a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket/base</span></a>), a
 batteries-included extension (<a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket</span></a>), and a typed variant (<a href="http://docs.racket-lang.org/ts-reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">typed/racket</span></a>).</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">demo.rkt</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">type Video = [Listof Image]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Natural -&gt; Video </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">walk-simplex</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">IMPLEMENTATION</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"small.sim"</span><span class="hspace">&nbsp;</span><span class="RktSym">2htdp/image</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Natural -&gt; Video </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">walk-simplex</span><span class="hspace">&nbsp;</span><span class="RktSym">timing</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">maximizer</span><span class="hspace">&nbsp;</span><span class="RktPn">#:x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._racket))" x-target-lift="Figure"></a>Figure&nbsp;1: </span>A plain Racket module</span></p></blockquote><p>Like all programming languages, plain Racket forces the programmer to formulate
 solutions to problems in terms of its built-in programming constructs. But,
 Racket is also a member of the Lisp family, which has always insisted on
 stating solutions in the most appropriate language, one suited to the problem
 domain.  As Hudak&nbsp;(<a href="doc-bibliography.html#%28autobib._.Paul._.Hudak.Domain-specific._languages.In._.Handbook._of._.Programming._.Languages..._.Mac.Millan..._pp._39--601998%29" data-pltdoc="x">Hudak</a> <a href="doc-bibliography.html#%28autobib._.Paul._.Hudak.Domain-specific._languages.In._.Handbook._of._.Programming._.Languages..._.Mac.Millan..._pp._39--601998%29" data-pltdoc="x">1998</a>) puts it, &ldquo;domain-specific languages
 are the ultimate abstractions.&rdquo;</p><p>Following this reasoning, each program component is articulated in the Racket-based
 programming language that is best suited for the problem it
 solves.  If the language is not available, the Racket
 programmer creates it, possibly even for a single module. To support this kind
 of system building, Racket is a programming-language programming language.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">small.sim</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.racket-lang.org/scribble/reader-internals.html#%28mod-path._at-exp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">at-exp</span></a><span class="hspace">&nbsp;</span><span class="RktSym">simplex</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">provides: synthesized function </span><span class="RktSym">maximizer</span><span class="RktCmt">: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">#:x Real -&gt; Real </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">#:y Real -&gt; Real </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">#:variables</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span></td></tr><tr><td><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">20</span></td></tr></table></blockquote></blockquote></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._simplex))" x-target-lift="Figure"></a>Figure&nbsp;2: </span>A module for describing a simplex shape</span></p></blockquote><p><a href="#%28counter._%28figure._racket%29%29" data-pltdoc="x">Figure&nbsp;<span class="FigureRef">1</span></a> and <a href="#%28counter._%28figure._simplex%29%29" data-pltdoc="x">Figure&nbsp;<span class="FigureRef">2</span></a> illustrate the
 principle. <span class="refelem"><span class="refcolumn"><span class="refcontent">The figure specifies the filename. It
is not a part of the code. The astute reader will notice that this
violates the principle of keeping everything in the language.</span></span></span>  The first
 module in <a href="#%28counter._%28figure._racket%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">1</span></a> uses the <a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket</span></a> language, which
 is specified in the so-called <span class="stt">#lang</span>&#8212;<wbr></wbr>pronounced &ldquo;hash
 lang&rdquo;&#8212;<wbr></wbr>line.  The module provides a single function; the comments inside
 the <span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span> specification informally state a type definition and
 a function signature in terms of this type definition. To implement this
 function, the module uses <span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktVal">"small.sim"</span><span class="RktPn">)</span> to import
 functionality from the module in <a href="#%28counter._%28figure._simplex%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">2</span></a> and then defines its
 own functions.</p><p>The creator of the module in <a href="#%28counter._%28figure._simplex%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">2</span></a> prefers a domain-specific
 language, because the module&rsquo;s purpose is to synthesize a function for a
 simplex, and the most natural way to specify the latter is to state a
 collection of linear inequalities.  The comments below the <span class="stt">#lang</span> line in
 <a href="#%28counter._%28figure._simplex%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">2</span></a> state that the module exports a single function,
 <span class="RktSym">maximizer</span>. Concretely, the <span class="RktPn">#:variables</span> specification and the following
 inequalities determine the <span class="RktSym">maximizer</span> function. When called as
 <span class="RktPn">(</span><span class="RktSym">maximizer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span>, the function produces the maximal <span class="RktSym">y</span> value;
 conversely, <span class="RktPn">(</span><span class="RktSym">maximizer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktMeta"></span> delivers the maximal <span class="RktSym">x</span> value.</p><p>In support of this kind of language-oriented programming, Racket provides a
 syntax extension system that borrows elements from Scheme&rsquo;s macro
 system&nbsp;(<a href="doc-bibliography.html#%28autobib._.R..._.Kent._.Dybvig%2C._.Robert._.Hieb%2C._and._.Carl._.Bruggeman.Syntactic._abstraction._in._.Scheme.Lisp.S.C._5%284%29%2C._pp..._295--3261992%29" data-pltdoc="x">Dybvig et al.</a> <a href="doc-bibliography.html#%28autobib._.R..._.Kent._.Dybvig%2C._.Robert._.Hieb%2C._and._.Carl._.Bruggeman.Syntactic._abstraction._in._.Scheme.Lisp.S.C._5%284%29%2C._pp..._295--3261992%29" data-pltdoc="x">1992</a>; <a href="doc-bibliography.html#%28autobib._.Eugene._.Kohlbecker%2C._.Daniel._.P..._.Friedman%2C._.Matthias._.Felleisen%2C._and._.Bruce._.Duba.Hygienic._macro._expansion.In._.L.F.P1986%29" data-pltdoc="x">Kohlbecker et al.</a> <a href="doc-bibliography.html#%28autobib._.Eugene._.Kohlbecker%2C._.Daniel._.P..._.Friedman%2C._.Matthias._.Felleisen%2C._and._.Bruce._.Duba.Hygienic._macro._expansion.In._.L.F.P1986%29" data-pltdoc="x">1986</a>; <a href="doc-bibliography.html#%28autobib._.Eugene._.Kohlbecker._and._.Mitchell._.Wand.Macro-by-example~3a._deriving._syntactic._transformations._from._their._specifications.In._.P.O.P.L%2C._pp..._77--841987%29" data-pltdoc="x">Kohlbecker and Wand</a> <a href="doc-bibliography.html#%28autobib._.Eugene._.Kohlbecker._and._.Mitchell._.Wand.Macro-by-example~3a._deriving._syntactic._transformations._from._their._specifications.In._.P.O.P.L%2C._pp..._77--841987%29" data-pltdoc="x">1987</a>)
 but also improves on it in several
 different directions. First, the Racket syntax extension system is about
 defining languages&nbsp;(<a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt.Composable._and._compilable._macros~3a._you._want._it._when~3f.In._.I.C.F.P%2C._pp..._72--832002%29" data-pltdoc="x">Flatt</a> <a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt.Composable._and._compilable._macros~3a._you._want._it._when~3f.In._.I.C.F.P%2C._pp..._72--832002%29" data-pltdoc="x">2002</a>; <a href="doc-bibliography.html#%28autobib._.Shriram._.Krishnamurthi.Linguistic._.Reuse.Ph.D._dissertation%2C._.Rice._.University2001%29" data-pltdoc="x">Krishnamurthi</a> <a href="doc-bibliography.html#%28autobib._.Shriram._.Krishnamurthi.Linguistic._.Reuse.Ph.D._dissertation%2C._.Rice._.University2001%29" data-pltdoc="x">2001</a>; <a href="doc-bibliography.html#%28autobib._.Shriram._.Krishnamurthi%2C._.Matthias._.Felleisen%2C._and._.Bruce._.F..._.Duba.From._macros._to._reusable._generative._programming.In._.G.P.C.E%2C._pp..._105--1201999%29" data-pltdoc="x">Krishnamurthi et al.</a> <a href="doc-bibliography.html#%28autobib._.Shriram._.Krishnamurthi%2C._.Matthias._.Felleisen%2C._and._.Bruce._.F..._.Duba.From._macros._to._reusable._generative._programming.In._.G.P.C.E%2C._pp..._105--1201999%29" data-pltdoc="x">1999</a>),
 not just extending an existing
 language with new linguistic constructs. For example, Racket&rsquo;s class
 system&nbsp;(<a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt%2C._.Robert._.Bruce._.Findler%2C._and._.Matthias._.Felleisen.Scheme._with._classes%2C._mixins%2C._and._traits.In._.A.P.L.A.S%2C._pp..._270--2892006%29" data-pltdoc="x">Flatt et al.</a> <a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt%2C._.Robert._.Bruce._.Findler%2C._and._.Matthias._.Felleisen.Scheme._with._classes%2C._mixins%2C._and._traits.In._.A.P.L.A.S%2C._pp..._270--2892006%29" data-pltdoc="x">2006</a>),
 its first-class components&nbsp;(<a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt._and._.Matthias._.Felleisen.Units~3a._.Cool._modules._for._.H.O.T._languages.In._.I.C.F.P%2C._pp..._236--2481998%29" data-pltdoc="x">Flatt and Felleisen</a> <a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt._and._.Matthias._.Felleisen.Units~3a._.Cool._modules._for._.H.O.T._languages.In._.I.C.F.P%2C._pp..._236--2481998%29" data-pltdoc="x">1998</a>),
 and
 its language of (loop) comprehensions are just such sub-languages, though their
 constructs are indistinguishable from Racket&rsquo;s core features. Naturally, a
 Racket-based language is just a module whose exports make up a new
 language. These exports must include certain features and may otherwise come
 with any syntactic constructs and run-time values deemed necessary. The module may define these
 exports or may import and re-export them from an existing language. Hence, a
 language module can easily add features to, or subtract them from, an existing
 language.</p><p><div class="SIntrapara">Second, the syntax extension system also allows a language module to
 redefine the meaning of existing constructs. Take function application,
 for example. Like Lisp, a Racket function application is just
 a pair of parentheses around the function and its arguments:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">Racket&rsquo;s syntax system elaborates surface syntax to kernel syntax:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">The keyword <span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span> is Racket&rsquo;s internal sign post for the function
 application syntax&#8212;<wbr></wbr>and a language can re-define its meaning. Here is a
 simplistic re-definition:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._rename-out%29%29" class="RktStxLink" data-pltdoc="x">rename-out</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">call</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._define-syntax-rule%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-rule</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">rewrites to </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-in-defines</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="highlighted"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">signal-error</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">This module defines the syntactic abbreviation <span class="RktSym">call</span>. A use of
 <span class="RktSym">call</span> expands to an <span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span> expression that checks a property of <span class="RktSym">f</span>
 and, if it holds, uses the <span style="font-style: italic">imported</span> application syntax (high-light)
 to create a function application; otherwise it signals an error. On
 export, <span class="RktSym">call</span> is renamed to <span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span>, meaning when another
 module specifies this module as its language, the compiler uses the
 <span class="RktSym">call</span> syntax to elaborate the module&rsquo;s function applications, e.g.,
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> </span><span class="RktCmt">&ndash;</span><span class="RktCmt"> compiles to</span><span class="RktCmt">&ndash;</span><span class="RktCmt">&gt; </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">== equivalent</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">== </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">call</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> compiles to</span><span class="RktCmt">&ndash;</span><span class="RktCmt">&gt; </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-in-defines</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="highlighted"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">signal-error</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">That is, the final code uses plain <a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket</span></a>&rsquo;s <span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span> construct to
 evaluate the function application&#8212;<wbr></wbr>and that is regular call-by-value function application.</div></p><p>This example is inspired by the teaching languages&nbsp;(<a href="doc-bibliography.html#%28autobib._.Matthias._.Felleisen%2C._.Robert._.Bruce._.Findler%2C._.Matthew._.Flatt%2C._and._.Shriram._.Krishnamurthi.How._to._.Design._.Programs.M.I.T._.Press2001%29" data-pltdoc="x">Felleisen et al.</a> <a href="doc-bibliography.html#%28autobib._.Matthias._.Felleisen%2C._.Robert._.Bruce._.Findler%2C._.Matthew._.Flatt%2C._and._.Shriram._.Krishnamurthi.How._to._.Design._.Programs.M.I.T._.Press2001%29" data-pltdoc="x">2001</a>).
 In particular, the
 first-order functional teaching language uses it to
 check whether the function position is a name defined by the program or the
 language so that it can produce novice-friendly error messages when something
 else shows up. However, the pattern is used much more widely. For instance, the
 FrTime language uses this same mechanism to create a dataflow variant of
 call-by-value&nbsp;(<a href="doc-bibliography.html#%28autobib._.Gregory._.H..._.Cooper._and._.Shriram._.Krishnamurthi.Embedding._dynamic._dataflow._in._a._call-by-value._language.In._.E.S.O.P%2C._pp..._294--3082006%29" data-pltdoc="x">Cooper and Krishnamurthi</a> <a href="doc-bibliography.html#%28autobib._.Gregory._.H..._.Cooper._and._.Shriram._.Krishnamurthi.Embedding._dynamic._dataflow._in._a._call-by-value._language.In._.E.S.O.P%2C._pp..._294--3082006%29" data-pltdoc="x">2006</a>).</p><p>Third, Racket&rsquo;s syntax extension system grants a language-defining module
 access to the entire syntax tree for a guest module, not just individual
 nodes in the syntax tree. This access allows the collaboration between the
 rewriting rule for <span class="RktSym"><a href="http://docs.racket-lang.org/reference/application.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span> and <span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> in the above example. Indeed, this kind of
 communication smoothly generalizes to complex context-sensitive analysis
 tasks and, in particular, allows for the implementation of a rather
 conventional type checker&nbsp;(<a href="doc-bibliography.html#%28autobib._.Sam._.Tobin-.Hochstadt%2C._.Vincent._.St-.Amour%2C._.Ryan._.Culpepper%2C._.Matthew._.Flatt%2C._and._.Matthias._.Felleisen.Languages._as._libraries.In._.P.L.D.I%2C._pp..._132--1412011%29" data-pltdoc="x">Tobin-Hochstadt et al.</a> <a href="doc-bibliography.html#%28autobib._.Sam._.Tobin-.Hochstadt%2C._.Vincent._.St-.Amour%2C._.Ryan._.Culpepper%2C._.Matthew._.Flatt%2C._and._.Matthias._.Felleisen.Languages._as._libraries.In._.P.L.D.I%2C._pp..._132--1412011%29" data-pltdoc="x">2011</a>).</p><p>Fourth, Racket comes with a library that supports the programmatic creation of
 lexers and parsers&nbsp;(<a href="doc-bibliography.html#%28autobib._.Scott._.Owens%2C._.Matthew._.Flatt%2C._.Olin._.Shivers%2C._and._.Benjamin._.Mcmullan.Lexer._and._parser._generators._in._.Scheme.In._.S.F.P%2C._pp..._41--522004%29" data-pltdoc="x">Owens et al.</a> <a href="doc-bibliography.html#%28autobib._.Scott._.Owens%2C._.Matthew._.Flatt%2C._.Olin._.Shivers%2C._and._.Benjamin._.Mcmullan.Lexer._and._parser._generators._in._.Scheme.In._.S.F.P%2C._pp..._41--522004%29" data-pltdoc="x">2004</a>).
 It is thus possible for a language
 implementation to transform conventional syntax into regular S-expression syntax
 and to subject this result to the conventional syntax extension system and its
 rewriting rules. See <a href="#%28counter._%28figure._simplex%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">2</span></a> where the implementor of a
 domain-specific language prefers an ASCII-mathematics notation. Importantly,
 the separation of parsing from the syntax extension naturally creates an
 interface between unrelated parts of language design&#8212;<wbr></wbr>notation and
 meaning&#8212;<wbr></wbr>and thus enables language engineers to factor the work into two
 independent components: design of surface notation and meaning.</p><p>Finally, Racket insists on separating the various stages of language processing,
 particularly enforcing a strict separation of compile-time from run-time code.
 For example, the rewriting rules generate pure syntax and may not
 embed other language values inside this syntax. Similarly, since the world of
 Racket languages is actually an inverted pyramid of languages atop languages, each
 language-processing module may have side-effects&#8212;<wbr></wbr>and these side-effects must
 be insulated from the rest of the language-processing pipeline.</p><p>In sum, Racket&rsquo;s toolbox empowers programmers to create new languages
 quickly and thus enables language-oriented program design. The key to this
 achievement is to improve over Lisp and Scheme&rsquo;s approaches: Racket
 carefully stages syntax elaboration&nbsp;(<a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt.Composable._and._compilable._macros~3a._you._want._it._when~3f.In._.I.C.F.P%2C._pp..._72--832002%29" data-pltdoc="x">Flatt</a> <a href="doc-bibliography.html#%28autobib._.Matthew._.Flatt.Composable._and._compilable._macros~3a._you._want._it._when~3f.In._.I.C.F.P%2C._pp..._72--832002%29" data-pltdoc="x">2002</a>), eliminating Lisp&rsquo;s
 problematic <span class="stt">eval-when-where</span> approach; it enables the quick derivation
 of new languages from existing ones; and it enables the introduction of
 conventional syntax.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="The_Principles_of_Racket.html" title="backward to &quot;2 The Principles of Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The Racket Manifesto&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sec_full.html" title="forward to &quot;4 Racket Covers a Full Programming Language Spectrum&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>