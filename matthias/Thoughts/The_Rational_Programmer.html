<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html class="technical"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;The Rational Programmer</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="shared.css" title="default"/><link rel="stylesheet" type="text/css" href="thoughts.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="figure.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Thoughts</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="Science___Science.html" class="tocviewlink" data-pltdoc="x"><span class="personal">Science &amp; Science</span></a></td></tr><tr><td align="right"></td><td><a href="Modular_Programming.html" class="tocviewlink" data-pltdoc="x"><span class="technical">Modular Programming</span></a></td></tr><tr><td align="right">1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">The Rational Programmer</a></td></tr><tr><td align="right"></td><td><a href="The_Design_Recipe.html" class="tocviewlink" data-pltdoc="x"><span class="technical">The Design Recipe</span></a></td></tr><tr><td align="right"></td><td><a href="Apology.html" class="tocviewlink" data-pltdoc="x"><span class="personal">Apology</span></a></td></tr><tr><td align="right"></td><td><a href="All_As.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">All As</span></a></td></tr><tr><td align="right"></td><td><a href="Teaching_PL.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">Teaching PL</span></a></td></tr><tr><td align="right"></td><td><a href="NSF.html" class="tocviewlink" data-pltdoc="x"><span class="politics">NSF</span></a></td></tr><tr><td align="right"></td><td><a href="The_Laffer_Curve_of_Types.html" class="tocviewlink" data-pltdoc="x"><span class="technical">The Laffer Curve of Types</span></a></td></tr><tr><td align="right"></td><td><a href="Referential_Transparency.html" class="tocviewlink" data-pltdoc="x"><span class="technical">Referential Transparency</span></a></td></tr><tr><td align="right"></td><td><a href="Why_How_do_I_get_a_PhD.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">Why/<span class="mywbr"> &nbsp;</span>How do I get a Ph<span class="mywbr"> &nbsp;</span>D</span></a></td></tr><tr><td align="right"></td><td><a href="Free_Speech.html" class="tocviewlink" data-pltdoc="x"><span class="politics">Free Speech</span></a></td></tr><tr><td align="right"></td><td><a href="Developing_Developers.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">Developing Developers</span></a></td></tr><tr><td align="right"></td><td><a href="Growing_a_Programmer.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">Growing a Programmer</span></a></td></tr><tr><td align="right"></td><td><a href="Unions_for_PhD_Students_.html" class="tocviewlink" data-pltdoc="x"><span class="sci-pol">Unions for Ph<span class="mywbr"> &nbsp;</span>D Students?</span></a></td></tr><tr><td align="right"></td><td><a href="Racket_is____.html" class="tocviewlink" data-pltdoc="x"><span class="technical"><span class="emph">Racket</span> is ...</span></a></td></tr><tr><td align="right"></td><td><a href="why-pl2.html" class="tocviewlink" data-pltdoc="x"><span class="sci-pol">Why teach Ph<span class="mywbr"> &nbsp;</span>D core courses, with programming languages</span></a></td></tr><tr><td align="right"></td><td><a href="Danger__unsafe_languages.html" class="tocviewlink" data-pltdoc="x"><span class="technical">Danger:<span class="mywbr"> &nbsp;</span> unsafe languages</span></a></td></tr><tr><td align="right"></td><td><a href="What_should_the_core_achieve_.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">What should the core achieve?</span></a></td></tr><tr><td align="right"></td><td><a href="Python_for_Asset-Backed_Securities.html" class="tocviewlink" data-pltdoc="x"><span class="politics">Python for Asset-<wbr></wbr>Backed Securities</span></a></td></tr><tr><td align="right"></td><td><a href="Measuring_education.html" class="tocviewlink" data-pltdoc="x"><span class="curriculum">Measuring education</span></a></td></tr><tr><td align="right"></td><td><a href="Refereed_conferences__not_.html" class="tocviewlink" data-pltdoc="x"><span class="sci-pol">Refereed conferences, not!</span></a></td></tr><tr><td align="right"></td><td><a href="what-is-pl.html" class="tocviewlink" data-pltdoc="x"><span class="sci-pol">Why teach programming languages</span></a></td></tr><tr><td align="right"></td><td><a href="_.html" class="tocviewlink" data-pltdoc="x"><span class="special">.</span></a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">The Rational Programmer</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="#%28part._.Pragmatics%29" class="tocviewlink" data-pltdoc="x">Pragmatics</a></td></tr><tr><td align="right"></td><td><a href="#%28part._rps%29" class="tocviewlink" data-pltdoc="x">The Rational Programmer</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.Language_.Design__.Rationally%29" class="tocviewlink" data-pltdoc="x">Language Design, Rationally</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.Teaching_.Programming__.Rationally%29" class="tocviewlink" data-pltdoc="x">Teaching Programming, Rationally</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.Comparing_.Tooling__.Rationally%29" class="tocviewlink" data-pltdoc="x">Comparing Tooling, Rationally</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.Shortcomings%29" class="tocviewlink" data-pltdoc="x">Shortcomings</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Pragmatics%29" class="tocsubseclink" data-pltdoc="x">Pragmatics</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._rps%29" class="tocsubseclink" data-pltdoc="x">The Rational Programmer</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Language_.Design__.Rationally%29" class="tocsubseclink" data-pltdoc="x">Language Design, Rationally</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Teaching_.Programming__.Rationally%29" class="tocsubseclink" data-pltdoc="x">Teaching Programming, Rationally</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Comparing_.Tooling__.Rationally%29" class="tocsubseclink" data-pltdoc="x">Comparing Tooling, Rationally</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Shortcomings%29" class="tocsubseclink" data-pltdoc="x">Shortcomings</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.13.0.5</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Modular_Programming.html" title="backward to &quot;Modular Programming&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Thoughts&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="The_Design_Recipe.html" title="forward to &quot;The Design Recipe&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><h3 class="heading" class="technical">1<tt>&nbsp;</tt><a name="(part._.The_.Rational_.Programmer)"></a>The Rational Programmer<span class="button-group"><a href="#(part._.The_.Rational_.Programmer)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Christos Dimoulas &amp; Matthias Felleisen</p></span></div><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>31 Aug 2021</p></blockquote></blockquote></blockquote><blockquote class="SCentered"><p><span style="color: red">Draft</span></p></blockquote><h4 class="heading"><a name="(part._.Pragmatics)"></a>Pragmatics<span class="button-group"><a href="#(part._.Pragmatics)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Mainstream programming language research rests on many &ldquo;obvious&rdquo; claims about
programming that, upon closer inspection, turn out to be not all that relevant
to the &ldquo;developer on the street.&rdquo;</p><p>Correctness matters. We all know that every non-trivial software system comes
with bugs, and neither developers nor their employers care too much about bugs
that rarely if ever affect users. Indeed, software systems don&rsquo;t even have
proper specifications, so why should correctness matter.</p><p>But, you say, compiler correctness <span class="emph">must</span> matter. Does it? How many software
projects died because the underlying programming languages didn&rsquo;t come with
formally verified implementations?  Developers have worked around compiler bugs
for as long as compilers and programming have been around.</p><p>Performance matters. Would people really program in Python if performance
mattered that much? This is not to say that performance doesn&rsquo;t matter. It
matters as much as correctness. Get lots of &ldquo;it&rdquo; right, and developers will be
happy.</p><p>The performance argument is as old as compilers. And yet, developers have
steadily adopted languages at increasingly high levels of expressiveness and
deceasing levels of performance. After a long period of Fortran and C
programming, developers moved to C++ and then Java. Over the past 20 years,
JavaScript and Python have made tremendous gains in mindshare; now it&rsquo;s
TypeScript&rsquo;s turn and optional typing in general; even Python comes with
features that resemble types.</p><p>How much of this development is due to programming language research? Some,
there is no doubt. Considering the proportion of research effort that goes into
certain topics, however, it seems like very little of what programming language
research serves up matters, even given the long lag between invention and
industrial adoption.</p><p>So why do developers switch from one language to the next? Pragmatics.</p><p>When a linguist says &ldquo;pragmatics,&rdquo; it is a reference to a contextual use of
language. Developers understand this idea at an intuitive level. If the context
is the early 2000s and the web browser, a programmer can&rsquo;t use Fortran.  If a
developer wishes to communicate thoughts about code to other developers,
Assembly won&rsquo;t do. If a biologist-programmer needs a script for analyzing some
experiment&rsquo;s data, he won&rsquo;t reach for JavaScript.  Platforms and libraries, the
tool chain and clarity of expression matter most in the real world of software
development.</p><p>Developers want to balance development speed with delivery quality. The former
covers both the creation of software and altering existing software, often just
called &ldquo;maintenance.&rdquo; Delivery quality comprises many factors: reasonably
correct functionality, sufficient speed, affordable cost, and benefits from
being &ldquo;first.&rdquo;</p><p><div class="SIntrapara">And that brings us to a question that programming language research has avoided
for several decades:
</div><div class="SIntrapara"><blockquote><p><span class="emph">how can we study the pragmatics of programming languages?</span></p></blockquote></div><div class="SIntrapara">As Jim Morris noted a long time ago (1967) in his dissertation, language
researchers must understand the syntax, semantics, and pragmatics of their
objects of study.  Sadly, he himself identified the behavior of an executing
machine as the pragmatics&#8212;<wbr></wbr>a <span class="emph">notional machine</span> so to speak&#8212;<wbr></wbr>of a
language. But we all know that this is just a different form of semantics and
therefore doesn&rsquo;t seem to qualify as a true exploration of pragmatics.  And ever
since, most language researchers have essentially been happy to identify
semantics and pragmatics, to the detriment of language users in the world of
software.</div></p><h4 class="heading"><a name="(part._rps)"></a>The Rational Programmer<span class="button-group"><a href="#(part._rps)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>The research question is similar to the one economists faced when they began to
think about the effectiveness of policies&#8212;<wbr></wbr>the pragmatics of government. In
this context, pragmatics is to be understood as the way government interacts
with, and speaks to, citizens, including the implicatures of these conversations.
From the early days, economists figured they had to understand people&rsquo;s economic
behavior, first at the level of individuals and then at an aggregate level.</p><p>A century back and some, John Stuart Mills proposed to make up a &ldquo;model human
being,&rdquo; <span class="emph">homo economicus</span>.<span class="refelem"><span class="refcolumn"><span class="refcontent">Although <span class="emph">Homo economicus</span> is
the foundation of classic economics, models resting on it can explain only some
economic phenomena and miss many others. <span class="emph">Behavioral economics</span>&#8212;<wbr></wbr>due to
Kahnemann and Thaler&#8212;<wbr></wbr>starts from the alternative assumption, namely, that
economics must study the non-rational decision-making process. This approachj is
complementary to classic economics and is able to explain economic phenomena that
escape the classicists. See below.</span></span></span> He postulated that this economic being acted
rationally, using all available information to make beneficial decisions in the
realm of economics. Much later, economists identified benefit with maximal profit
or minimal cost. To this day, homo economicus is a major assumption of all
(neo)classical models of economics, and the assumption has furthered the
development of the discipline.</p><p>In translation, programming languages needs investigative tools beyond
mathematical modeling and performance evaluation. Here we propose the foundation
of such a tool: <span class="emph">the rational programmer</span>. Like <span style="font-style: italic">homo economicus</span>,
the rational programmer is an idealization&#8212;<wbr></wbr>a programmer who exploits all
available information about a program and its execution to make progress on some
task. The next section illustrates how we can use the rational programmer to
compare a modern language design&#8212;<wbr></wbr>gradual typing&#8212;<wbr></wbr>in the context of a
particular task.</p><p>At a high level, the rational programmer is  a computable process that
attempts to complete a programming task. It does so by transforming a
program either step-by-step or in one go. Specifically, given a utility
function <span style="font-style: italic">U</span>, the goal of a
rational programmer <span style="font-style: italic">RT</span> is to turn a program <span style="font-style: italic">p</span>
that, according to <span style="font-style: italic">U</span>, has utility below a threshold <span style="font-style: italic">TH</span>
to a program <span style="font-style: italic">p&rsquo;</span> that has utility above <span style="font-style: italic">TH</span>.
Both the utility function <span style="font-style: italic">U</span> and the rational programmer
<span style="font-style: italic">RT</span> depend on a feature extraction function <span style="font-style: italic">F</span>. Such a
function plays the role of abstracting the information related to the
program (and its evaluation) that is available to the <span style="font-style: italic">RT</span> as it
attemptes to complete its task. Putting these
pieces together a rational programmer <span style="font-style: italic">RT</span> can be described as a
function <span style="font-style: italic">RT[U,TH, F](p)</span> where <span style="font-style: italic">U[F](p) &lt; TH</span> and
<span style="font-style: italic">U[F](RT[U,TH, F](p)) &gt; TH</span>.</p><h4 class="heading"><a name="(part._.Language_.Design__.Rationally)"></a>Language Design, Rationally<span class="button-group"><a href="#(part._.Language_.Design__.Rationally)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>The design of a language (feature) consists of two pieces: syntax and semantics.
Hence, if the same syntax comes with two different semantics, a developer may
wonder in which manner each semantics supports the various aspects of software
development, which is &ldquo;use in context&rdquo; and thus <span class="emph">pragmatics</span>.</p><p>While a programmer edits code, the <span class="emph">static</span> semantics&#8212;<wbr></wbr>variable declared,
types specified and checked&#8212;<wbr></wbr>plays the dominant role. If a piece of syntax
comes with two different static semantics, an exploration of the editing
practicalities is of interest.</p><p>While a programmer debugs code, the dynamic semantics&#8212;<wbr></wbr>observable behavior&#8212;<wbr></wbr>is
key. If the syntax comes with two dynamic semantics, the ways the language is
used will differ with respect to several development activities: testing,
finding the logical source of runtime exceptions, performance measurements,
etc.<span class="refelem"><span class="refcolumn"><span class="refcontent">We consider gradually typed languages with manifest types as
ill-suited for gradually migrating an untyped code base to the typed world or
even just optionally annotating code with types.</span></span></span></p><p><div class="SIntrapara">Let&rsquo;s make this idea concrete. Research and development of gradually typed
languages has produced three major different forms of semantics for systems with
first-class objects and convenient ways to connect typed and untyped code
fragments:
</div><div class="SIntrapara"><ul><li><p>no runtime checking of types</p><p>This semantic approach emphasizes the editing benefits of types. As a developer
edits code, an IDE can use type information with many tasks, especially name
completion and checking for typo-level mistakes.</p></li><li><p>wrapper-based runtime checking of types</p><p>While this approach comes with all the benefits of the first one, it also aims
to provide the runtime benefits of types. Specifically, a <span class="emph">sound</span> type
system prevents runtime conflicts between operations and data. In a context
where typed and untyped code fragments co-exist with boundaries between them
drawn in arbitrary ways, all kinds of values flow back and forth between those.
The question becomes how to realize type soundness.</p><p>Static checking is no longer enough, because an untyped piece of code can call a
method on an object that originates from a typed piece of code and who knows
whether this method exists or whether the arguments conform to the specified
types. Hence, the original academic designs of gradual typing come with a
semantics that wraps objects as they flow from typed to untyped code and vice
versa. These wrappers can then perform runtime checks that correspond to static
type checks.</p></li><li><p>first-order runtime checking of types</p><p>Wrapping objects is obviously expensive in terms of both time and space. The
question is whether the tests inside of wrappers can somehow be distributed over
the code and thus avoid the cost of wrapping. The so-called <span class="emph">transient
semantics</span> of gradual type systems accomplishes just that and seems to offer
similar guarantees.</p></li></ul></div></p><p>When typed and untyped code are in conflict&#8212;<wbr></wbr>say, untyped code calls an
integer-typed method with a string&#8212;<wbr></wbr>these semantics exhibit different
behavior. The first one relies on the checks in the underlying untyped language
implementation to eventually expose this mismatch; it may or may not do so. In
the second one, the string enters the wrapper, which checks its integerness and
then signals a type mismatch. Finally, the transparent semantics has an
intergeness check at the entry point of the method, which also catches the
problem. If the argument is an object itself, however, the two semantics exhibit
dramatically different behavior.</p><p>More generally, the two semantics with runtime checks discover problems at
different times and report different information about the failure. The wrapper
semantics can pinpoint the exact place where typed and untyped code &ldquo;agreed&rdquo;
to exchange an object under certain expectations with respect to the failed type
tests. The first-order checks do not support such precise reporting of
information.</p><p><div class="SIntrapara">Even at this point, it is completely clear that pragmatics is <span class="emph">not</span> (just)
semantics. A &ldquo;student&rdquo; of programming language pragmatics would now ask the
question
</div><div class="SIntrapara"><blockquote><p><span class="emph">how a semantics serves the developer in the context of debugging a type mismatch.</span></p></blockquote></div><div class="SIntrapara">Specifically, he might wish to figure out which semantics is most helpful in
finding the source of the runtime exceptions that indicate a conflict between
typed and untyped code. And that is pragmatics.</div></p><p><div class="SIntrapara">A rational-programmer investigation can answer this question (to some extent).
Here is how. Imagine running a gradually typed code base with a known type
mismatch, that is, an untyped piece of code treating a value from the type side
in an inappropriate manner. Thus the above question is specialized to this:
</div><div class="SIntrapara"><blockquote><p>Which of the semantics helps discover the problem and track down its source?</p></blockquote></div><div class="SIntrapara">The &ldquo;rationality&rdquo; of the postulated programmer turns this re-statement into
two truly operational questions:
</div><div class="SIntrapara"><ol><li><p>What information can or should the rational programmer act on?</p></li><li><p>How can this information be used to find the source of the problem?</p></li></ol></div></p><p><div class="SIntrapara">Let&rsquo;s take a look at the three distinct semantics from the &ldquo;information&rdquo; angle:
</div><div class="SIntrapara"><ul><li><p>The no-runtime-checking semantics defers to the underlying untyped
programming language to catch type mismatches. In the simple scenario from above
an integer-typed method may stash away the given string in some array and some
other method may try to use it later as an <span class="stt">int</span>. It is at that point that
the underlying machinery signals an error and points the developer to the
runtime stack.</p><p>In short, the rational programmer must use the runtime stack information to find
the actual source of the problem as opposed to its symptom. The astute reader
might be wondering now whether the runtime stack is useful in our example or in
general.</p></li><li><p>The semantics using wrapper-based runtime checks realizes a rather
different behavior. For plain types, such as <span class="stt">int</span>, it checks the argument
value as soon as it crosses from untyped code to typed code. So in the example
from the previous bullet, the presence of a string is discovered immediately not
when some other method retrieves the string from some container.</p><p>A starker illustration requires a modified example. Imagine a method <span class="stt">md</span>
that accepts an object and eventually calls some method on this object. Several
things can go wrong now when an untyped code fragment calls <span class="stt">md</span>. The
supplied object may not have the desired callback method. Even if the method
exists, it may take a different number of arguments than expected. It may take
the correct number of arguments but expect a different type of argument. The
reader can easily imagine other variants of such mismatches.</p><p>While the no-runtime-checks semantics can get lost in arbitrary ways for such a
higher-order scenarios, the wrapper-based one can catch any form of mistake
here. Indeed, wrappers can also enclose information about where the object
crossed from one side of the code base to the other, and failing checks can
display this information in the error message. The question is whether this
information is helpful.</p></li><li><p>The semantics using first-order checks is directly comparable to the
wrapper semantics for simple cases. Checks catch <span class="stt">int</span>-<span class="stt">String</span> mismatches
immediately. For object-based mismatches, however, the semantics may discover a
problem eventually and, for some classes of mismatches, it never does. Even if
it does, there is much less information available about the source of the
problem. There simply is no place to store comparable information about an
object as it flows through the program.</p></li></ul></div><div class="SIntrapara">At least at first glance, the three semantics seem to have a rather different
impact on how developers debug type-mismatches they migrate a code base from the
untyped world to the typed one. They catch these problems at the different
execution stages&#8212;<wbr></wbr>if they discover them at all&#8212;<wbr></wbr>and provide different kinds of
information about where the type mismatch comes from.</div></p><p>This brings us to the second question, namely, whether and how the developer can
exploit this error information during debugging sessions. Since the errors are
about type mismatches between typed pieces of code and untyped pieces, the most
systematic way to <span class="emph">eliminate</span> them is to add more type annotations and to
let the type checker discover where the developer makes faulty assumptions about
the addition of types to a piece of code. The error message of each
semantics&#8212;<wbr></wbr>if any&#8212;<wbr></wbr>comes with some information about where the mismatch was
discovered and how it relates to the code base. More technically, it tends to
identify a boundary between typed and untyped code that causes a mismatch. By
typing the untyped side of this boundary, the developer ought to be able to
discover the faulty assumption or at least get closer to its source.</p><p>Based on this analysis, we can see that these two questions are algorithmic in
nature. That is, we can implement a rational programmer and run it on thousands
and tens of thousands scenarios to find out whether the semantics differ
effectively during debugging sessions. In other words, we can find answers to
the original pragmatics question in an <span class="emph">automated</span> manner.</p><p><div class="SIntrapara">To go into details here would distract from the main goal of the essay. The
interested reader should check out <a href="https://felleisen.org/matthias/papers.html#icfp21-lgfd.pdf">Lazarek et al.&rsquo;s ICFP article</a>
on this precise idea. The basic insight a reader should take away from this
section is this:
</div><div class="SIntrapara"><blockquote><p><span class="emph">by assuming rationality in a programmer&#8212;<wbr></wbr>using all
available information during development activities&#8212;<wbr></wbr>it may become possible to
computationally simulate activities and to inspect a large number of scenarios
automatically.</span></p></blockquote></div><div class="SIntrapara">Doing so suggests what a well-trained programmer may do and may shed light on
how different semantics compare from a pragmatic angle.</div></p><h4 class="heading"><a name="(part._.Teaching_.Programming__.Rationally)"></a>Teaching Programming, Rationally<span class="button-group"><a href="#(part._.Teaching_.Programming__.Rationally)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Programming languages exist so that people can create useful software systems.
Hence, programming language research should inform programming, at both the
level of experienced programmers as well as novices. That is, insights into
programming language design should provide instructors of programming courses
with insights on how to teach the subject.</p><p><div class="SIntrapara">This analysis raises two questions:
<span class="refelem"><span class="refcolumn"><span class="refcontent">Given the recent popularity of synthesis in the programming
languages field, we could specialize the first question and ask it slightly
differently. We leave this task and reflecting about this question to our
readers.</span></span></span>
</div><div class="SIntrapara"><ul><li><p>what does mathematical modeling of programming languages and associated
tools tell instructors of programming courses about their work?</p></li><li><p>what does the construction of compilers and optimizers tell instructors of
programming courses about their work?</p></li></ul></div><div class="SIntrapara">While the field provides some partial answers to these questions, they are
unsatisfactory to people who have taught introductory programming for
decades. The rational-programmer concept, however, seems to immediately provide
ideas.</div></p><p><div class="SIntrapara">Let us look at debugging again, this time in the context of an introductory
course. Debugging should be a rational activity, and it is definitely a task
that programming instructors must teach.  To make it all concrete, consider a
simple example, taken from <a href="htdp.org">How to Design Programs (HtDP)</a>. One
of the book&rsquo;s early examples of &ldquo;design by composition&rdquo; is the
<span class="RktSym">add-polygon-to</span> function, which solves the following problem:
</div><div class="SIntrapara"><blockquote><p><div class="SIntrapara">Design a function that consumes a (representation of a) polygon together with an
image and adds the former to the latter. Here is the data definition for
<a href="#%28tech._polygon%29" class="techoutside" data-pltdoc="x"><span class="techinside">Polygon</span></a>s:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._polygon)"></a><span style="font-style: italic">Polygon</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="stt"> </span><span style="color: #07A">Posn</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">[</span><span class="RktVal">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="stt"> </span><span style="color: #07A">Posn</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">tech</span><span class="stt"> </span><span class="RktVal">"Polygon"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">INTERPRETATION The </span><span style="color: #07A">Posn</span><span class="RktCmt">s represent the corners of the </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">polygon, in order.</span></td></tr></table></blockquote></div></p></blockquote></div></p><p><div class="SIntrapara">Following the design recipe for function design, the first pieces needed are
data examples. The first one is a list of <span style="color: #07A">Posn</span>s:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">Three <span style="color: #07A">Posn</span>s means the list represents a triangle. The second is a background image:
</div><div class="SIntrapara"><blockquote><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_7.png" alt="image" width="106" height="106"/></p></blockquote></div></p><p><div class="SIntrapara">Just combining these two data examples yields a functional example:
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>Adding <span class="RktSym">SP</span> from <a href="#%28counter._%28figure._fig~3aprog%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">13</span></a> to <img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_8.png" alt="image" width="106" height="106"/> should yield <img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_9.png" alt="image" width="106" height="106"/></p></blockquote></div><div class="SIntrapara">because, thinking in terms of the yellow square, <span style="font-style: italic"></span>(<span style="font-style: italic"></span>1<span style="font-style: italic"></span>0<span style="font-style: italic">,</span>1<span style="font-style: italic"></span>0<span style="font-style: italic"></span>)<span style="font-style: italic"></span> is the
<span style="color: #07A">Posn</span> near the top-left, <span style="font-style: italic"></span>(<span style="font-style: italic"></span>9<span style="font-style: italic"></span>0<span style="font-style: italic">,</span>9<span style="font-style: italic"></span>0<span style="font-style: italic"></span>)<span style="font-style: italic"></span> is near the bottom right, and
<span style="font-style: italic"></span>(<span style="font-style: italic"></span>9<span style="font-style: italic"></span>0<span style="font-style: italic">,</span>1<span style="font-style: italic"></span>0<span style="font-style: italic"></span>)<span style="font-style: italic"></span> is the <span style="color: #07A">Posn</span> close to the top right.</div></p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">LANGUAGE: htdp/isl</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">2htdp/image</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">yellow</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">SP</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">{Polygon Image -&gt; Image}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-polygon-to</span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">closed-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">background+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-path</span><span class="hspace">&nbsp;</span><span class="RktSym">closed-path</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">background+</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._closedpath)"></a><span style="font-style: italic">ClosedPath</span><span class="RktCmt"> is a </span><a href="#%28tech._polygon%29" class="techoutside" data-pltdoc="x"><span class="techinside">Polygon</span></a><span class="RktCmt"> where the first and last </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="color: #07A">Posn</span><span class="RktCmt"> are identical. </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">{ClosedPath Image -&gt; Image}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-path</span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">others</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">link++</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._second%29%29" class="RktValLink" data-pltdoc="x">second</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">link++</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[Posn Posn Image -&gt; Image]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktSym">fm</span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="hspace">&nbsp;</span><span class="RktSym">bg</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">{X [Listof X] -&gt; [NEListof X]}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">lox</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lox</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lox</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lox</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aprog))" x-target-lift="Figure"></a>Figure&nbsp;13: </span>Adding a polygon to an image</span></p></blockquote><p>The point of the problem in HtDP is to introduce <span class="emph">design by composition</span>,
that is, the design of a function that performs its computation by calling other
functions&#8212;<wbr></wbr>built-in operations or user-designed ones&#8212;<wbr></wbr>and compose their
results into the final answer.  In this context, &ldquo;composing&rdquo; isn&rsquo;t just the
usual mathematical notion of function composition, but it means any way of using
several designed functions.</p><p><div class="SIntrapara"><a href="#%28counter._%28figure._fig~3aprog%29%29" data-pltdoc="x">Figure&nbsp;<span class="FigureRef">13</span></a> displays the solution; the actual includes this dependency
diagram, too:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">dependencies: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> add-polygon-to</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span><span class="RktCmt">&#8212;<wbr></wbr></span><span class="RktCmt">-&gt; add-at-end</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span><span class="RktCmt">&#8212;<wbr></wbr></span><span class="RktCmt">-&gt; add-path * bug here </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">|</span><span class="RktCmt">&#8212;<wbr></wbr></span><span class="RktCmt">-&gt; link </span></td></tr></table></blockquote></div><div class="SIntrapara">It<span class="refelem"><span class="refcolumn"><span class="refcontent">Here the word &ldquo;design&rdquo; is used in the spirit of HtDP.</span></span></span> shows how the top-level function depends on three user-designed helper
functions. The critical hint is to add the first <span style="color: #07A">Posn</span> of the
<a href="#%28tech._polygon%29" class="techoutside" data-pltdoc="x"><span class="techinside">Polygon</span></a> to its end, turning it into a (closed) <a href="#%28tech._closedpath%29" class="techoutside" data-pltdoc="x"><span class="techinside">ClosedPath</span></a> and to
render this <a href="#%28tech._closedpath%29" class="techoutside" data-pltdoc="x"><span class="techinside">ClosedPath</span></a> into the given image.</div></p><p>HtDP also demands unit tests for each user-designed function. For function design by
composition, the book recommends testing the functions &ldquo;bottom up,&rdquo; meaning
the one without dependencies gets tested first, then those that depend on the
just tested functions, and so on. <a href="#%28counter._%28figure._fig~3atests%29%29" data-pltdoc="x">Figure&nbsp;<span class="FigureRef">14</span></a> displays the first few
tests, all of which succeed.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">[</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">[</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3atests))" x-target-lift="Figure"></a>Figure&nbsp;14: </span>Testing a program, bottom up</span></p></blockquote><p><div class="SIntrapara">The final and critical test, though, the one for
<span class="RktSym">add-polygon-to</span> fails:<span class="refelem"><span class="refcolumn"><span class="refcontent">DrRacket&rsquo;s shows
expression coverage and that alone clarifies
immediately where the error is. We ignore this aspect here but a
rational, information-maximizing programmer would not.</span></span></span>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-polygon-to</span><span class="hspace">&nbsp;</span><span class="RktSym">SP</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A failing test case tells us that something&rsquo;s wrong with the collection of
function, and the challenge is to find the bug.</div></p><blockquote><p><span class="emph">What is a rational programmer to do?</span></p></blockquote><p>In this case, maximizing information refers two different ideas: (1) the failing
test case and (2) the design of the function itself. The first one is given. The
second one is &ldquo;by composition,&rdquo; meaning the buggy function calls other
functions, each designed systematically. Rationality suggests that the bug is either
a part of the function under investigation or one of the functions it
calls. Furthermore, rationality tells us that the composition is at fault only
if the called functions work properly for the given inputs.</p><p>The rational approach is to derive test cases for the called functions from the
failing test case of the calling function. <span class="emph">Derive</span> means to construct the
inputs of the new test case from the inputs of the failing test using the shape
of the embedded function call; the rational programmer must also calculate the
expected output for these inputs. Once these derived test cases exist, the
rational programmer re-runs the test suite to see whether the derived tests work
properly.</p><p><div class="SIntrapara">By looking at the two composed calls, our rational programmer can create two
test cases from the failing one: the first one for the call <span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="stt"> </span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">lop</span><span class="RktPn">)</span> and the second one for the call <span class="RktPn">(</span><span class="RktSym">add-path</span><span class="stt"> </span><span class="RktSym">closed-path</span><span class="stt"> </span><span class="RktSym">background</span><span class="RktPn">)</span>. The construction of the first derived test is straightforward; the
second one takes a bit of symbolic manipulation of the program.<span class="refelem"><span class="refcolumn"><span class="refcontent">A
human programmer would take a short cut here.</span></span></span> Here are the results of these
derivations:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">SP</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">closed-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-at-end</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">SP</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-path</span><span class="hspace">&nbsp;</span><span class="RktSym">closed-path</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The first test checks whether <span class="RktSym">add-at-end</span> works correctly for the given
polygon.  It succeeds.  The second test checks whether drawing the closed path
into the given background image yields the desired triangle. It doesn&rsquo;t, that
is, this second test fails.</div></p><p>Our rational programmer now understands that <span class="RktSym">add-path</span> is buggy too. He
hasn&rsquo;t ruled out yet that there are two errors: one in <span class="RktSym">add-poylgon-to</span>
and one in <span class="RktSym">add-path</span>. But he knows that there&rsquo;s one in the second
function or its dependencies.</p><blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BG+1link</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">BG+1link</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BG+2links</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG+1link</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">BG+2links</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BG+tri</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">link</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG+2links</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">BG+tri</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aderived))" x-target-lift="Figure"></a>Figure&nbsp;15: </span>Derived tests for <span class="RktSym">link</span></span></p></blockquote><p>The <span class="RktSym">add-path</span> function depends on one user-designed function:
<span class="RktSym">link</span>. To rule out a bug in this dependency, the rational programmer
once again derives tests for the dependency (<span class="RktSym">link</span>) from the buggy test
for <span class="RktSym">add-path</span>: see <a href="#%28counter._%28figure._fig~3aderived%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">15</span></a>. The tests add one side of
the triangle, two, and all three, respectively. All of them pass.</p><p>At this point, the rational programmer knows that <span class="RktSym">add-path</span> is
guaranteed to have a bug. In other words, the composition of <span class="RktSym">add-path</span>
(recursively) and <span class="RktSym">link</span> does not work properly. Looking closely, the
programmer discovers that <span class="RktSym">link</span> should be called on <span class="RktSym">others</span> not
<span class="RktSym">background</span>&#8212;<wbr></wbr>a common mistake. Once this problem is eliminated, all
tests pass, including the one for <span class="RktSym">add-polygon-to</span>.<span class="refelem"><span class="refcolumn"><span class="refcontent">We
consider systematic design also a consequence of the rational-programmer
assumption, but illustrating this idea is not straightforward.</span></span></span></p><p><div class="SIntrapara">In sum, this second example suggests that
</div><div class="SIntrapara"><blockquote><p><span class="emph">assuming rationality in a programmer&#8212;<wbr></wbr>using all
available information during development activities&#8212;<wbr></wbr>can inform the pedagogy of
programming. Specifically, systematic design (a la HtDP) naturally yields systematic debugging.</span></p></blockquote></div><div class="SIntrapara">Note how this statement does <span class="emph">not</span> claim that novice programmers are
rational. Instead it says that the rational-programmer assumptions informs
instructors of novices how to teach debugging (and perhaps bring the thinking
skills of novices in line with some rationality).</div></p><p><span style="font-weight: bold">Postscript</span> A &ldquo;real&rdquo; programmer would not waste bits on writing three helper
functions when all of this functionality can be implemented with a function that uses a
single &ldquo;loop&rdquo; (or comprehension). <a href="#%28counter._%28figure._fig~3aloop%29%29" data-pltdoc="x">Figure&nbsp;<span class="FigureRef">16</span></a> displays this variant of
<span class="RktSym">add-polygon-to</span>. The variant includes a bug that is analogous to the one above.</p><p>How should this &ldquo;real&rdquo; programmer tackle the bug search in this context?</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">{[Listof Posn] Image -&gt; Image}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-polygon-to</span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lop</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/reference/define.html#%28form._%28%28quote._~23~25kernel%29._define-values%29%29" class="RktStxLink" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">background+</span><span class="hspace">&nbsp;</span><span class="RktSym">_</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/reference/for.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._for%2Ffold%29%29" class="RktStxLink" data-pltdoc="x">for/fold</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">img</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">from</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">to</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x.from</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktSym">from</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y.from</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktSym">from</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x.to</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y.to</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">img++</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._add-line%29%29" class="RktValLink" data-pltdoc="x">add-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="hspace">&nbsp;</span><span class="RktSym">x.from</span><span class="hspace">&nbsp;</span><span class="RktSym">y.from</span><span class="hspace">&nbsp;</span><span class="RktSym">x.to</span><span class="hspace">&nbsp;</span><span class="RktSym">y.to</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-racket.org/reference/values.html#%28def._%28%28quote._~23~25kernel%29._values%29%29" class="RktValLink" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym">img++</span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">background+</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aloop))" x-target-lift="Figure"></a>Figure&nbsp;16: </span>The &ldquo;concise&rdquo; or &ldquo;real&rdquo; version of <span class="RktSym">add-poly-to</span></span></p></blockquote><p>No, this function isn&rsquo;t very large. Indeed, to allude to the possibility of a large
function, we named all coordinates explicitly instead of using nested expressions. But
every instructor knows that the standard curriculum introduces loops first, functions
second. Worse, it continues to spread the nonsense that function calls are
expensive<span class="refelem"><span class="refcolumn"><span class="refcontent">So why are these people using Python then?</span></span></span>, pushing student
towards writing large, unmanageable functions&#8212;<wbr></wbr>which cannot be debugged rationally.</p><h4 class="heading"><a name="(part._.Comparing_.Tooling__.Rationally)"></a>Comparing Tooling, Rationally<span class="button-group"><a href="#(part._.Comparing_.Tooling__.Rationally)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Software Developers no longer distinguish between a programming language itself
and the tool chain it comes with. Of course a language comes with a
compiler.<span class="refelem"><span class="refcolumn"><span class="refcontent">Some have only an interpreter. We ignore those here.</span></span></span>
But, a language <span class="emph">must</span> also come with support for a developer&rsquo;s favorite
IDE. It <span class="emph">must</span> have a debugger. It <span class="emph">must</span> supply a profiler. Indeed,
to an individual developer there is often <span class="emph">the</span> IDE, <span class="emph">the</span> debugger,
<span class="emph">the</span> profiler, and so on.</p><p>In the meantime, language researchers work on enhancing compilers, lifting the
level of debugging, and experimenting with alternative ways of profiling
code. For compilers, researchers can often show that for some collection of
well-known benchmark an enhanced compiler performs better on many programs, but
not all. For other tools, however, they face the same problem as language
designers: they often cannot validate that developers would be better off with
one or the other variant of the same tool.</p><p>For a concrete example, consider the task of profiling</p><h4 class="heading"><a name="(part._.Shortcomings)"></a>Shortcomings<span class="button-group"><a href="#(part._.Shortcomings)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Modular_Programming.html" title="backward to &quot;Modular Programming&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Thoughts&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="The_Design_Recipe.html" title="forward to &quot;The Design Recipe&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>