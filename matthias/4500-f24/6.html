<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>6 --- Games!</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="shared.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Software Development</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="staff.html" class="tocviewlink" data-pltdoc="x">Staff</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Communicate</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="reviews.html" class="tocviewlink" data-pltdoc="x">In-<wbr></wbr>Class Reviews</a></td></tr><tr><td align="right"></td><td><a href="top-down.html" class="tocviewlink" data-pltdoc="x">Presenting a Milestone</a></td></tr><tr><td align="right"></td><td><a href="projects.html" class="tocviewlink" data-pltdoc="x">Assignments, Overview</a></td></tr><tr><td align="right"></td><td><a href="delivery.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Delivery</a></td></tr><tr><td align="right"></td><td><a href="make.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Make</a></td></tr><tr><td align="right"></td><td><a href="readme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Read Me</a></td></tr><tr><td align="right"></td><td><a href="testme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Test Me</a></td></tr><tr><td align="right"></td><td><a href="debugging.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Debugging</a></td></tr><tr><td align="right"></td><td><a href="late.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Late Policy</a></td></tr><tr><td align="right"></td><td><a href="grades.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Code Grades</a></td></tr><tr><td align="right"></td><td><a href="projects2.html" class="tocviewlink" data-pltdoc="x">Assignments, Actual</a></td></tr><tr><td align="right"></td><td><a href="tahbpl.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>TAHBPL</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="bazaar.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Bazaar Game</span></a></td></tr><tr><td align="right"></td><td><a href="components.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Components</span></a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> The Plan</a></td></tr><tr><td align="right"></td><td><a href="plan.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Bazaar</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> Equations</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> The State</a></td></tr><tr><td align="right"></td><td><a href="partner1.html" class="tocviewlink" data-pltdoc="x"><span style="color: blue">Howdy Pardner</span></a></td></tr><tr><td align="right"></td><td><a href="4.html" class="tocviewlink" data-pltdoc="x">4 &#8212;<wbr></wbr> The Strategies</a></td></tr><tr><td align="right"></td><td><a href="local_protocol.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a></td></tr><tr><td align="right"></td><td><a href="5.html" class="tocviewlink" data-pltdoc="x">5 &#8212;<wbr></wbr> The Rules</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">6 &#8212;<wbr></wbr> Games!</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">6 &#8212;<wbr></wbr> Games!</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.14.0.4</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="5.html" title="backward to &quot;5 --- The Rules&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h4 class="heading"><a name="(part._6)"></a>6 &#8212;<wbr></wbr> Games!<span class="button-group"><a href="#(part._6)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><a name="(part._chap~3a6)"></a><p><span style="color: blue">Due</span> Thursday,  24 October   2024, 11:59:59pm</p><p><span style="color: blue">Purpose</span> <span style="font-weight: bold">T</span> This milestone is about the integration of the logical
components of a system.  Your unit tests for these components should ensure
that the components integrate (meaning: &ldquo;work together&rdquo;) properly, perhaps
even in &ldquo;non-cooperative&rdquo; circumstances.</p><p>(The following milestones will come with integration tests that probe all
aspects of this logical system.)</p><p><span style="color: blue">Delivery</span> Place the product of this week&rsquo;s milestone into your git repo as follows:</p><p><div class="SIntrapara"><ul><li><p>for the Programming Task, place <span class="stt">mechanism.PP</span> and <span class="stt">referee.PP</span> into <span class="stt">Bazaar/Player/</span> and <span class="stt">Bazaar/Referee</span>, respectively;</p></li><li><p>for the Design Task, place <span class="stt">game-observer.md</span> into <span class="stt">Planning/</span></p></li><li><p>for the Testing task, place <span class="stt">xrules</span> and <span class="stt">Tests/</span> into a
top-level repo directory named <span class="stt">6</span></p></li></ul></div><div class="SIntrapara">All previous comments on code files apply.</div></p><p><div class="SIntrapara"><span style="color: blue">Programming Task</span> Co-design implementations for a referee and a player
mechanism, which interact according to <a href="local_protocol.html" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a>:
</div><div class="SIntrapara"><ul><li><p>The player mechanism should support the pieces of functionality of the
protocol.  Keep in mind that the mechanics is abstracted over a strategy.</p></li><li><p><div class="SIntrapara">The referee functionality implements a state machine:
<span class="refelem"><span class="refcolumn"><span class="refcontent">Look into the <a href="https://en.wikipedia.org/wiki/State_pattern">State</a> design pattern.</span></span></span>
</div><div class="SIntrapara"><ul><li><p>it creates the initial game state;</p></li><li><p>it then grants players the right to play a turn, one after another;</p><p>Each turn consists of at most two player actions:</p><ol><li><p>it asks the active player whether it wants a pebble from the bank or
exchange pebbles according to the equations;</p></li><li><p>assuming the player&rsquo;s response is legal, it updates the game state so that
it can ask the player whether it wants to buy cards; and</p></li><li><p>assuming the card purchase request is also legal, it updates the game
state again and rotates the active player to the back of the line.</p></li></ol></li><li><p>when it recognizes that a final state has been reached, it terminates the
game. This may happen after a player takes the first action of a turn.</p></li></ul></div><div class="SIntrapara"><span class="refelem"><span class="refcolumn"><span class="refcontent">Just like in the world of sports, it is <span class="emph">not</span> the task of the
referee to collect the players and arrange them in order. See <a href="plan.html" data-pltdoc="x"><span style="color: red">Bazaar</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a>.</span></span></span>
It consumes a list of players&#8212;<wbr></wbr>sorted in descending order of houseplants
owned&#8212;<wbr></wbr>and runs a single game to completion according to the rules of
<a href="bazaar.html" data-pltdoc="x"><span style="color: red">The Bazaar Game</span></a>. Its result is a pair: the winning player(s) and
those players that misbehaved (for possible further punishment). You
may assume that the players have distinct names.</div></p><p>For <span class="emph">testing</span> purposes, equip</p><ul><li><p>the referee component with an additional piece of functionality, namely,
the capability to accept a list of players <span class="emph">plus</span> a game state. Given these
pieces, this functionality runs the game to completion, starting from this
state.</p></li><li><p>the rule-book component with a way to pick a pebble from the bank in a
deterministic manner. Concretely, iterate through the sequence of colors in
order (red, white, blue, green, yellow) and, if a pebble of that color is available, pick it.</p></li></ul></li></ul></div></p><p>Two different teams may produce the player mechanism and the referee. Indeed,
the plan calls for players from people that nobody knows. It is therefore
imperative to consider <span class="emph">failure modes</span> and to have the referee react to
failures in players.</p><p>This milestone demands the identification of a player&rsquo;s dangerous failure
modes.  In the purpose statement for your referee component, explicitly state
what kind of abnormal interactions that referee takes care of now and what kind
are left to the project phase that adds in remote communication.</p><p><span style="font-weight: bold">Note on Misbehavior</span> As <a href="local_protocol.html" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a> indicates, the referee grants
players two actions per turn. Furthermore, if a player&rsquo;s action-response is
legal, the referee executes the request on the player&rsquo;s behalf on the spot. For
example, a player that legally (not strategically, the ref doesn&rsquo;t know the
strategies) requests a pebble receives the pebble on the spot.  The very moment,
however, a player misbehaves in any way, the referee immediately eliminates it
from the game and all its possessions disappear. In addition, the referee never
communicates with it again (except for requesting its name).</p><p><span style="color: blue">Design Task</span> Design an interactive game-observer mechanism. The design
should describe the interface of the component; how it interacts with the
existing system; and how a single person may wish to interact with the
observer&rsquo;s view.&#8212;<wbr></wbr>As always, a mix of prose, code snippets, and diagrams is
appropriate. Keep it under two pages.</p><p><span style="font-weight: bold">Pedagogy</span> The point of this request is to indicate how a system design may
combine several architectural elements.</p><p>Keep in mind our <a href="plan.html" data-pltdoc="x"><span style="color: red">Bazaar</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a> while you work on a design task.</p><p><span style="color: blue">Testing Task</span> Create a test harness named <span class="stt">xrules</span>. The harness
consumes its JSON input from <span class="stt">STDIN</span> and produces its results to <span class="stt">STDOUT</span>.
Create <span class="strike" style="text-decoration:line-through">five</span> <span style="color: purple">four</span> tests ([0-3]-{in,out}.json) and place them in the specified <span class="stt">Tests/</span> folder.</p><p>A test case always consists of given inputs and expected outputs. For this
course, a test consists of a pair of files: <span class="stt">n-in.json</span>, the input file, and
<span class="stt">n-out.json</span>, the expected output file, where <span class="stt">n</span> is an integer between 0
and the requested number of tests (exclusive).&#8212;<wbr></wbr><span style="font-weight: bold">Constraint</span> No test file may exceed the size limit of 40Kb.</p><p><div class="SIntrapara">The inputs of <span class="stt">xrules</span> consist of three JSON values:
</div><div class="SIntrapara"><ul><li><p>the (maximally useful of the running game) <a href="3.html#%28tech._%2Aequation%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Equations</span></a>;</p></li><li><p><a href="3.html#%28tech._%2Arule%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Rules</span></a> (representing the chosen pebble exchanges); and</p></li><li><p>the <a href="4.html#%28tech._turn%29" class="techoutside" data-pltdoc="x"><span class="techinside">Turn</span></a> state given to the active player.</p></li></ul></div><div class="SIntrapara">For this milestone and all future milestones, assume that the order of
the JSON array is the order in which the player intends to use them.</div></p><p><div class="SIntrapara">The program computes the legality of the given exchange request. Its
output is one of:
</div><div class="SIntrapara"><ul><li><p>the JSON value <span class="stt">false</span> indicating that the proposed trades are illegal;</p></li><li><p><div class="SIntrapara">or two JSON values indicating that the proposed trades are legal and
result in the update bank and the update wallet of the active player:
</div><div class="SIntrapara"><ul><li><p>a bunch of <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a> representing the player&rsquo;s wallet resulting from
the trades, and </p></li><li><p>a bunch of <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a> representing the bank&rsquo;s content resulting from
the trades.</p></li></ul></div></p></li></ul></div></p><p><span style="font-weight: bold">Well-formed and Valid</span>
You may assume that all  inputs to your test harnesses from
<span class="stt">STDIN</span> are well-formed and valid.  A <span class="emph">well-formed</span> piece of
JSON satisfies the grammar; such a piece is <span class="emph">valid</span> if it
also satisfies all the side constraints of a schema
specification. </p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="5.html" title="backward to &quot;5 --- The Rules&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>