<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4 --- The Strategies</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="shared.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Software Development</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="staff.html" class="tocviewlink" data-pltdoc="x">Staff</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Communicate</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="reviews.html" class="tocviewlink" data-pltdoc="x">In-<wbr></wbr>Class Reviews</a></td></tr><tr><td align="right"></td><td><a href="top-down.html" class="tocviewlink" data-pltdoc="x">Presenting a Milestone</a></td></tr><tr><td align="right"></td><td><a href="projects.html" class="tocviewlink" data-pltdoc="x">Assignments, Overview</a></td></tr><tr><td align="right"></td><td><a href="delivery.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Delivery</a></td></tr><tr><td align="right"></td><td><a href="make.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Make</a></td></tr><tr><td align="right"></td><td><a href="readme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Read Me</a></td></tr><tr><td align="right"></td><td><a href="testme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Test Me</a></td></tr><tr><td align="right"></td><td><a href="debugging.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Debugging</a></td></tr><tr><td align="right"></td><td><a href="late.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Late Policy</a></td></tr><tr><td align="right"></td><td><a href="grades.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Code Grades</a></td></tr><tr><td align="right"></td><td><a href="projects2.html" class="tocviewlink" data-pltdoc="x">Assignments, Actual</a></td></tr><tr><td align="right"></td><td><a href="tahbpl.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>TAHBPL</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="bazaar.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Bazaar Game</span></a></td></tr><tr><td align="right"></td><td><a href="components.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Components</span></a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> The Plan</a></td></tr><tr><td align="right"></td><td><a href="plan.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Bazaar</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> Equations</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> The State</a></td></tr><tr><td align="right"></td><td><a href="partner1.html" class="tocviewlink" data-pltdoc="x"><span style="color: blue">Howdy Pardner</span></a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">4 &#8212;<wbr></wbr> The Strategies</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">4 &#8212;<wbr></wbr> The Strategies</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.14.0.4</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="partner1.html" title="backward to &quot;Howdy Pardner&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h4 class="heading"><a name="(part._4)"></a>4 &#8212;<wbr></wbr> The Strategies<span class="button-group"><a href="#(part._4)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><a name="(part._chap~3a4)"></a><p><span style="color: blue">Due</span> Thursday,  10 October   2024, 11:59:59pm</p><p><span style="color: blue">Purpose</span> <span style="font-weight: bold">T</span> to develop the one non-trivial algorithm that every
system comes with</p><p>Every software system contains some components that implement a non-trivial
algorithm.  Some years, this course comes with game components whose
implementation is challenging; this year, the strategies are non-trivial
tree-search algorithms.</p><p>In the olden days, computer science departments confused programming with
algorithm development. Many still do, especially faculty members who avoided
building software systems for their research. By now you understand that
algorithm development is only one aspect of software system development.
And in many cases, companies hire specialists for the truly complex algorithms
in the system. This milestone gives you an opportunity to figure out whether
&ldquo;algorithm design&rdquo; is the place in the software industry where you want to
end up or whether other aspects are more to your liking.</p><p><span style="color: blue">Delivery</span> Place the product of this week&rsquo;s milestone into your git repo as follows:</p><p><div class="SIntrapara"><ul><li><p>for the Programming Task, place the player&rsquo;s strategy functionality into <span class="stt">Bazaar</span>/Player/strategy.PP;</p></li><li><p>for the Design Task, place <span class="stt">player-protocol.md</span> into <span class="stt">Planning/</span></p></li><li><p>for the Testing task, place <span class="stt">xturn</span> and <span class="stt">Tests/</span> into a top-level
repo directory named <span class="stt">4</span></p></li></ul></div><div class="SIntrapara">All previous comments on code files apply.</div></p><p><span style="color: blue">Programming Task</span> <span class="refelem"><span class="refcolumn"><span class="refcontent">Fundamentals I and II teach to abstract
after you have seen several similar pieces of code. Here you can see ahead of
time that the playing mechanics remains the same while the decision-making
process changes. It is therefore appropriate to abstract immediately.</span></span></span> An AI
player needs a strategy for playing turns. Indeed, an ambitious participant in a
Bazaar game may wish to experiment with more than one strategy. So a player
component should handle the mechanics of playing <span class="emph">and</span> should abstract over
a strategy component.</p><p><div class="SIntrapara">To play a turn of Bazaar, a player must have answers to two questions:
<span class="refelem"><span class="refcolumn"><span class="refcontent">How did we derive two questions from the three ways of taking a
turn specified in <a href="bazaar.html" data-pltdoc="x"><span style="color: red">The Bazaar Game</span></a>?</span></span></span>
</div><div class="SIntrapara"><ol><li><p>should it request a pebble or request exchanges or forgo both?</p><p>To simplify the task a bit, we whimsically decide that players request a pebble
from the bank <span class="emph">only if</span> they cannot perform any exchanges.</p></li><li><p>once the player has the pebbles it wants,
which cards should it buy and in what order?</p></li></ol></div></p><p><div class="SIntrapara">The answer to question 2 needs a strategy that helps players with winning the
game. But, since the game per se isn&rsquo;t the key to learning though writing good
software is, we have our players use two greedy (simple-minded) maximization
goals: <span class="refelem"><span class="refcolumn"><span class="refcontent">What rationales might be behind these two maximization goals?</span></span></span>
</div><div class="SIntrapara"><ul><li><p>Pick a sequence of exchanges followed by a sequence of cards that maximize
the number of <span class="emph">points</span> that the purchase of cards can achieve during a
single turn.</p></li><li><p>Pick a sequence of exchanges followed by a sequence of cards that maximize
the number of <span class="emph">cards</span> that a player can purchase during a single turn.</p></li></ul></div></p><p>Implementing these maximization goals requires searches of trees of potential
candidates. While the search for a maximizing sequence of card purchases is
naturally limited by the number of available cards, the search for a
maximum-enabling exchange strategy comes without such natural limit. For now we
impose an artificial limit of 4.</p><p><span style="font-weight: bold">Tie breaking</span> Conceptually, these maximizing search strategies collect
&ldquo;best so far&rdquo; candidates in sets. Collecting candidates is necessary because
these processes may encounter several different maximizing exchange-and-purchase
arrangements. When the search is done and the set contains more than one
element, it is necessary to break ties.</p><p><div class="SIntrapara">Here are the rules for breaking ties among <span class="emph">card-purchase requests</span>:
</div><div class="SIntrapara"><ol><li><p>The search process eliminates any candidates that do not yield the highest
number of points. (This rule vacuously applies to the points-maximizing
strategy.)</p></li><li><p>The search process eliminates any candidates that do not yield the largest
number of remaining pebbles in the player&rsquo;s wallet.</p></li><li><p>The search process picks the candidate with the smallest wallet, unless
all candidates have equal wallets.</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">This code hides auxiliaries so that nobody can include it directly
into a code base.</span></span></span></p><p>Here is the definition for the comparison of wallets from the oracle
implementation:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">#; </span> {Wallet Wallet -&gt; Boolean} </td></tr><tr><td><span class="RktCmt">;;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> &lsquo;1wallet&lsquo; is below &lsquo;2wallet&lsquo; if the strings formed from the two are <span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3c~3f%29%29" class="RktValLink" data-pltdoc="x">string&lt;?</a></span></span></td></tr><tr><td><span class="RktCmt">;;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> assuming they are of the same size; other just compare sizes</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet&lt;?</span><span class="hspace">&nbsp;</span><span class="RktSym">1wallet</span><span class="hspace">&nbsp;</span><span class="RktSym">2wallet</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-size</span><span class="hspace">&nbsp;</span><span class="RktSym">1wallet</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-size</span><span class="hspace">&nbsp;</span><span class="RktSym">2wallet</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3c~3f%29%29" class="RktValLink" data-pltdoc="x">string&lt;?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">1wallet</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">2wallet</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-size</span><span class="hspace">&nbsp;</span><span class="RktSym">1wallet</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-size</span><span class="hspace">&nbsp;</span><span class="RktSym">2wallet</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">#; </span> {Wallet -&gt; String} </td></tr><tr><td><span class="RktCmt">;;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">turn the wallet into a sorted color string and check <span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3c~3f%29%29" class="RktValLink" data-pltdoc="x">string&lt;?</a></span></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">a-wallet</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%2A%29%29" class="RktStxLink" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wallet-&gt;list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-wallet</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29" class="RktValLink" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p:pebble-color-first-letter</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._sort%29%29" class="RktValLink" data-pltdoc="x">sort</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/characters.html#%28def._%28%28quote._~23~25kernel%29._char~3c~3d~3f%29%29" class="RktValLink" data-pltdoc="x">char&lt;=?</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of-chars-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></li><li><p>The search process picks the candidate with the smallest sequence of
cards, unless all candidates have equal sequences of cards.</p><p><div class="SIntrapara">Card <span style="font-style: italic">c</span> is less than card <span style="font-style: italic">d</span> if
</div><div class="SIntrapara"><ul><li><p><span style="font-style: italic">c</span> and <span style="font-style: italic">d</span> don&rsquo;t both come with a face and <span style="font-style: italic">c</span>
doesn&rsquo;t display one; or</p></li><li><p>if <span style="font-style: italic">c</span>&rsquo;s pebbles considered as a wallet is less than <span style="font-style: italic">d</span>&rsquo;s
pebbles considered as a wallet.</p></li></ul></div></p><p>A sequence of cards <span style="font-style: italic">c*</span> is less than a sequence of cards <span style="font-style: italic">d*</span> if
each card in <span style="font-style: italic">c*</span> at position <span style="font-style: italic">i</span> is less than the corresponding
card in <span style="font-style: italic">d*</span> at <span style="font-style: italic">i</span> for <span style="font-style: italic">i</span> in range for the shorter of the
two sequences.</p></li></ol></div></p><p><div class="SIntrapara">Here are the rules for breaking ties among <span class="emph">exchange-and-purchase requests</span>:
</div><div class="SIntrapara"><ol><li><p>from equivalent candidates, pick the ones that need the smallest number of trades;</p></li><li><p>from the remaining equivalent candidates, use the tie breaker for card
purchases; and if this still leaves a non-singleton set of equal candidates, </p></li><li><p>pick the one that uses the smallest pebble-exchanges.</p><p>A pebble exchange <span style="font-style: italic">P</span> is less than a pebble exchange <span style="font-style: italic">Q</span> if the
pebbles on the left-hand side of <span style="font-style: italic">P</span> (as a wallet) are less than the
pebbles on the left-hand side of <span style="font-style: italic">Q</span> (as a wallet) or, assuming those
are equal, if the pebbles on the right-hand side of <span style="font-style: italic">P</span> (as a wallet) are
less than the pebbles on the right-hand side of <span style="font-style: italic">Q</span> (as a wallet).</p><p>A sequence of pebble exchanges <span style="font-style: italic">P*</span> is less than a sequence of pebble
exchanges <span style="font-style: italic">Q*</span> if each exchange in <span style="font-style: italic">P*</span> at position <span style="font-style: italic">i</span> is
less than the corresponding exchange in <span style="font-style: italic">Q*</span> at <span style="font-style: italic">i</span> for <span style="font-style: italic">i</span>
in range for the shorter of the two sequences.</p></li></ol></div></p><p><span style="color: blue">Design Task</span> The player components must communicate with the referee.
This communication involves both function/method calls and orderings of those,
i.e., a protocol. Since outsiders will program to this interface, it must be
spelled out precisely and in detail.  <span style="font-weight: bold">Hint</span> To start your
brainstorming&#8212;<wbr></wbr>what is a software system? What are the key phases of the game?</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">A protocol supplements an API to explain the calling sequence.
Protocols are rarely checked, violations hard to detect, and the resulting
errors tend to be obscure.</span></span></span></p><p>Design the interaction protocol between the referee and the player(s).  The
document, named <span class="stt">player-protocol.md</span>, should be a well-organized English
write-up. If you are familiar with UML sequence diagrams (or you have time to
read up on them), illustrate the prose with one of those.</p><p>One page should suffice. Less is more.</p><p>Keep in mind our <a href="plan.html" data-pltdoc="x"><span style="color: red">Bazaar</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a> while you work on a design task.</p><p><span style="color: blue">Testing Task</span> Create a test harness named <span class="stt">xturn</span>. The harness consumes
its JSON input from <span class="stt">STDIN</span> and produces its results to <span class="stt">STDOUT</span>.  Create five
tests ([0-2]-{in,out}.json) and place them in the specified <span class="stt">Tests/</span> folder.</p><p>A test case always consists of given inputs and expected outputs. For this
course, a test consists of a pair of files: <span class="stt">n-in.json</span>, the input file, and
<span class="stt">n-out.json</span>, the expected output file, where <span class="stt">n</span> is an integer between 0
and the requested number of tests (exclusive).&#8212;<wbr></wbr><span style="font-weight: bold">Constraint</span> No test file may exceed the size limit of 40Kb.</p><p>The input of <span class="stt">xturn</span> is a <a href="#%28tech._game%29" class="techoutside" data-pltdoc="x"><span class="techinside">Game</span></a> in JSON format; its output is the
corresponding <a href="#%28tech._turn%29" class="techoutside" data-pltdoc="x"><span class="techinside">Turn</span></a> in JSON format.</p><p>Here are the relevant JSON specifications:</p><p><div class="SIntrapara"><blockquote><p><div class="SIntrapara">A <a name="(tech._game)"></a><span style="font-style: italic">Game</span> is an object with 4 fields: </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span><span class="stt">"bank"</span><span style="color: white">____</span> :    <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"visibles"</span><span style="color: white"></span> :    <a href="#%28tech._%2Acard%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Cards</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"cards"</span><span style="color: white">___</span> :    <a href="#%28tech._%2Acard%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Cards</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"players"</span><span style="color: white">_</span> :    <a href="#%28tech._%2Aplayer%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Players</span></a>  } </p></td></tr></table></div></p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">INTERPRETATION A </span><a href="#%28tech._game%29" class="techoutside" data-pltdoc="x"><span class="techinside">Game</span></a><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">instance describes the referee's knowledge about</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">the pebbles available for exchange, the visible cards, the cards to</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">be unveiled, and the pebbles that the players own as well as their</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">current scores. The array lists the player in the order in which they</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">will take turns.</span></p></td></tr></table><p><div class="SIntrapara">A <a name="(tech._turn)"></a><span style="font-style: italic">Turn</span> is an object with 4 fields: </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span><span class="stt">"bank"</span><span style="color: white">__</span> :    <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"cards"</span><span style="color: white">_</span> :    <a href="#%28tech._%2Acard%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Cards</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"active"</span><span style="color: white"></span> :    <a href="#%28tech._player%29" class="techoutside" data-pltdoc="x"><span class="techinside">Player</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"scores"</span><span style="color: white"></span> :    <a href="#%28tech._%2Anatural%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Naturals</span></a>  } </p></td></tr></table></div></p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">INTERPRETATION A </span><a href="#%28tech._turn%29" class="techoutside" data-pltdoc="x"><span class="techinside">Turn</span></a><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">instance describes knowledge that the referee</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">will share with the player whose turn it is next:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">the pebbles available for exchange, the visible cards, the active</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">player's pebbles and its score, plus the scores of the remaining</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">players in the order in which they will take turns.</span></p></td></tr></table><p><div class="SIntrapara">A <a name="(tech._player)"></a><span style="font-style: italic">Player</span> is an object with 2 fields: </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span><span class="stt">"wallet"</span><span style="color: white"></span> :    <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"score"</span><span style="color: white">_</span> :    <a href="A.html#%28tech._natural%29" class="techoutside" data-pltdoc="x"><span class="techinside">Natural</span></a>  } </p></td></tr></table></div></p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">INTERPRETATION A </span><a href="#%28tech._player%29" class="techoutside" data-pltdoc="x"><span class="techinside">Player</span></a><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">instance specifies the pebbles that</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">the player owns and its score.</span></p></td></tr></table><p><div class="SIntrapara">A <a name="(tech._card)"></a><span style="font-style: italic">Card</span> is an object with 2 fields: </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span><span class="stt">"pebbles"</span><span style="color: white"></span> :    <a href="3.html#%28tech._%2Apebble%29" class="techoutside" data-pltdoc="x"><span class="techinside">*Pebbles</span></a><span class="stt">,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span style="color: white"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">{ </span></span><span class="stt">"face?"</span><span style="color: white">__</span> :    <a href="#%28tech._boolean%29" class="techoutside" data-pltdoc="x"><span class="techinside">Boolean</span></a>  } </p></td></tr></table></div></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">INTERPRETATION A </span><a href="#%28tech._card%29" class="techoutside" data-pltdoc="x"><span class="techinside">Card</span></a><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">instance specifies the pebbles that</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">are displayed on the card and whether it displays a smiley.</span></p></td></tr></table></div></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a name="(tech._*card)"></a><span style="font-style: italic">*Cards</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is an array of the shape [</span><a href="#%28tech._card%29" class="techoutside" data-pltdoc="x"><span class="techinside">Card</span></a><span class="stt">, ..., </span><a href="#%28tech._card%29" class="techoutside" data-pltdoc="x"><span class="techinside">Card</span></a><span class="stt">].</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><a name="(tech._*player)"></a><span style="font-style: italic">*Players</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is an array of the shape [</span><a href="#%28tech._player%29" class="techoutside" data-pltdoc="x"><span class="techinside">Player</span></a><span class="stt">, ..., </span><a href="#%28tech._player%29" class="techoutside" data-pltdoc="x"><span class="techinside">Player</span></a><span class="stt">].</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">CONSTRAINT The array contains no more than 6 </span><a href="#%28tech._player%29" class="techoutside" data-pltdoc="x"><span class="techinside">Player</span></a><span class="stt">s.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><a name="(tech._*natural)"></a><span style="font-style: italic">*Naturals</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is an array of the shape [</span><a href="A.html#%28tech._natural%29" class="techoutside" data-pltdoc="x"><span class="techinside">Natural</span></a><span class="stt">, ..., </span><a href="A.html#%28tech._natural%29" class="techoutside" data-pltdoc="x"><span class="techinside">Natural</span></a><span class="stt">].</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><a name="(tech._boolean)"></a><span style="font-style: italic">Boolean</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is true or false.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr></table></p><p><span style="font-weight: bold">Well-formed and Valid</span>
You may assume that all  inputs to your test harnesses from
<span class="stt">STDIN</span> are well-formed and valid.  A <span class="emph">well-formed</span> piece of
JSON satisfies the grammar; such a piece is <span class="emph">valid</span> if it
also satisfies all the side constraints of a schema
specification. </p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="partner1.html" title="backward to &quot;Howdy Pardner&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>