<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Rubric: Milestone 9</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Rubric:<span class="mywbr"> &nbsp;</span> Milestone 9</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="#%28part._g61863%29" class="tocviewlink" data-pltdoc="x">Delivery &ndash; Michael</a></td></tr><tr><td align="right"></td><td><a href="#%28part._g61864%29" class="tocviewlink" data-pltdoc="x">Test Fest &ndash; Michael</a></td></tr><tr><td align="right"></td><td><a href="#%28part._g61865%29" class="tocviewlink" data-pltdoc="x">Program Inspection &ndash; everyone</a></td></tr><tr><td align="right"></td><td><a href="#%28part._g61866%29" class="tocviewlink" data-pltdoc="x">My Mock</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._9%29" class="tocsubseclink" data-pltdoc="x">Rubric:<span class="mywbr"> &nbsp;</span> Milestone 9</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._g61863%29" class="tocsubseclink" data-pltdoc="x">Delivery &ndash; Michael</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._g61864%29" class="tocsubseclink" data-pltdoc="x">Test Fest &ndash; Michael</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._g61865%29" class="tocsubseclink" data-pltdoc="x">Program Inspection &ndash; everyone</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._g61866%29" class="tocsubseclink" data-pltdoc="x">My Mock</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">8.10.0.1</span></div><h2><a name="(part._9)"></a>Rubric: Milestone 9</h2><a name="(part._chap~3a9)"></a><p><span style="font-weight: bold">Grading</span>: all staff</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p>total: 440 points</p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p>bonus: 60 points, up to and no more</p></td></tr></table></div></p><h3><a name="(part._g61863)"></a>Delivery &ndash; Michael</h3><p><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p>delivery: 30 points</p></td></tr></table></p><p><div class="SIntrapara">Check basic delivery:
</div><div class="SIntrapara"><ul><li><p>10 points for <span class="stt">player.PP</span> and <span class="stt">referee.PP</span> in <span class="stt">Q/Remote/</span></p></li><li><p>10 points for <span class="stt">server.PP</span> and <span class="stt">client.PP</span> in <span class="stt">Q/Server/</span> and <span class="stt">Q/Client</span>, respectively	</p></li><li><p>5 points for <span class="stt">xbaddies</span>, executable possibly after running <span class="stt">make</span></p></li><li><p>5 points for [0-9]-{in,out}.json</p></li></ul></div></p><h3><a name="(part._g61864)"></a>Test Fest &ndash; Michael</h3><p><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p>test-fest: 200 points, plus bonus points</p></td></tr></table></p><p>&ndash; 100 points, if their <span class="stt">xbaddies</span> passes my tests; -10 per failed test</p><p>&ndash; 100 points, if their tests pass my <span class="stt">xbaddies</span>; -10 per failed test</p><p><span style="font-weight: bold">Bonus</span> up to 60 points, 20 points for any test case that passes my <span class="stt">xbaddies</span> and breaks
another pair&rsquo;s <span class="stt">xbaddies</span>; up to the max specified</p><p>They can receive 40 extra points for any test case that is correct and breaks my code.
But they can get those only if they complain to you and then me.</p><h3><a name="(part._g61865)"></a>Program Inspection &ndash; everyone</h3><p><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p>inspect: 210 points</p></td></tr></table></p><p>&ndash; 20 points, for accurate self eval</p><p>In plain OO (Java, C#, Python) terms, but mostly applicable to FP:</p><p><div class="SIntrapara">The first batch of inspections concerns <span class="stt">Q/Server/player</span>:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><span class="stt">Q/Server/player</span> must implement the same interface as <span class="stt">Q/Player/mechanism</span>, that is, accepting
  </div><div class="SIntrapara"><ul><li><p>10 points for <span class="stt">name</span> calls and return the name sent by the client;</p></li><li><p>10 points for <span class="stt">setup</span> calls, turn them into JSON, get result (<span class="stt">"void"</span>) in JSON;</p></li><li><p>10 points for <span class="stt">take-turn</span> calls, turn them into JSON, receive a JSON
<span class="stt">ACTION</span>, return it as an internal value;</p><p>Students who implement an action as three calls on the game state may be
tempted to turn the JSON result into just those three calls. What they
should do instead is implement a <span class="emph">bridge</span> between their game state and
the proxy. Take off the points.</p></li><li><p>10 points for <span class="stt">new-tiles</span> calls, turn them into JSON, get result (<span class="stt">"void"</span>) in JSON;</p></li><li><p>10 points for <span class="stt">win</span> calls, turn them into JSON, get result (<span class="stt">"void"</span>) in JSON;</p></li></ul></div><div class="SIntrapara">The key is that no method does more (or less) than exactly
  that. Take off all pts if any of them do more (or less).</div></p></li><li><p>15 points for constructors (builders, factories) that receive handles for
sending/receiving over some stream (so that TCP can be mocked);</p></li><li><p>15 points for unit tests for <span class="stt">Q/Clients/player</span></p><p>Unit tests for the proxies may merely check that the object writes JSON for
the given arguments to a mocked output stream.  (Great tests for
<span class="stt">take-turn</span> should also check whether it turns JSON on the input device
into a proper result and one of the others should check whether it deals with
<span class="stt">"void"</span> properly.)</p><p>See below for my code of how to set up mock tests. </p></li></ul></div></p><p><div class="SIntrapara">The second batch of inspections is about <span class="stt">Q/Clients/referee</span>:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><span class="stt">Q/Clients/referee</span> must implement the same "context" (co) as
  <span class="stt">Q/Player/referee</span>, namely, receiving and making:
  </div><div class="SIntrapara"><ul><li><p>10 points for <span class="stt">setup</span> calls</p></li><li><p>10 points for <span class="stt">take-turn</span> calls</p></li><li><p>10 points for <span class="stt">new-tiles</span> calls</p></li><li><p>10 points for <span class="stt">win</span> calls</p></li></ul></div></p><p>The typical implementation should be a loop that reads a JSON expression from an
input stream; transforms it into internal data representation (e.g., a setup
call comes with a public game state and a bag of tiles); performs the method
call for the specific player (see below); and writes the result as JSON to the
output stream (e.g., an action for the <span class="stt">take-turn</span> method). No method should
do more or less.</p></li><li><p>15 points for constructor (builder, factory) must receive (1) a player and
(2)  handles for sending/receiving JSON over streams.</p></li><li><p>15 points for unit tests for <span class="stt">Q/Server/referee</span></p><p>Unit tests for the proxy player may just check whether the method can read
JSON arguments from a mock input device. See above for a detailed descriptions
and below for an example.</p></li></ul></div><div class="SIntrapara">All of this applies to OOP and FP. If you find something incomprehensible for
the latter, ask one of the instructors.</div></p><p><div class="SIntrapara">For the Clients-Server part, we merely spot-check two aspects, one per:
</div><div class="SIntrapara"><ul><li><p>20 points for synchronizing client start-ups with servers;</p><p>That is, imagine someone starting the client before the server is up.</p><p>The client must wait or shut down gracefully. Waiting is ideal. <span class="emph">Graceful</span>
shut-down is acceptable. Crashing means a loss of all points.</p><p>The key is to look for an exception-handling block that deals with a network
connectivity failure around the place where the client connects <span class="emph">and</span>
sends the name over. The handler may call for a retry for a certain number of
times or shut down the client with an appropriate error message but <span class="emph">not</span>
a stack trace print.</p></li><li><p>20 points for abstracting over the &ldquo;wait for two periods&rdquo; property of the
server.</p><p>The server is specified to wait for <span class="emph">two</span> periods but &ldquo;two periods&rdquo;
should <span class="emph">not</span> be hard-wired into the code.</p><p>One way to hard-wire is to have two copies of the same wait-period code. It
implies a loss of all points.</p><p>Another one is to have a function that performs the waiting task and to call
it twice. Take off half the points.</p><p>The third one is to set up a loop in a wait-period function that has a
hard-coded <span class="RktVal">2</span> in it, as in</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">for(int i = 0; i &lt; 2; i++)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">accept_players();</span></p></td></tr></table></div><div class="SIntrapara">Take off 5 points.</div></p></li></ul></div></p><h3><a name="(part._g61866)"></a>My Mock</h3><p><div class="SIntrapara">Here is a test scenario for my remote-proxy player:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">test-remote</span><span class="hspace">&nbsp;</span><span class="RktSym">make-remote-player</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setup</span><span class="hspace">&nbsp;</span><span class="RktSym">info-special-state</span><span class="hspace">&nbsp;</span><span class="RktSym">starter-tile*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:remote</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void-&gt;jsexpr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:msg</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">[</span><span class="RktVal">"setup"</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktRdr">,</span><span class="RktSym">jinfo-special-state</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">jstarter-tile*</span><span class="RktVal">]</span><span class="RktVal">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">It makes a particular (healthy) player with <span class="RktSym">make-remote-player</span>; checks
that it sends a JSON message formatted like a method call (<span class="RktPn">#:msg</span>); and
deals with the response <span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span> properly.</div></p><p><div class="SIntrapara">Here is the code that sets up the mock input/output devices:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test-remote</span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#:remote JSexpr ~~ what the client responds with</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#:exp JSexpr</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">~~ what we expect the method to produce in response</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#:msg JSexpr</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">~~ what the method sends to the client </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-parse</span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="hspace">&nbsp;</span><span class="RktSym">make-remote-player</span><span class="hspace">&nbsp;</span><span class="RktSym">name:id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~optional</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~seq</span><span class="hspace">&nbsp;</span><span class="RktPn">#:remote</span><span class="hspace">&nbsp;</span><span class="RktSym">input</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:defaults</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">input</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">"void"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~optional</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~seq</span><span class="hspace">&nbsp;</span><span class="RktPn">#:exp</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:defaults</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:msg</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">check-pred</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-diff</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">detect the difference between the expected and actual</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-&gt;jsexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-output-to-string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-pred</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">check-equal?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-diff</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-input-from-string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">jsexpr-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">input</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ip</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-input-port</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">op</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-output-port</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-remote-player</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ip</span><span class="hspace">&nbsp;</span><span class="RktSym">op</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="hspace">&nbsp;</span><span class="RktSym">method</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">"exoected result of call: "</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">"call as message: "</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">See the <span class="RktPn">(</span><span class="RktSym">with-output-to-string</span><span class="stt"> </span><span class="RktSym">..</span><span class="RktPn">)</span> and
<span class="RktPn">(</span><span class="RktSym">with-input-from-string</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">jsexpr-&gt;string</span><span class="stt"> </span><span class="RktSym">input</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span> expressions to
understand how easy a language should make it to set up mock streams. Also note
that this sets up <span class="emph">two</span> (nested) unit tests, one per direction.</div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>