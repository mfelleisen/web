<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>8 --- The League</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Software Development</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="new_lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="staff.html" class="tocviewlink" data-pltdoc="x">Staff</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Communicate</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="reviews.html" class="tocviewlink" data-pltdoc="x">In-<wbr></wbr>Class Reviews</a></td></tr><tr><td align="right"></td><td><a href="projects.html" class="tocviewlink" data-pltdoc="x">Assignments, Overview</a></td></tr><tr><td align="right"></td><td><a href="delivery.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Delivery</a></td></tr><tr><td align="right"></td><td><a href="make.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Make</a></td></tr><tr><td align="right"></td><td><a href="readme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Read Me</a></td></tr><tr><td align="right"></td><td><a href="testme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Test Me</a></td></tr><tr><td align="right"></td><td><a href="debugging.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Debugging</a></td></tr><tr><td align="right"></td><td><a href="late.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Late Policy</a></td></tr><tr><td align="right"></td><td><a href="grades.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Code Grades</a></td></tr><tr><td align="right"></td><td><a href="projects2.html" class="tocviewlink" data-pltdoc="x">Assignments, Actual</a></td></tr><tr><td align="right"></td><td><a href="tahbpl.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>TAHBPL</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="trains.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Game:<span class="mywbr"> &nbsp;</span> Trains</span></a></td></tr><tr><td align="right"></td><td><a href="plan.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Trains</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> The Analysis</a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> The Map</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> The Image</a></td></tr><tr><td align="right"></td><td><a href="4.html" class="tocviewlink" data-pltdoc="x">4 &#8212;<wbr></wbr> The Game State</a></td></tr><tr><td align="right"></td><td><a href="5.html" class="tocviewlink" data-pltdoc="x">5 &#8212;<wbr></wbr> The Strategy</a></td></tr><tr><td align="right"></td><td><a href="local_protocol.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a></td></tr><tr><td align="right"></td><td><a href="6.html" class="tocviewlink" data-pltdoc="x">6 &#8212;<wbr></wbr> Games!</a></td></tr><tr><td align="right"></td><td><a href="partner1.html" class="tocviewlink" data-pltdoc="x"><span style="color: blue">Howdy Pardner</span></a></td></tr><tr><td align="right"></td><td><a href="7.html" class="tocviewlink" data-pltdoc="x">7 &#8212;<wbr></wbr> The Clean Up</a></td></tr><tr><td align="right"></td><td><a href="manager_protocol.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Logical Interactions 2</span></a></td></tr><tr><td align="right"></td><td><a href="8.html" class="tocviewselflink" data-pltdoc="x">8 &#8212;<wbr></wbr> The League</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="8.html" class="tocviewselflink" data-pltdoc="x">8 &#8212;<wbr></wbr> The League</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.3.0.5</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="manager_protocol.html" title="backward to &quot;Logical Interactions 2&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h4><a name="(part._8)"></a>8 &#8212;<wbr></wbr> The League</h4><a name="(part._chap~3a8)"></a><p><span style="color: blue">Due</span> Wednesday, 17 November 2021, 11:59:59pm</p><p><span style="color: blue">Delivery</span> Place the product of this week&rsquo;s milestone into your repo as follows:</p><ul><li><p>for the Programming Task, place <span class="stt">manager.PP</span> into the <span class="stt">Admin/</span> directory;</p></li><li><p>for the Design Task, place <span class="stt">remote.md</span> in <span class="stt">Planning/</span></p></li><li><p>for the Testing Task, place <span class="stt">xref</span> and <span class="stt">Tests/</span> in a repo-level
directory named <span class="stt">8</span> and <span class="stt">cheat.PP</span> into your <span class="stt">Player/</span> folder</p></li></ul><p><span style="color: blue">Programming Task</span> Implement the tournament manager.</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">Do not worry about how players sign up; this piece of
functionality is added when we get to the communication layer.</span></span></span>  Once all
players for a tournament are "signed up", they are handed to the tournament
manager in descending order of age.</p><p>The purpose of the manager is to run a tournament until a set of winners is
determined. Its first task is to inform the players that the tournament has
begun; their responses are maps. The manager chooses one of the submitted maps
for all tournament games.</p><p>The manager runs the tournament as a knock-out elimination system.  The
first-placed finisher(s) of every game of round <span style="font-style: italic">n</span> move on to round
<span style="font-style: italic">n+</span>1<span style="font-style: italic"></span>.  The tournament ends when two tournament rounds of games in a row
produce the exact same winners, when there are too few players for a single
game, or when the number of participants has become small enough for single
game, which is then run as the last and final game to determine the final
surviving winners.  In all cases, the surviving players share the Billion
<a href="https://www.pitt.edu/~dash/grimm153.html">Thalers</a> (nah, make this a Trillion; we&rsquo;re all printing money now)
TrainsHacker Award.</p><p>The allocation of players to games works as follows. The manager starts by
assigning them to games with the maximal number of participants permitted in
descending order of age.  Once the number of remaining players drops below the
maximal number and can&rsquo;t run a game with the remainder, the manager backtracks
by one game and tries games of size one less than the maximal number and so on
until all players are assigned.</p><p>The manager&rsquo;s result consists of two pieces: the tournament winner(s) and the
misbehaving players.</p><p>See <a href="manager_protocol.html" data-pltdoc="x"><span style="color: red">Logical Interactions 2</span></a> for a diagramatic summary of these specifications.</p><p>For testing purposes, the manager should be optionally abstracted over two
pieces of functionality: (1) in what order to select (enough) destinations from
the map for players to pick from; (2) a sequence of cards to hand to players.
The <span class="emph">defaults</span> should be a method for randomly picking destinations and
another one for randomly shuffling a sequence of 250 colored
cards.</p><p><span style="color: blue">Design Task</span> We have reached the end of the second prototype stage. Our
investors are surely going to be happy with the tournament demo. It is time to
plan for the third and final stage, getting ready for the release. See
<a href="plan.html" data-pltdoc="x"><span style="color: red">Trains</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a>.</p><p>Design a remote collaboration protocol. The design document should consist of
two parts. The first one is an interaction diagram that specifies the kinds of
interactions between the Trains.com server (plus its relevant Admin components)
and the remote clients (and their relevant Player components), including the
JSON exchange format of each interaction.  The second part of the document
supplements the first with English explanations.</p><p>Start with the <span class="emph">logical</span> interaction diagram, sever the connections between
the administrative and the player side, and develop a layer that connects the
two parts. This last step demands both the design of new components and message
formats, for which you can and should re=use the integration test formats. (Your
software architect planned ahead.) According to our plan, this design step
should <span class="emph">not demand any changes</span> to your logical components, which are now
well-tested. Touching them would only re-introduce bugs.</p><p>Two pages should suffice. Less is more.</p><p>Keep in mind our <a href="plan.html" data-pltdoc="x"><span style="color: red">Trains</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a> when you work on designs.</p><p><span style="color: blue">Testing Task</span> Create a test harness named <span class="stt">xref</span> The harness consumes
its JSON input from <span class="stt">STDIN</span> and prints its results to <span class="stt">STDOUT</span>. Create three
tests; place them in <span class="stt">Tests/</span>.</p><p><div class="SIntrapara"><span style="font-weight: bold">Dealing with failure during informative calls.</span> The project code is ready
for integration testing of the referee, but to get this right, it is necessary
to settle a question that could remain open until now:
</div><div class="SIntrapara"><blockquote><p> What happens to the ranking of a game or
tournament when a player fails while the referee or manager, respectively,
informs the player of the outcome?</p></blockquote></div><div class="SIntrapara">Here is the decision:
</div><div class="SIntrapara"><blockquote><p>For these calls, the referee and manager, respectively,
move the failing player from the ranking to the collection of failed player. No
other action is needed.</p></blockquote></div><div class="SIntrapara">This decision allows ranks in a ranking to be empty.</div></p><p><span style="font-weight: bold">Constraint</span> No test file may exceed the size limit of 20Kb.</p><p><div class="SIntrapara">Its inputs are three JSON values:
</div><div class="SIntrapara"><ul><li><p>a <a href="3.html#%28tech._map%29" class="techoutside" data-pltdoc="x"><span class="techinside">Map</span></a> with at most 20 cities and 40 connections,</p></li><li><p>an array of between 2 and 8 <a href="8.html#%28tech._playerinstance%29" class="techoutside" data-pltdoc="x"><span class="techinside">PlayerInstance</span></a>s, and</p><p>CONSTRAINT The <a href="8.html#%28tech._playername%29" class="techoutside" data-pltdoc="x"><span class="techinside">PlayerName</span></a>s are pairwise distinct.</p></li><li><p>an array of 250 <a href="trains.html#%28tech._color%29" class="techoutside" data-pltdoc="x"><span class="techinside">Color</span></a>s.</p></li></ul></div><div class="SIntrapara">The three values specify the game map to be used for a game, the participating
players (in descending order of age), and which colored cards to hand out and
in which order the referee hands out. &#8212;<wbr></wbr> The referee determines the destinations
and hands them out in the lexicographic order specified in <a href="5.html" data-pltdoc="x">5 &#8212;<wbr></wbr> The Strategy</a>.</div></p><p>The output is either the JSON string "error: not enough destinations" or the outcome of running the
game. The latter consists of a JSON array that contains a <a href="8.html#%28tech._ranking%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ranking</span></a> and a
<a href="8.html#%28tech._rank%29" class="techoutside" data-pltdoc="x"><span class="techinside">Rank</span></a>.  The first is the result of the game; the second are the misbehaving
players.</p><p>As always, the tests are well-formed and valid JSON.</p><p><div class="SIntrapara">Here are the new JSON data definitions:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">A </span><a name="(tech._playerinstance)"></a><span style="font-style: italic">PlayerInstance</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is a JSON array of two values:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[</span><a href="8.html#%28tech._playername%29" class="techoutside" data-pltdoc="x"><span class="techinside">PlayerName</span></a><span class="stt">, </span><a href="8.html#%28tech._strategy%29" class="techoutside" data-pltdoc="x"><span class="techinside">Strategy</span></a><span class="stt">]</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">INTERPRETATION The JSON array specifies the construction of a player</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">from the mechanism (of </span><a href="6.html" data-pltdoc="x">6 &#8212;<wbr></wbr> Games!</a><span class="stt">) and a strategy (</span><a href="5.html" data-pltdoc="x">5 &#8212;<wbr></wbr> The Strategy</a><span class="stt">)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">A </span><a name="(tech._strategy)"></a><span style="font-style: italic">Strategy</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is one of the following three JSON strings:</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">- "Hold-10"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">- "Buy-Now"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">- "Cheat"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">INTERPRETATION The string dictates to the test harness which strategy to load</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">into which player. See below for some more details.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">A </span><a name="(tech._playername)"></a><span style="font-style: italic">PlayerName</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is a non-empty String of maximally 50</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">lower- or upper-case alphabetical chars ([A-Za-z]).</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">A </span><a name="(tech._ranking)"></a><span style="font-style: italic">Ranking</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is an array of </span><a href="8.html#%28tech._rank%29" class="techoutside" data-pltdoc="x"><span class="techinside">Rank</span></a><span class="stt">s.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">INTERPRETATION The </span><span class="emph">i</span><span class="stt">th array contains the </span><a href="8.html#%28tech._playername%29" class="techoutside" data-pltdoc="x"><span class="techinside">PlayerName</span></a><span class="stt">s of all</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">i</span><span class="stt">th-place finishers. </span><span style="color: purple">An <span class="emph">i</span>th-place finisher is a player
that has the <span class="emph">i</span>th-highest score.</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span style="color: purple">CONSTRAINT The last <a href="8.html#%28tech._rank%29" class="techoutside" data-pltdoc="x"><span class="techinside">Rank</span></a> in a <a href="8.html#%28tech._ranking%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ranking</span></a> corresponds to
the last-place finisher.</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">A </span><a name="(tech._rank)"></a><span style="font-style: italic">Rank</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is a JSON array of </span><a href="8.html#%28tech._playername%29" class="techoutside" data-pltdoc="x"><span class="techinside">PlayerName</span></a><span class="stt">s sorted according</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">to </span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3c~3f%29%29" class="RktValLink" data-pltdoc="x">string&lt;?</a></span><span class="stt">.</span></p></td></tr></table></div><div class="SIntrapara">The test harness must turn the string into a file path to <span class="emph">dynamically</span>
load an instance of a strategy class | function | module. It must <span class="emph">not</span>
hard-wire connections to the strategies.<span class="refelem"><span class="refcolumn"><span class="refcontent"><span style="font-weight: bold">Pedagogy</span> We want to
practice the construction of dynamically extensible systems.</span></span></span></div></p><p>The <span class="emph">Cheat</span> strategy is like the <span class="emph">Buy-Now</span> strategy but attempts to
acquire a non-existent connection the very first time a player is granted a
turn. You need to implement it and place it into your <span class="stt">Trains/Player</span> folder.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="manager_protocol.html" title="backward to &quot;Logical Interactions 2&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>