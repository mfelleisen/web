<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>10 --- This is it!</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Software Development</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="new_lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="staff.html" class="tocviewlink" data-pltdoc="x">Staff</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Communicate</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="reviews.html" class="tocviewlink" data-pltdoc="x">In-<wbr></wbr>Class Reviews</a></td></tr><tr><td align="right"></td><td><a href="projects.html" class="tocviewlink" data-pltdoc="x">Assignments, Overview</a></td></tr><tr><td align="right"></td><td><a href="delivery.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Delivery</a></td></tr><tr><td align="right"></td><td><a href="make.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Make</a></td></tr><tr><td align="right"></td><td><a href="readme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Read Me</a></td></tr><tr><td align="right"></td><td><a href="testme.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Test Me</a></td></tr><tr><td align="right"></td><td><a href="debugging.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Debugging</a></td></tr><tr><td align="right"></td><td><a href="late.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Late Policy</a></td></tr><tr><td align="right"></td><td><a href="grades.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Code Grades</a></td></tr><tr><td align="right"></td><td><a href="projects2.html" class="tocviewlink" data-pltdoc="x">Assignments, Actual</a></td></tr><tr><td align="right"></td><td><a href="tahbpl.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>TAHBPL</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">&#8212;<wbr></wbr>Project Milestones</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="trains.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">The Game:<span class="mywbr"> &nbsp;</span> Trains</span></a></td></tr><tr><td align="right"></td><td><a href="plan.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Trains</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> The Analysis</a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> The Map</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> The Image</a></td></tr><tr><td align="right"></td><td><a href="4.html" class="tocviewlink" data-pltdoc="x">4 &#8212;<wbr></wbr> The Game State</a></td></tr><tr><td align="right"></td><td><a href="5.html" class="tocviewlink" data-pltdoc="x">5 &#8212;<wbr></wbr> The Strategy</a></td></tr><tr><td align="right"></td><td><a href="local_protocol.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a></td></tr><tr><td align="right"></td><td><a href="6.html" class="tocviewlink" data-pltdoc="x">6 &#8212;<wbr></wbr> Games!</a></td></tr><tr><td align="right"></td><td><a href="partner1.html" class="tocviewlink" data-pltdoc="x"><span style="color: blue">Howdy Pardner</span></a></td></tr><tr><td align="right"></td><td><a href="7.html" class="tocviewlink" data-pltdoc="x">7 &#8212;<wbr></wbr> The Clean Up</a></td></tr><tr><td align="right"></td><td><a href="manager_protocol.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Logical Interactions 2</span></a></td></tr><tr><td align="right"></td><td><a href="8.html" class="tocviewlink" data-pltdoc="x">8 &#8212;<wbr></wbr> The League</a></td></tr><tr><td align="right"></td><td><a href="partner2.html" class="tocviewlink" data-pltdoc="x"><span style="color: blue">Howdy Pardner, Again</span></a></td></tr><tr><td align="right"></td><td><a href="remote.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Remote Interactions</span></a></td></tr><tr><td align="right"></td><td><a href="9.html" class="tocviewlink" data-pltdoc="x">9 &#8212;<wbr></wbr> Help!</a></td></tr><tr><td align="right"></td><td><a href="10.html" class="tocviewselflink" data-pltdoc="x">10 &#8212;<wbr></wbr> This is it!</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="10.html" class="tocviewselflink" data-pltdoc="x">10 &#8212;<wbr></wbr> This is it!</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.3.0.5</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="9.html" title="backward to &quot;9 --- Help!&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h4><a name="(part._10)"></a>10 &#8212;<wbr></wbr> This is it!</h4><a name="(part._chap~3a10)"></a><p><span style="color: blue">Due</span> Thursday, 02 December 2021, 11:59.59pm</p><p><span style="color: blue">Delivery</span> Place the product of this week&rsquo;s milestone into your repo as follows:</p><ul><li><p>for the Programming Task, place all code in the <span class="stt">Remote/</span> directory, a new folder in <span class="stt">Trains/</span>;</p><p>If you modify other pieces of code, describe these modifications in a separate
section in a README file for this new folder. Use links to point to the
git-commit changes and justify each of them with a one-liner.</p></li><li><p>for the Runnables Task, place all code in a repo-level directory named <span class="stt">10</span></p></li></ul><p><span style="color: blue">Programming Task</span> It is time to complete phase 3 of our <a href="plan.html" data-pltdoc="x"><span style="color: red">Trains</span><span class="stt">.</span><span style="color: red">Com</span>, <span style="color: red">a Plan</span></a>. A
complete distributed prototype will allow our angel investors to understand the
complete idea. They can then provide feedback on how we can make this enterprise
even more profitable.</p><p>Your software architect has derived a specification for the <a href="remote.html" data-pltdoc="x"><span style="color: red">Remote Interactions</span></a> from
the <a href="local_protocol.html" data-pltdoc="x"><span style="color: red">Logical Interactions</span></a>/<a href="manager_protocol.html" data-pltdoc="x"><span style="color: red">2</span></a>. The new specification
includes a sign-up step.</p><p>Your task is to implement this server-client architecture.  At this moment,
your code base contains almost all the components needed for completing this
task. <span class="refelem"><span class="refcolumn"><span class="refcontent">When you touch complex software, you are likely to
<span class="emph">enbug</span> it. So don&rsquo;t touch the logical components if you can avoid it.</span></span></span>  The OOD
patterns community teaches us that remote proxies are your friends here. They
allow developers to inject a remote-communication layer into a software system
while leaving the logical parts of a software system undisturbed.</p><p>The <span class="emph">client</span> TCP-connects a player (or several players) to a server.</p><p>The <span class="emph">server</span> waits for TCP connections for some time (here, 20)s for a minimum number (here, 5) of remote clients to connect. As long as there
isn&rsquo;t this minimum number of clients connected at the end of a waiting period,
the server re-enters the waiting state (just once) and for the same amount of
time; the second time around it will run a tournament if only 2 sign up.  Either waiting period also ends when the server has
accepted a maximal number (here, 50)
of client connections; this limit makes the duration of a tournament reasonable.
If <span class="emph">at most one player</span> signs up by the end of the second waiting period,
the server doesn&rsquo;t run a tournament and instead delivers a simple default
result: <span class="hspace">&nbsp;</span><span class="stt">[ [], [] ]</span>.</p><p>A <span class="emph">server-client</span> connection is established after the client has supplied
the player&rsquo;s name.</p><p>If a sufficient number of clients establish a connection, the server hands them
to the manager.  When the manager&rsquo;s work is done, your server delivers the
manager&rsquo;s results as a JSON value to <span class="stt">STDOUT</span>.</p><p><span style="color: blue">Communication</span> To make this exercise slightly realistic, each side of the
server-client architecture must protect itself against ill-formed or invalid
<a href="https://www.json.org">JSON</a> messages from the other side. This is especially true for the server
component, because a service should not collapse just because a client sends a
bad message. The client-side component could in principle rely on the
server-side component to send well-formed and valid <a href="https://www.json.org">JSON</a> messages, but it&rsquo;s
better to be safe than sorry (think of the huge fee a client-creator pays to
participate in Trains tournaments).</p><p><span style="color: blue">Misbehaving Players</span> In a distributed setting, all bad client behavior
turns into bad JSON messages or a lack of a response. Make sure to protect all
the interactions (<span style="color: purple">that is, remote calls and returns</span>) between the
server and clients by timing out connections after 2.0 seconds.</p><p><div class="SIntrapara"><span style="color: blue">Runnables Task</span> Construct two executable programs:
</div><div class="SIntrapara"><ul><li><p><span class="stt">xserver</span>, which starts your server, and</p></li><li><p><span class="stt">xclients</span>, which launches a number of clients and points them to a server.</p></li></ul></div></p><p>Both programs are launched with a port argument on the command line. For
<span class="stt">xclients</span>, the command line may also specify an IP address, as an optional
second argument; the default is local host (<span class="stt">127.0.0.1</span>.</p><p>Their inputs&#8212;<wbr></wbr>both <span class="stt">xserver</span> and <span class="stt">xclients</span>&#8212;<wbr></wbr>are the same as those for
<span class="stt">xref</span> from <a href="8.html" data-pltdoc="x">8 &#8212;<wbr></wbr> The League</a> (and the optional <span class="stt">xmanager</span> from <a href="9.html" data-pltdoc="x">9 &#8212;<wbr></wbr> Help!</a>).  The
inputs have the same interpretation, though <span class="stt">xserver</span> uses only the colored
cards part to configure the manager, while <span class="stt">xclients</span> uses the first two JSON
values to create clients. Again, all client-players send the given map to the
manager.</p><p>As with the tests, these configuration files are well-formed and valid JSON.</p><p>The output of <span class="stt">xserver</span> is either the JSON string "error: not enough destinations" or the outcome of
running the tournament. The latter consists of a JSON array that contains two
<a href="8.html#%28tech._rank%29" class="techoutside" data-pltdoc="x"><span class="techinside">Rank</span></a>s: the first contains the names of the winner(s) and the second
contains the names of the misbehaving players. The test bed compares this actual
output to the expected output of test cases.&#8212;<wbr></wbr>The test bed waits for a generous
80s <span class="stt">(+ (* 2 (~a [hash-ref DEFAULT-CONFIG SERVER-WAIT])) 40)</span>s for the server
to print this result, i.e., the span of two waiting periods plus 40s for running
the tournament.</p><p>The test bed ignores the output of <span class="stt">xclients</span>.</p><p><span style="font-weight: bold">Note</span> You could write <span class="stt">xclients</span> as a shell script. If your language
supports threads, you should write it in that language. In any case, you do want
to spawn the clients as parallel programs to mimic a distributed setting as much
as possible using a single machine.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="9.html" title="backward to &quot;9 --- Help!&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;---Project Milestones&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>