<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>8 --- Model vs Reality</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="figure.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Principles of Programming Languages</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Email, Office Hours, Etc.</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="reviews.html" class="tocviewlink" data-pltdoc="x">In-<wbr></wbr>Class Reviews</a></td></tr><tr><td align="right"></td><td><a href="delivery.html" class="tocviewlink" data-pltdoc="x">Delivery</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">Assignments</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="json.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">JSON:<span class="mywbr"> &nbsp;</span> Simplicity and Complexity</span></a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> JSON, Design</a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> Static Distance, Simple Interpretation</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> Abstract Syntax, Compilation</a></td></tr><tr><td align="right"></td><td><a href="4.html" class="tocviewlink" data-pltdoc="x">4 &#8212;<wbr></wbr> Interpreting Functions</a></td></tr><tr><td align="right"></td><td><a href="5.html" class="tocviewlink" data-pltdoc="x">5 &#8212;<wbr></wbr> Simple Mutable Objects</a></td></tr><tr><td align="right"></td><td><a href="6.html" class="tocviewlink" data-pltdoc="x">6 &#8212;<wbr></wbr> Type Checking</a></td></tr><tr><td align="right"></td><td><a href="7.html" class="tocviewlink" data-pltdoc="x">7 &#8212;<wbr></wbr> Type Sound Interpretation</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">8 &#8212;<wbr></wbr> Model vs Reality</a></td></tr><tr><td align="right"></td><td><a href="9.html" class="tocviewlink" data-pltdoc="x">9 &#8212;<wbr></wbr> CPS</a></td></tr><tr><td align="right"></td><td><a href="10.html" class="tocviewlink" data-pltdoc="x">10 &#8212;<wbr></wbr> Control</a></td></tr><tr><td align="right"></td><td><a href="11.html" class="tocviewlink" data-pltdoc="x">11 &#8212;<wbr></wbr> CESK</a></td></tr><tr><td align="right"></td><td><a href="12.html" class="tocviewlink" data-pltdoc="x">12 &#8212;<wbr></wbr> Garbage Collection</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">8 &#8212;<wbr></wbr> Model vs Reality</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.6.0.19</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="7.html" title="backward to &quot;7 --- Type Sound Interpretation&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="9.html" title="forward to &quot;9 --- CPS&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4><a name="(part._8)"></a>8 &#8212;<wbr></wbr> Model vs Reality</h4><a name="(part._chap~3a8)"></a><p><span style="font-weight: bold">Due</span> Friday, 13 March, 6am  ~~ Note the shift in due date.</p><p>The <span style="color: red">purpose</span> of this homework problem is to relate <span class="emph">your model</span> of
programming language concepts to the reality of <span class="emph">your</span> chosen
programming language.</p><p><span style="color: red">Warning</span> This assignment requires planning ahead. Starting on
Wednesday or Thursday after spring break won&rsquo;t do.  In terms of labor, this
assignment should demand about as much as one of the prior heavy-load
assignments.</p><h4><a name="(part._.Background)"></a>Background</h4><p><div class="SIntrapara">Scientists develop models of aspects of nature: the motion of planets and
airplanes; the interaction of atoms and molecules; the workings of a cell;
the weather; the climate; and so on. In this context, the point of a model
is to predict the behavior of the relevant aspect of nature, to answer
questions about it, e.g.,
</div><div class="SIntrapara"><ul><li><p>where will Venus be in the sky at midnight on 4 July 2020?</p></li><li><p>how does oxygen combine with two hydrogen atoms to form a water molecule?</p></li><li><p>what role does messenger RNA play?</p></li><li><p>will it rain tomorrow?</p></li><li><p>what will be the average temperature in the year 2020? (asked in
2010<span class="refelem"><span class="refcolumn"><span class="refcontent">It is amazing how <a href="https://felleisen.org/matthias/Articles/climate-change-dod-2004.pdf">wrong</a> they were.</span></span></span>)</p></li></ul></div><div class="SIntrapara">A good model delivers accurate and precise predictions, say the model of
planet movements, or accurate prediction intervals with a confidence level,
say, climate predictions. Neither kind of model is worth anything if it
doesn&rsquo;t come with &ldquo;precision statement&rdquo; or &ldquo;confidence intervals.&rdquo; If a
model is no good, scientists observe and adjust.</div></p><p><div class="SIntrapara">Engineers design artifacts (subject to economic constraints) via the
construction of models: planes, trains, cars, dams, houses, etc.  When people
(workers, plant engineers) then build the artifact, they consult the model
and measure the relevant properties of the artifact to ensure the latter
satisfies all of the constraints of the former. For example,
</div><div class="SIntrapara"><ul><li><p>the curvature of the aircraft wing</p></li><li><p>the force on connectors between train cars</p></li><li><p>the engine&rsquo;s horsepower</p></li><li><p>the dam&rsquo;s holding capacity</p></li><li><p>the slope of the house&rsquo;s roof</p></li></ul></div><div class="SIntrapara">A well-built artifact measures up to the model within small
tolerances. If an artifact does not measure up to the model, people change
the artifact until it does.</div></p><p>Your goal is to measure <span class="emph">your interpreter&rsquo;s</span> ability to predict
<span class="emph">your chosen language&rsquo;s</span> behavior within certain tolerances.</p><h4><a name="(part._.Delivery)"></a>Delivery</h4><p> Deliver your solutions in a folder called <span class="stt">8</span> in your
github repo:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">8/</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">xtranslate</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">memo.md</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Other/</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">ITests/</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">make_exe</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Prelude/</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[Makefile]</span></p></td></tr></table></div><div class="SIntrapara">A name ending in <span class="stt">/</span> is a folder, and indentation means &ldquo;contained in the
closest folder listed above the current name.&rdquo;</div></p><h4><a name="(part._.Programming_.Task)"></a>Programming Task</h4><p>&ldquo;Measuring&rdquo; the accuracy of a model is a non-trivial task. Since you have
an executable model&#8212;<wbr></wbr>the interpreter&#8212;<wbr></wbr>the best way to measure it is to
run both your model and your programming language on the same test cases.
The problem is that the inputs to your models are JSON &ldquo;thingies&rdquo; and the
inputs to your compiler are &ldquo;real&rdquo; programs. Fortunately, the problem is
easily solvable because every <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> expression has a rather
straightforward transliteration to a program in one of your chosen
languages.</p><p><div class="SIntrapara"><span style="font-weight: bold">Task 1</span> The translations from <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> to your chosen language
will rely on a prelude library. Depending on your language, this prelude
may have to contain a number of definitions but in all likelihood it will
contain a definition of <span class="stt">Cell</span> to implement <span class="stt">@</span>, <span class="stt">!</span>, and
<span class="stt">=</span>. For example, the Java prelude may contain the following:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">class Cell&lt;T&gt; {</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">private T c;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Cell(T c) { this.c = c; }</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">T retrieve() { return c; }</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">T assign(T nu) { T tmp = c; this.c = nu; return tmp; }</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr></table></div><div class="SIntrapara">Place the prelude into the <span class="stt">ITests/</span> directory in a <span class="stt">Prelude/</span>
sub-folder.</div></p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict_65.png" alt="image" width="362.40000000000003" height="455.46000000000004"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3acompare))" x-target-lift="Figure"></a>Figure&nbsp;100: </span>Comparing language implementations and models</span></p></blockquote><p><span style="font-weight: bold">Task 2</span> Design a <a href="https://howtodoinjava.com/typescript/transpiler-vs-compiler/">&ldquo;transpiler&rdquo;</a> from <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> to
your chosen programming language.  The given <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> program is of type
<span class="RktVal">"int"</span>. When run, the generated output
program&#8212;<wbr></wbr>linked to your <span class="stt">Prelude/</span>&#8212;<wbr></wbr>must display the same output
as the interpretation of the given <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> expression.  See
<a href="#%28counter._%28figure._fig~3acompare%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">100</span></a> for a diagrammatic overview of the idea.</p><p><span style="font-weight: bold">Hint</span> Those of you whose transpiler outputs <span class="emph">typed</span> code may
wish to start from the type checker from <a href="6.html" data-pltdoc="x">6 &#8212;<wbr></wbr> Type Checking</a>, add the code &ldquo;cheap
polymorphism,&rdquo; and translate from there&#8212;<wbr></wbr>after type checking. If your
transpiler targets <span class="emph">untyped</span> code, you just want to strip those
types. Before you re-use your code, make sure to address all failures.</p><p><span style="color: red">Your generated code may </span> <span class="emph"><span style="color: red">not</span></span> <span style="color: red">call your </span>
 <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside"><span style="color: red">XPAL</span></span></a> <span style="color: red">interpreter.</span></p><p>The translation may include lines that make the generated program easily
runnable. For example, a transpiler from <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> to Typed Racket may
generate the following output (regardless of input)</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">#! /bin/sh</span></td></tr><tr><td><span class="stt">#| -*- racket -*-</span></td></tr><tr><td><span class="stt">exec racket -t</span></td></tr><tr><td><span class="stt">|#</span></td></tr><tr><td><span class="stt">#lang racket</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._displayln%29%29" class="RktValLink" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Note that this output is guaranteed to be wrong for all test cases <span class="stt">:-)</span>.</div></p><p><span style="font-weight: bold">Task 3</span> We have placed 197 <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a> integration tests for
<a href="7.html" data-pltdoc="x">7 &#8212;<wbr></wbr> Type Sound Interpretation</a> in <a href="https://github.ccs.neu.edu/CS4400-S20/collected-tests">a shared repository</a> for you to peruse.  Your
task is to run these test cases through your transpiler (<span style="color: purple">if they
are of type int</span>), generate the executables with the help of your
<span class="stt">make_exe</span> <span style="color: purple">script</span> <span class="strike" style="text-decoration:line-through"><span class="stt">Makefile</span></span> (see below), and
compare every result with the one that the interpreter produces. For every
chosen language, it should be <span style="color: purple">easily</span> possible to get an 80&ndash;90%
agreement rate easily, given interpreters that pass the tests. Once you
have achieved a good agreement rate, evaluate the failures.</p><p><div class="SIntrapara">Turn your evaluation into a memo (markdown style) of at most two pages. The
memo must report the agreement rate and must classify the failures
according to the following schema:
</div><div class="SIntrapara"><ul><li><p>some aspect of the model is inappropriate for your chosen programming
language</p></li><li><p>the combination of transpiler and language implementation (compiler
or interpreter for your chosen language) cannot properly cope with this input</p></li></ul></div><div class="SIntrapara">For each class of failure, list all failing test cases and articulate a
reason why they fit into this categroy. Writing &ldquo;given more time, our
transpiler would be perfect&rdquo; is <span class="emph">not</span> a reason. Ditto for &ldquo;our
model is totally broken.&rdquo; By contrast, &ldquo;there is absolutely no big-int
package for our chosen language&rdquo; would be a good reason&#8212;<wbr></wbr>if it were true.</div></p><p>Place it in <span class="stt">8/</span> and call it <span class="stt">memo.md</span>.</p><h4><a name="(part._.Testing_.Task)"></a>Testing Task</h4><p> Develop the test harness generator <span class="stt">xtranslate</span>. The
executable consumes an <span class="RktSym">XPAL</span> expression and generates a program in your
chosen programming language. The generated program may refer to the files in
<span class="stt">Prelude/</span>. <span style="color: purple">As always, the test harness consumes</span> <a href="7.html#%28tech._xpal%29" class="techoutside" data-pltdoc="x"><span class="techinside">XPAL</span></a>
<span style="color: purple"> programs from </span><span class="stt">STDIN</span> <span style="color: purple">and sends its translation to</span><span class="stt">STDOUT</span>.</p><p>Our test framework will supply the public test inputs plus ten extras.  It
will place the generated programs in <span class="stt">ITests/</span> as <span style="font-style: italic">n</span><span class="stt">.in</span> for
some natural number <span style="font-style: italic">n</span>.</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">You may wish to (re)read <a href="delivery.html#%28part._make%29" data-pltdoc="x">Make</a>.</span></span></span>  Place a simple bash
script called <span class="stt">make_exe</span> into <span class="stt">ITests/</span>. The script creates executables
from <span class="emph">all</span> generated programs in this directory. For a file named
<span style="font-style: italic">n</span><span class="stt">.in</span>, the script generates an executable called <span style="font-style: italic">n</span>.
The <span class="stt">script</span> may simply copy and <span class="stt">chmod</span> the existing files so that
they become executable. Or, it may run a compiler such as <span class="stt">javac</span> on
the files and redirect the output to the appropriate file.</p><p>You may place an optional <span class="stt">Makefile</span> into <span class="stt">ITests/</span> in support of
<span class="stt">make_exe</span>.</p><p>Once your executables exist, our test framework will run all of them and
compare the output printed to <span class="strike" style="text-decoration:line-through">STDIN</span>  <span style="color: purple">STDOUT</span> with the expected output.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="7.html" title="backward to &quot;7 --- Type Sound Interpretation&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="9.html" title="forward to &quot;9 --- CPS&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>