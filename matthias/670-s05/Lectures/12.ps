%!PS-Adobe-2.0
%%Creator: dvips(k) 5.92b Copyright 2002 Radical Eye Software
%%Title: 12.dvi
%%Pages: 17
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Palatino-Bold Palatino-Roman Courier Palatino-Italic
%%+ CMSY10
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips 12.dvi -o -t letter
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2005.02.24:1729
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% File  8r.enc as of 2002-03-12 for PSNFSS 9
%
% This is the encoding vector for Type1 and TrueType fonts to be used
% with TeX.  This file is part of the PSNFSS bundle, version 9
% 
% Authors: S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry, W. Schmidt
%
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida + Euro.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (6) /Euro is assigned to 128, as in Windows ANSI
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /Euro /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: bbad153f.enc
% Thomas Esser, Dec 2002. public domain
%
% Encoding for:
%     cmsy10 cmsy5 cmsy6 cmsy7 cmsy8 cmsy9
%
/TeXbbad153fEncoding [
/minus /periodcentered /multiply /asteriskmath /divide /diamondmath
/plusminus /minusplus /circleplus /circleminus /circlemultiply
/circledivide /circledot /circlecopyrt /openbullet /bullet
/equivasymptotic /equivalence /reflexsubset /reflexsuperset /lessequal
/greaterequal /precedesequal /followsequal /similar /approxequal
/propersubset /propersuperset /lessmuch /greatermuch /precedes /follows
/arrowleft /arrowright /arrowup /arrowdown /arrowboth /arrownortheast
/arrowsoutheast /similarequal /arrowdblleft /arrowdblright /arrowdblup
/arrowdbldown /arrowdblboth /arrownorthwest /arrowsouthwest /proportional
/prime /infinity /element /owner /triangle /triangleinv /negationslash
/mapsto /universal /existential /logicalnot /emptyset /Rfractur /Ifractur
/latticetop /perpendicular /aleph /A /B /C /D /E /F /G /H /I /J /K
/L /M /N /O /P /Q /R /S /T /U /V /W /X /Y /Z /union /intersection
/unionmulti /logicaland /logicalor /turnstileleft /turnstileright
/floorleft /floorright /ceilingleft /ceilingright /braceleft /braceright
/angbracketleft /angbracketright /bar /bardbl /arrowbothv /arrowdblbothv
/backslash /wreathproduct /radical /coproduct /nabla /integral
/unionsq /intersectionsq /subsetsqequal /supersetsqequal /section
/dagger /daggerdbl /paragraph /club /diamond /heart /spade /arrowleft
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/minus /periodcentered /multiply /asteriskmath /divide /diamondmath
/plusminus /minusplus /circleplus /circleminus /.notdef /.notdef
/circlemultiply /circledivide /circledot /circlecopyrt /openbullet
/bullet /equivasymptotic /equivalence /reflexsubset /reflexsuperset
/lessequal /greaterequal /precedesequal /followsequal /similar
/approxequal /propersubset /propersuperset /lessmuch /greatermuch
/precedes /follows /arrowleft /spade /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 0 /.notdef put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
/UniqueID 5000820 def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC57036431151EC603C8BCFE359BBD953AD
5F3D998C6EE18EABCDD31D35C7E933DEA008418A4F0845FC9A361328AB270359
C974485C9BCBCB1E9EBBF3ACC647C4108F7E05961E22390303FD667A2294F500
7A085C40786116C59F97FE351043D6C6AF0AB57A0804B53B848FA5BC84A53434
B87D8E893EBE38E4B39F5CAC2A1B569ABB348956D170241B5E28B3F9666B1D2F
18D0B5389F46253E0201552C115A8D43398082AE7ACEA6A82094D25CA04CF7A3
6C93AA21259CB14658989D252EC87D788F4ACA3B870B4B1ED81410FED7B61821
ECE58ECCEF77D9E9CC6D490A44A23C954EC973EEA26F2E108E41A658190A00AF
99D83BFBF9D5FDE77AC30FEF0BF6FE0E6528ADAE9329227254FC7CAAEE66BFFC
388049AA8D545376B832B638766F055E603B2724BE54563B1F8D5ECDE1A5C7BE
ACCC1D88BF18BA14F8557CEA5F085E21C3AE820F133126E05FD1499B6C0C4228
896C69CED01490918BED987F
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (12.dvi)
@start /Fa 199[51 40[45 15[{ TeXbbad153fEncoding ReEncodeFont }2
90.9091 /CMSY10 rf /Fb 141[35 2[40 8[25 35 2[42 98[{
 TeXBase1Encoding ReEncodeFont }5 90.9091 /Palatino-Italic
rf /Fc 166[61 2[66 71 56 48 61 71 55 71 76 86 56 2[31
76 69 51 56 70 64 56 71 8[45 45 45 45 45 45 45 4[30 45[{
 .167 SlantFont TeXBase1Encoding ReEncodeFont }29 90.9091
/Palatino-Roman rf /Fd 134[51 3[56 30 40 35 1[56 51 56
1[30 2[30 56 51 35 45 56 2[45 9[91 2[61 1[66 3[76 4[35
1[76 5[71 6[23 7[45 45 7[30 30 40[{ TeXBase1Encoding ReEncodeFont }28
90.9091 /Palatino-Bold rf /Fe 119[55 10[55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 1[55 1[55 55 55 1[55 55 55 1[55 55
55 55 55 55 55 55 1[55 2[55 1[55 1[55 55 55 1[55 55 55
55 55 55 55 55 55 2[55 1[55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 1[55 1[55 55 33[{ TeXBase1Encoding ReEncodeFont }79
90.9091 /Courier rf /Ff 104[91 2[45 25[45 51 47 76 51
55 30 39 36 51 55 50 53 80 26 51 21 26 53 51 30 44 56
40 50 45 3[30 1[30 3[91 1[71 56 48 61 1[55 71 76 86 56
66 30 31 76 69 51 56 70 64 56 71 1[40 3[23 23 45 45 45
45 45 45 45 45 45 45 55 23 30 23 55 35 30 30 25 3[45
31[55 55 2[{ TeXBase1Encoding ReEncodeFont }76 90.9091
/Palatino-Roman rf /Fg 139[57 76 67 2[96 105 4[57 3[86
105 76 1[86 29[124 1[134 65[{ TeXBase1Encoding ReEncodeFont }12
172.188 /Palatino-Bold rf /Fh 134[66 2[66 73 40 53 47
73 73 66 73 106 40 2[40 73 66 47 60 73 53 73 60 7[80
2[93 1[80 73 2[73 2[120 3[47 2[66 1[100 86 80 93 8[60
60 60 60 60 60 60 60 3[40 45[{ TeXBase1Encoding ReEncodeFont }42
119.552 /Palatino-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
letter
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 448 573 a Fh(Part)29 b(I)448 780
y Fg(Assertions)45 b(and)f(Contracts)448 1058 y Fh(1)120
b(T)-11 b(ypes)30 b(are)f(Y)-9 b(our)30 b(Friends)448
1269 y Ff(A)k(type)f(checker)g(is)h(a)g(theor)n(em)f(pr)n(over)-7
b(.)62 b(As)33 b(it)h(crawls)h(over)f(your)f(pr)n(ogram,)j(it)448
1382 y(con\002rms)27 b(your)f(claims)i(about)f(your)f(functions)h(and)f
(variables)j(once)d(and)h(for)g(all.)448 1495 y(Example:)503
1707 y Fe(...)503 1820 y(int)53 b(f\(long)f(x\))h({)557
1933 y(return)f(...)h(x)h(...;)503 2046 y(})503 2159
y(...)589 2371 y Ff(When)22 b(the)g(Java)j(type)c(checker)h(checks)g
(the)f(pr)n(ogram)i(that)f(contains)h(this)f(code)448
2484 y(fragment,)g(it)h(con\002rms)f(two)g(of)h(your)f(claims:)562
2672 y(1.)46 b(when)21 b Fe(f)i Ff(r)n(eceives)f(a)h(value)h(for)e
Fe(x)p Ff(,)g(it)h(is)g(an)562 2859 y(2.)46 b(if)23 b
Fe(f)f Ff(pr)n(oduces)f(a)j(value,)f(it)f(is)h(an)g(element)f(of)h(the)
e(class)i(of)g Fe(int)e Ff(integers.)448 3047 y(While)g(these)d(facts)i
(don't)f(r)n(epr)n(esent)f(much)j(of)f(the)f(knowledge)f(that)h(went)g
(into)h(the)448 3160 y(pr)n(oduction)h(of)g(the)f(pr)n(ogram,)i(it)f
(is)g(still)h(mor)n(e)g(than)f(testing)f(could)h(ever)g(establish.)448
3273 y(After)h(all,)i(testing)d(can)i(only)g(con\002rm)f(a)i(\002nite)e
(number)g(of)h(facts)g(about)g Fe(f)p Ff(.)589 3386 y(Knowledge)d(like)
h(this)g(comes)g(in)h(handy)f(when)f(you)h(ar)n(e)h(looking)e(for)h
(err)n(ors)g(in)448 3499 y(your)28 b(pr)n(ogram.)45 b(As)27
b(you)h(inspect)f(your)h(pr)n(ogram)g(for)g(potential)g(pr)n(oblems,)h
(you)448 3612 y(do)d(not)g(have)h(to)f(r)n(e-con\002rm)h(that)f
Fe(f)h Ff(maps)f Fe(long)p Ff(s)f(to)h Fe(int)p Ff(s;)g(you)g(may)h
(assume)f(it)448 3725 y(as)d(a)g(given.)589 3837 y Fd(W)-8
b(ARNING:)22 b Ff(The)g(above)i(is)f(only)g(tr)o(ue)f(for)h(pr)n(ogram)
g(languages)g(with)g(sound)448 3950 y(type)k(systems.)44
b(Examples)28 b(of)h(such)f(languages)g(ar)n(e)h(Java,)i(ML,)d(and)h
(Haskell.)46 b(In)448 4063 y(contrast,)24 b(C)g(and)h(C++)f(do)g(not)f
(have)i(sound)e(type)f(systems;)h(a)h(function)g(such)g(as)h
Fe(f)448 4176 y Ff(can)d(always)f(consume)f(a)h(bit)g(pattern)e(that)i
(corr)n(esponds)d(to)i(a)h(\(portion)f(of)h(a)g(string\))448
4289 y(and)30 b(pr)n(oduce)e(a)h(\(portion)g(of)g(a\))h(bit)g(pattern)e
(fr)n(om)h(a)h(str)o(uctur)n(e.)47 b(Hence,)29 b(when)g(a)448
4402 y(C/C++)24 b(pr)n(ogram)f(br)n(eaks,)f(you)f(may)i(not)f(assume)g
(anything)g(is)h(corr)n(ect.)589 4515 y(In)33 b(the)f(ideal)h(world,)h
(we)e(should)g(ther)n(efor)n(e)f(expr)n(ess)g(everything)g(we)h(know)
448 4628 y(about)19 b(our)f(pr)n(ogram)g(in)h(the)f(type)f(system.)24
b(Then,)19 b(as)f(the)g(type)f(checker)h(blesses)f(the)448
4741 y(pr)n(ogram,)k(it)h(would)f(con\002rm)g(that)g(the)g(pr)n(ogram)g
(r)o(uns)g(corr)n(ectly)g(for)g(ever)-7 b(.)27 b(Unfor)n(-)448
4854 y(tunately)-10 b(,)27 b(this)g(is)h(impossible)f(in)g(the)g
(abstract)g(\(if)i(we)d(wish)h(to)g(have)g(terminating)p
eop end
%%Page: 2 2
TeXDict begin 2 1 bop 448 274 a Fc(2)92 b(ASSER)m(TIONS)2244
b Ff(2)448 573 y(type)18 b(checkers\))g(and)g(in)i(the)e(concr)n(ete;)h
(the)f(type)f(languages)h(of)h(pr)n(ogramming)g(lan-)448
686 y(guages)i(ar)n(e)i(just)f(not)g(expr)n(essive)f(enough.)589
799 y(Consider)h(this)g(example:)503 1011 y Fe(prime)52
b(h\(prime)f(x\))j({)557 1124 y(return)e(...)h(x)h(...)503
1237 y(})448 1450 y Ff(This)32 b(code)f(fragment)h(speci\002es)f(that)h
Fe(h)f Ff(consumes)g(and)h(pr)n(oduces)f(prime)h(num-)448
1562 y(bers.)27 b(No)21 b(curr)n(ent)g(type)f(language)h(supports)e(a)k
Fe(prime)c Ff(type)h(at)i(the)e(moment,)h(and)448 1675
y(including)i(it)g(in)g(a)g(type)d(language)j(would)e(soon)h(r)o(un)g
(into)g(pr)n(oblems)g(with)h(the)e(un-)448 1788 y(decidable)f(theory)d
(of)i(arithmetic.)28 b(Thus,)18 b(even)h(though)e(such)i(function)g
(signatur)n(es)448 1901 y(would)26 b(be)g(highly)h(useful)e(in,)j(say)
-10 b(,)26 b(the)g(r)n(ealm)h(of)g(cryptography)-10 b(,)24
b(it)j(is)f(impossible)448 2014 y(to)c(state)g(such)g(facts)h(and)g(to)
f(have)h(them)f(con\002rmed)g(by)g(the)g(type)f(checker)-7
b(.)448 2313 y Fh(2)120 b(Assertions)448 2524 y Fd(\(T)-8
b(ypes)23 b(are)h(not)e(friendly)h(enough\))589 2637
y Ff(T)-8 b(o)17 b(over)n(come)g(this)f(de\002ciency)-10
b(,)18 b(we)e(need)g(to)h(generalize)g(the)f(language)h(of)g(types)448
2750 y(to)28 b(a)i(language)e(of)h(arbitrary)g(assertions.)45
b(Roughly)27 b(speaking,)i(an)g(assertion)f(is)h(a)448
2862 y(claim)36 b(about)d(the)g(values)h(in)g(our)f(computer)f(pr)n
(ograms)h(as)g(the)g(\(abstract\))i(com-)448 2975 y(puter)22
b(executes)g(them.)30 b(Historically)-10 b(,)23 b(people)f(have)i
(associated)f(stated)f(assertions)448 3088 y(about)h(pr)n(ogram)f
(variables.)30 b(Examples:)503 3301 y Fe(int)53 b(p;)h(//)f(p)h(is)g(a)
g(prime)e(number)589 3513 y Ff(or)503 3726 y Fe(int)h(x;)503
3839 y(...)503 3952 y(x)h(=)g(x)g(*)g(x;)g(//)f(x)i(is)e(now)g
(positive)503 4065 y(...)589 4277 y Ff(or)503 4490 y
Fe(Process)e(current;)503 4603 y(Queue[Process])d(q;)503
4716 y(...)503 4828 y(q.enq\(current\))o(;)503 4941 y(//)54
b(q)g(is)f(not)g(empty)p eop end
%%Page: 3 3
TeXDict begin 3 2 bop 448 274 a Fc(3)92 b(ASSER)m(TIONS)20
b(DESCRIBE)h(THE)g(BEHA)-10 b(VIOR)21 b(OF)i(PROGRAMS)386
b Ff(3)503 573 y Fe(runProcess\(q.d)o(eq\()o(\)\))o(;)503
686 y(//)54 b(warning:)c(q)k(might)f(be)g(empty)g(now)503
799 y(...)589 1011 y Ff(The)27 b(last)h(two)e(examples)h(also)h(show)e
(that)i(assertions)d(ar)n(e)j(established)e(as)i(the)448
1124 y(r)n(esult)34 b(of)h(executing)e(a)j(statement,)f(and)g(using)f
(assertions,)i(we)e(can)h(ar)n(gue)f(that)448 1237 y(code)23
b(fragments)g(will)j(execute)c(pr)n(operly)-10 b(.)30
b(Due)24 b(to)f(this)h(r)n(ole,)g(assertions)e(ar)n(e)i(often)448
1350 y(r)n(eferr)n(ed)e(to)g(as)h(pr)n(e-conditions)e(and)i
(post-conditions)d(\(of)j(statements\).)589 1463 y(Since)34
b(English)g(is)g(ambiguous)f(and)h(since)g(assertions)e(\(claims)k(of)d
(tr)o(uth\))h(ar)n(e)448 1576 y(the)22 b(elements)e(that)i(logic)h
(deals)f(with,)g(computer)f(scientists)f(quickly)j(adopted)d(the)448
1689 y(language)i(of)f(logic)i(to)e(expr)n(ess)e(facts.)28
b(Thus,)21 b(instead)g(of)g(the)g(above,)h(people)e(write:)503
1901 y Fe(//)54 b(forall)d(i)j(such)f(that)g(2)h($\\leq$)e(i)i(<)g(p,)
503 2014 y(//)g(&nbsp;)d(&nbsp;)h(&nbsp;)g(not[\(p)g(modulo)g(i\))h(=)h
(0])503 2127 y(int)f(p;)589 2340 y Ff(and)503 2552 y
Fe(int)g(x;)503 2665 y(...)503 2778 y(x)h(=)g(x)g(*)g(x;)g(//)f(x)i(>=)
e(0)503 2891 y(...)589 3103 y Ff(or)503 3316 y Fe(Process)e(current;)
503 3429 y(Queue[Process])d(q;)503 3542 y(...)503 3655
y(q.enq\(current\))o(;)503 3768 y(//)54 b(not[q.empty\(\)])503
3880 y(runProcess\(q.d)o(eq\()o(\)\))o(;)503 3993 y(//)g(WARNING:)c
(q.empty\(\))h(v)j(not[q.empty\(\)])503 4106 y(...)589
4319 y Ff(Next)22 b(people)g(formulated)g(r)o(ules)h(for)g(r)n
(easoning)f(about)h(pr)n(ogram)g(statements,)448 4432
y(especially)g(assignment)f(statements,)e(if)j(statements,)d(and)j
(loops.)448 4730 y Fh(3)120 b(Assertions)29 b(Describe)g(the)g
(Behavior)h(of)g(Programs)448 4941 y Ff(T)-8 b(ake)22
b(a)h(look)f(at)h(this)f(pr)n(ogram)h(fragment:)p eop
end
%%Page: 4 4
TeXDict begin 4 3 bop 448 274 a Fc(3)92 b(ASSER)m(TIONS)20
b(DESCRIBE)h(THE)g(BEHA)-10 b(VIOR)21 b(OF)i(PROGRAMS)386
b Ff(4)448 573 y Fe(int)54 b(x)g(=)g(0;)448 686 y(//)g(1:)g(x)g(=)g(0)
448 799 y(x)g(=)h(x)f(+)g(1;)448 912 y(//)g(2:)g(x)g(=)g(1)448
1099 y Ff(The)18 b(comments)f(ar)n(e)h(logical)h(assertions)e(about)h
(the)f(state)g(of)g(the)h(pr)n(ogram.)26 b(Indeed,)448
1212 y(they)i(actually)i(describe)f(the)f(execution)g(of)h(the)f(pr)n
(ogram.)47 b(Speci\002cally)-10 b(,)31 b(the)d(\002rst)448
1325 y(assertion)i(describes)g(the)g(entir)n(e)g(state)g(after)h
(initialization)j(and)d(the)f(second)g(one)448 1438 y(the)22
b(state)g(after)g(the)g(assignment)g(statement.)589 1551
y(For)g(if-statements,)f(we)i(need)e(to)h(take)g(into)g(account)h(a)g
(case)g(split:)448 1738 y Fe(int)54 b(x)g(=)g(...;)448
1851 y(int)g(y)g(=)g(...;)448 1964 y(...)448 2077 y(int)g(max)f(=)h(0;)
448 2190 y(//)g(1:)g(max)f(=)h(0)448 2303 y(if)g(\(x)g(>)g(y\))f({)503
2416 y(//)h(2a:)f(\(x)g(>)h(y\))503 2529 y(max)f(=)h(x;)503
2642 y(//)g(3a:)f(x)h(>)g(y)g(=>)g(max)f(=)h(y)503 2755
y(})448 2868 y(else)f({)503 2980 y(//)h(2b:)f(not\(x)f(>)i(y\))503
3093 y(//)g(2b:)f(x)h($\\leq$)e(y)503 3206 y(max)h(=)h(y;)503
3319 y(//)g(3b:)f(x)h($\\leq$)e(y)i(=>)f(max)g(=)i(y)503
3432 y(})448 3545 y(//)f(4:)g(\(x)f(>)h(y)g(=>)g(max)f(=)h(x\))g(\210)g
(\(x)g($\\leq$)d(y)k(=>)e(max)g(=)h(y\))589 3733 y Ff(In)22
b(each)h(branch,)g(we)f(can)h(add)f(the)g(condition)g(that)g(succeeded)
e(\(and)j(calculate)448 3846 y(with)29 b(it:)40 b(see)27
b(2b\).)47 b(Then,)29 b(at)g(the)e(end)h(of)h(the)e(if-statement,)i(we)
f(can)i(combine)f(the)448 3958 y(two)20 b(branches)g(with)g(a)h
(logical)g(conjunction.)27 b(In)20 b(this)g(example,)g(we)g(may)g
(conclude)448 4071 y(that)j(no)f(matter)g(what)h Fe(x)f
Ff(and)h Fe(y)f Ff(ar)n(e,)h Fe(max)e Ff(is)i(equal)g(to)f(the)f(lar)n
(ger)i(of)g(the)f(two.)589 4184 y(Last)27 b(but)f(not)g(least,)h(we)g
(can)g(also)g(use)f(assertions)f(to)h(describe)g(the)g(execution)448
4297 y(of)d(loops:)448 4485 y Fe(int)54 b(a[];)448 4598
y(...)448 4711 y(int)g(i)g(=)g(0;)448 4824 y(int)g(sum)f(=)h(0;)448
4936 y(//)g(1:)g(i)g(=)g(0)g(\210)g(sum)f(=)h(0)p eop
end
%%Page: 5 5
TeXDict begin 5 4 bop 448 274 a Fc(4)92 b(ASSER)m(TIONS)20
b(FOR)i(METHOD)g(BOUNDARIES)971 b Ff(5)448 573 y Fe(...)448
686 y(//)54 b(2:)g(sum)f(=)h(&Sigma;)d({)j(a[j])f(|)h(0)g($\\leq$)e(j)i
(<)g(i)g(})g(\210)g(i)h(=)f(0)448 799 y(for\(i)f(=)h(1;)f(i)h(<)g
(a.length;)d(i++\))i({)503 912 y(sum)g(=)h(sum)f(+)h(a[i];)503
1024 y(//)g(3:)f(sum)g(=)h(&Sigma;)e({)i(a[j])f(|)h(0)g($\\leq$)e(j)i
(<)g(i)g(})503 1137 y(})448 1250 y(//)g(4:)g(sum)f(=)h(&Sigma;)d({)j
(a[j])f(|)h(0)g($\\leq$)e(j)i(<)g(i)g(=)g(a.length)d(})589
1438 y Ff(Her)n(e)19 b(we)g(see)f(that)h(one)g(and)h(the)e(same)i
(assertion)e(holds)h(befor)n(e)g(the)f(loop)h(starts)448
1551 y(\(2\),)28 b(at)e(the)f(end)g(of)h(each)g(loop)g(body)f(\(3\),)i
(and)f(after)g(the)f(loop)g(stops.)36 b(The)25 b(conclu-)448
1664 y(sion)f(is)g(then)f(that)g Fe(sum)g Ff(is)h(the)f(sum)h(of)f(all)
j(numbers)d(in)h(the)f(array)i Fe(a)p Ff(.)31 b(Because)23
b(this)448 1777 y(assertion)i(holds)h(at)h(all)h(these)c(places,)k(it)e
(is)h(also)f(called)i(a)f(loop)f(invariant)i(\(i.e.,)f(an)448
1890 y(assertion)22 b(that)g(is)h(tr)o(ue)f(acr)n(oss)g(several)h
(statements\).)589 2002 y(\(Note:)32 b(the)24 b(assertion)g(is)h(false)
g(at)h(the)e(entry)g(of)h(the)f(loop)g(body)-10 b(.)35
b(At)24 b(that)h(point)448 2115 y Fe(i)e Ff(was)f(just)g(incr)n(eased)g
(by)h(1,)g(yet)e Fe(sum)h Ff(is)g(still)i(the)e(old)g(value.\))589
2228 y(For)28 b(years)g(\(1960's)j(thr)n(ough)d(the)g(early)g
(1980's\),)k(the)c(holy)h(grail)g(of)g(pr)n(ogram-)448
2341 y(ming)22 b(language)e(r)n(esear)n(ch)i(was)e(the)h(development)e
(of)i(a)g(calculus)i(that)e(would)f(em-)448 2454 y(power)29
b(pr)n(ogrammers)h(to)f(specify)h(the)g(initial)i(state)d(and)i(the)e
(\002nal)j(state,)e(and)h(to)448 2567 y(cr)n(eate)24
b(the)f(pr)n(ogram)g(fr)n(om)h(these)e(statements.)29
b(Alternatively)-10 b(,)23 b(the)g(pr)n(ogrammers)448
2680 y(would)d(code)f(something)f(and)i(an)h(automatic)g(theor)n(em)e
(pr)n(oofer)f(would)i(verify)g(the)448 2793 y(r)n(esult.)27
b(\(See)22 b(Dijkstra's)h(monograph.\))589 2906 y(The)c(ef)n(fort)f
(collapsed)h(when)f(people)g(couldn't)h(\002gur)n(e)f(out)g(how)g(to)h
(easily)g(scale)448 3019 y(this)30 b(kind)g(of)h(r)n(easoning)e(to)h
(pr)n(ogramming)g(languages)g(with)g(pr)n(ocedur)n(e)f(de\002ni-)448
3132 y(tions)c(and)h(pr)n(ocedur)n(e)e(calls)j(\(and)f(beyond\).)35
b(The)25 b(idea)h(of)g(pr)n(ogramming)f(triples,)448
3245 y(however)-7 b(,)35 b(survived.)60 b(T)-8 b(o)33
b(this)g(day)-10 b(,)35 b(it)f(is)f(a)h(good)e(idea)i(to)f(describe)f
(small)j(code)448 3357 y(fragments)22 b(as)h(Hoar)n(e)f(triples:)1206
3570 y Fe(PRE)108 b(programStatemen)o(t)103 b(POST)589
3782 y Ff(wher)n(e)27 b Fe(PRE)f Ff(and)h Fe(POST)f Ff(ar)n(e)i
(logical)h(statements)c(describing)i(the)f(state)h(of)g(the)448
3895 y(abstract)20 b(machine.)28 b(Since)19 b(people)f(couldn't)h(r)n
(eason)g(about)h(several)f(pr)n(ocedur)n(es,)f(it)448
4008 y(is)23 b(also)f(natural)h(that)f(they)e(started)h(describing)h
(the)f(behavior)i(of)f(pr)n(ocedur)n(es)e(with)448 4121
y(triples.)448 4420 y Fh(4)120 b(Assertions)29 b(for)h(Method)f
(Boundaries)448 4631 y Ff(Although)20 b(r)n(esear)n(ch)g(on)h(pr)n
(ogram)f(corr)n(ectness)f(per)h(se)g(failed,)i(the)e(primary)h(use)e
(of)448 4744 y Fe(PRE)25 b Ff(and)h Fe(POST)f Ff(assertions)f(is)j(to)e
(enhance)h(the)f(type)g(signatur)n(e)h(of)g(a)g(method.)38
b(In)448 4857 y(other)29 b(wor)n(ds,)h(if)h(these)d(descriptions)g(ar)n
(e)i(added)e(in)i(an)h(interface,)g(they)d(become)448
4970 y(a)k(powerful)f(tool)g(to)g(specify)g(those)f(obligations)i(of)g
(callers)g(and)g(callees)g(that)f(go)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 448 274 a Fc(4)92 b(ASSER)m(TIONS)20
b(FOR)i(METHOD)g(BOUNDARIES)971 b Ff(6)448 573 y(beyond)23
b(types.)30 b(Even)24 b(if)h(such)f(assertions)e(no)i(longer)f
(describe)g(the)h(entir)n(e)f(behav-)448 686 y(ior)i(of)f(a)h(method's)
d(body)-10 b(,)24 b(they)f(can)i(still)f(notice)g(basic)i(mistakes)d
(that)h(can)h(pollute)448 799 y(softwar)n(e)d(for)h(a)g(long)f(time.)
589 912 y(Let)g(us)g(look)g(at)h(a)g(canonical)i(example:)448
1099 y Fe(interface)51 b(Queue)h({)503 1212 y(//)i(is)f(this)g(queue)f
(empty?)503 1325 y(boolean)f(empty\(\);)503 1551 y(//)j(add)f(Item)f(x)
i(to)g(the)f(end)g(of)h(this)f(queue)503 1664 y(Queue)f(enq\(Item)f
(x\);)503 1890 y(//)j(produce)d(and)i(remove)f(the)h(first)f(Item)h
(from)g(the)g(queue)503 2002 y(Item)g(deq\(\);)503 2228
y(//)h(how)f(many)f(items)h(are)g(in)g(this)g(queue)503
2341 y(int)g(size\(\);)448 2454 y(})589 2642 y Ff(This)37
b(Java)i(interface)e(speci\002es)f(a)h(collection)h(of)f(data)g(str)o
(uctur)n(es)f(with)g(four)448 2755 y(methods.)41 b(At)27
b(\002rst)f(a)i(newly)f(cr)n(eated)g(queue)f(is)i(empty)-10
b(.)41 b(W)-5 b(ith)27 b Fe(enq)p Ff(,)g(we)g(can)i(add)448
2868 y(an)j(item;)k(with)31 b Fe(deq)g Ff(we)g(can)h(r)n(etrieve)f(the)
g(item.)54 b(The)31 b(descriptions)f(of)h(the)g(two)448
2980 y(actions)23 b(imply)f(that)g(they)f(incr)n(ease)i(and)f(decr)n
(ease)f(the)h Fe(size)e Ff(of)j(the)e(queue.)27 b(Their)448
3093 y(names)21 b(and)g(the)f(name)h(of)g(the)f(data)h(str)o(uctur)n(e)
f(\002nally)i(suggest)c(that)j Fe(deq)e Ff(r)n(etrieves)448
3206 y(the)34 b(item)g(that)g(has)h(been)e(in)i(the)f(queue)f(the)g
(longest.)62 b(In)34 b(short,)h(our)f(historical)448
3319 y(knowledge)21 b(suggests)e(a)k(\002rst-in/\002rst-out)e(data)i
(str)o(uctur)n(e.)589 3432 y(In)34 b(principle,)k(it)c(is)g(possible)g
(to)f(supplement)g(the)g(signatur)n(es)g(and)h(purpose)448
3545 y(statements)27 b(of)h(this)g(interface)h(with)f(assertions)f(in)i
(an)g(equational)g(logic)g(that)f(de-)448 3658 y(scribe)19
b(the)f(behavior)i(we)e(just)g(described)g(informally)-10
b(.)28 b(Her)n(e)18 b(ar)n(e)h(just)f(some)g(sample)448
3771 y(equations:)448 3983 y Fe($\\forall$)51 b(X:)i(new)h
(Queue\(\).enq\(X\))o(.d)o(eq)o(\(\))48 b(=)54 b(X)448
4096 y($\\forall$)d(X,)i(Y:)h(new)f(Queue\(\).enq\(X\).)o(en)o(q\(Y)o
(\).)o(de)o(q\()o(\))48 b(=)55 b(X)448 4322 y(new)f(Queue\(\).size\(\))
48 b(=)54 b(0)448 4435 y($\\forall$)d(X:)i(new)h(Queue\(\).enq\(X\))o
(.s)o(iz)o(e\()o(\))49 b(=)54 b(1)589 4648 y Ff(Given)37
b(the)d(stateful)h(speci\002cation)h(of)f(the)g(queue)f(interface,)39
b(however)-7 b(,)37 b(it)f(is)448 4760 y(impossible)25
b(to)f(formulate)h(a)g(simple)f(set)g(of)h(equations)e(or)h(logical)j
(assertions)22 b(that)448 4873 y(describe)g(the)g(complete)g(behavior)h
(of)g Fe(Queue)p Ff(.)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop 448 274 a Fc(4)92 b(ASSER)m(TIONS)20
b(FOR)i(METHOD)g(BOUNDARIES)971 b Ff(7)589 573 y(Still,)32
b(many)d(aspects)f(of)h(our)g(informal)i(descriptions)c(can)j(be)f
(translated)f(into)448 686 y(logical)j(assertions,)d(speci\002cally)i
(into)f(pr)n(e-)g(and)g(postconditions.)44 b(Let's)28
b(practice)448 799 y(this)23 b(idea)f(with)h(two)f(questions:)562
986 y(1.)46 b(Can)31 b(the)e(method)g(be)i(called)g(in)g(all)g
(situations?)51 b(If)31 b(not,)g(describe)e(when)h(it)676
1099 y(can)23 b(be)g(called.)562 1287 y(2.)46 b(Is)27
b(ther)n(e)h(anything)f(special)i(about)f(the)g(r)n(esult)g(value)h(or)
f(the)f(r)n(esult)h(state)f(of)676 1400 y(each)c(method?)448
1587 y(Applied)f(to)g(our)g(four)g(methods)f(we)h(get)g(these)f
(answers:)562 1775 y(1.)46 b(It)18 b(is)i(always)f(possible)g(to)f
(call)k Fe(empty)p Ff(.)i(Its)18 b(r)n(esult)h(is)g(either)g(tr)o(ue)f
(or)h(false,)h(and)676 1888 y(ther)n(e)h(is)i(nothing)f(mor)n(e)g
(speci\002c)h(that)f(we)g(can)i(say)e(now)-8 b(.)562
2076 y(2.)46 b(It)19 b(is)h(always)h(possible)e(to)h(call)i
Fe(enq)p Ff(.)k(Its)19 b(r)n(esult)g(is)i(a)f(queue)f(that)h(is)g(not)g
(empty)-10 b(.)676 2188 y(Furthermor)n(e,)30 b(the)f(size)i(after)f
(the)f(call)j(is)f(one)e(mor)n(e)h(than)h(the)e(size)i(befor)n(e)676
2301 y(the)21 b(call.)562 2489 y(3.)46 b(It)30 b(is)i(only)e(possible)h
(to)f(call)k Fe(deq)29 b Ff(when)i(the)f(queue)g(contains)i(at)f(least)
g(one)676 2602 y(item.)k(Otherwise)24 b(it)h(makes)f(no)h(sense)e(to)i
(call)i(it.)35 b(Furthermor)n(e,)24 b(at)h(the)f(end)676
2715 y(of)e(the)g(call)i(the)e(queue)g(contains)g(one)g(item)h(less)f
(than)g(befor)n(e)g(the)g(call.)562 2902 y(4.)46 b(Finally)-10
b(,)25 b(it)f(is)g(always)h(possible)e(to)h(call)i Fe(size)p
Ff(.)31 b(Its)23 b(r)n(esult)h(is)g(always)h(an)f(inte-)676
3015 y(ger)-7 b(,)27 b(though)f(it)h(is)g(also)h(tr)o(ue)e(that)h(this)
g(integer)f(is)h(always)h(gr)n(eater)e(or)h(equal)676
3128 y(than)22 b(0.)589 3316 y(Her)n(e)g(is)h(a)g(r)n(ewrite)f(of)h
(the)e(same)i(interface)g(with)f Fe(PRE)g Ff(and)g Fe(POST)f
Ff(conditions:)448 3504 y Fe(interface)51 b(Queue)h({)503
3616 y(//)i(is)f(this)g(queue)f(empty?)503 3729 y(boolean)f(empty\(\);)
503 3955 y(//)j(add)f(Item)f(x)i(to)g(the)f(end)g(of)h(this)f(queue)503
4068 y(Queue)f(enq\(Item)f(x\);)503 4181 y(//)j(POST:)e(!\(empty\(\)\))
e(&&)j(size\(\))f(=)i(OLD[size\(\)])c(+)k(1)503 4407
y(//)g(produce)d(and)i(remove)f(the)h(first)f(Item)h(from)g(the)g
(queue)503 4520 y(Item)g(deq\(\);)503 4633 y(//)h(PRE:)e
(!\(empty\(\)\))503 4746 y(//)i(POST:)e(size\(\))g(=)i(OLD[size\(\)])49
b(-)54 b(1)503 4971 y(//)g(how)f(many)f(items)h(are)g(in)g(this)g
(queue)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop 448 274 a Fc(4)92 b(ASSER)m(TIONS)20
b(FOR)i(METHOD)g(BOUNDARIES)971 b Ff(8)503 573 y Fe(int)53
b(size\(\);)503 686 y(//)h(POST:)e(RESULT)g(&ge;)g(0)448
799 y(})448 986 y Ff(The)33 b(conditions)g(contain)h(two)f(special)i
(notations.)60 b(The)33 b(\002rst)f(is)i Fe(OLD[...])p
Ff(.)58 b(It)448 1099 y(denotes)25 b(the)h(value)i(of)f(the)f(expr)n
(ession)f Fb(befor)n(e)k Ff(the)d(method)g(call)j(took)c(place.)42
b(The)448 1212 y(second)33 b(one)h(is)g Fe(RESULT)p Ff(.)d(It)j(is)g
(the)g(value)h(that)f(the)f(method)g(pr)n(oduces.)61
b(Given)448 1325 y(these)23 b(explanations,)g(the)g(pr)n(e-)h(and)g
(postconditions)d(in)k(the)e(r)n(evised)g(interface)h(ex-)448
1438 y(pr)n(ess)k(all)j(those)c(conditions)i(that)g(we)f(mentioned)g
(above,)j(except)d(for)h(those)e(that)448 1551 y(pr)n(ovide)k(a)g
(full-\003edged)g(formal)h(description)d(of)i(the)g(methods')e
(behavior)-7 b(.)54 b(Still,)448 1664 y(experience)19
b(shows)f(that)i(such)g(additional)g(conditions)g(quickly)g(catch)h
(mistakes)e(in)448 1777 y(the)25 b(general)h(logic,)h(especially)f(in)g
(conjunction)g(with)g(other)f(pr)n(e-)h(and)f(postcondi-)448
1890 y(tions.)589 2002 y(Let)20 b(us)g(look)g(at)h(a)g(second)e
(example,)i(the)f(conversions)g(of)g(dollar)h(amounts)f(into)448
2115 y(strings)26 b(and)g(vice)i(versa.)40 b(Since)27
b(money)f(amounts)g(r)n(equir)n(e)h(pr)n(ecise)f(calculations,)448
2228 y(it)33 b(is)f(a)h(good)d(practice)j(to)f(develop)f(a)h(separate)f
(class)i(of)f Fe(Amount)p Ff(s)d(for)j(business)448 2341
y(applications.)62 b(Naturally)-10 b(,)36 b(in)e(addition)f(to)g(basic)
i(arithmetic)f(operations)f(on)g(an)448 2454 y Fe(Amount)20
b Ff(we)i(also)h(need)e(an)j(operation)d(that)h(converts)g(an)h
(instance)g(to)f(a)h Fe(String)p Ff(:)448 2642 y Fe(interface)51
b(IAmount)g({)557 2755 y(//)j(convert)d(the)j(amount)d(into)i(a)h
(check-style)c(string)557 2868 y(//)k(with)f(dollars)e(and)i(cents)g
(separated)d(by)k(a)g(dot)557 2980 y(String)e(print\(\))448
3093 y(})589 3281 y Ff(Furthermor)n(e,)21 b(we)i(may)g(also)g(want)g
(to)f(pr)n(ovide)h(a)g(static)g(factory)g(method)e(that)448
3394 y(r)n(eads)h(a)i Fe(String)c Ff(into)i(an)h Fe(Amount:)448
3582 y(class)53 b(Amount)e(implements)f(IAmount)i({)557
3694 y(...)557 3807 y(//)i(convert)d(the)j(given)e(check-style)d
(string)j(into)h(an)h(amount)557 3920 y(//)g(assume)e(the)h(string)f
(separates)e(the)j(dollar)f(amount)g(from)557 4033 y(//)i(the)f(cents)f
(via)i(a)g(dot)557 4146 y(public)e(static)g(Amount)g(read\(String)d
(s\))54 b({)g(...)f(})557 4259 y(...)448 4372 y(})589
4560 y Ff(In)23 b(either)f(case,)h(it)g(makes)f(sense)f(to)h(describe)g
(the)h(obligation)g(of)g Fe(print)e Ff(or)h(the)448 4672
y(obligation)h(of)g Fe(read)p Ff('s)e(client)i(with)f(assertions)f
(that)i(catch)g(basic)h(mistakes.)589 4785 y(The)17 b(informal)i
(purpose)c(statement)h(implies)i(two)e(major)i(characteristics)g(about)
448 4898 y(the)k(string)g(so)g(far:)p eop end
%%Page: 9 9
TeXDict begin 9 8 bop 448 274 a Fc(5)92 b(FROM)22 b(ASSER)m(TIONS)e(T)n
(O)j(CONTRACTS)1218 b Ff(9)562 573 y(1.)46 b(the)21 b(string)h
(consists)f(of)i(digits)f(except)f(...)562 760 y(2.)46
b(...)27 b(for)22 b(the)g(thir)n(d)h(spot)e(fr)n(om)i(the)f(right,)g
(which)h(is)g(a)g(dot.)448 948 y(Using)f(a)h(forall)h(quanti\002er)-7
b(,)23 b(we)f(can)h(expr)n(ess)e(these)g(two)h(constraints)f(as)i
(follows:)557 1136 y Fe(RESULT[RESULT.le)o(ng)o(th)o(\(\))48
b(-)54 b(3])g(=)g('.')557 1249 y(&&)557 1362 y($\\forall$)d(i)j(in)g
([0..RESULT.len)o(gt)o(h])48 b(:)54 b(i)g(!=)g(RESULT.length\()o(\))48
b(-)55 b(3)612 1474 y(=>)f(RESULT[i])c(in)k(['0'..'9'])589
1662 y Ff(As)18 b(befor)n(e,)g(the)e(assertion)h(uses)f(both)h(pr)n
(ogram)h(variables)h(and)f(even)f(pr)n(ogram-)448 1775
y(ming)30 b(notation)e(to)g(expr)n(ess)f(basic)k(ideas)d(but)h(also)g
(mathematical)i(symbols,)f(e.g.,)448 1888 y Fa(8)p Ff(.)h(Furthermor)n
(e,)22 b(it)j(does)d(not)h(expr)n(ess)f(the)h(complete)g(behavior)i(of)
e(either)g Fe(print)448 2001 y Ff(or)29 b Fe(read)f Ff(but)g(it)i(expr)
n(esses)c(essential)i(characteristics.)48 b(In)29 b(particular)-7
b(,)32 b(it)d(clari\002es)448 2114 y(what)23 b(it)g(means)f(to)g
(supply)f(or)i(r)n(eceive)g(a)g(check-style)e(string.)589
2227 y(If)33 b(this)f(condition)g(fails,)j(something)c(is)i(seriously)d
(wr)n(ong)i(with)g(the)g(method)448 2340 y(or)g(its)f(caller)-7
b(.)56 b(Hence)31 b(monitoring)g(conditions)g(such)g(as)h(these)e
(helps)h(us)g(defend)448 2452 y(ourselves)17 b(against)g
(miscommunication)j(among)d(pr)n(ogrammers.)26 b(The)17
b(key)f(is)i(then)448 2565 y(to)j(not)g(only)h(add)f(such)h(statements)
d(but)j(to)f(turn)g(them)g(into)h(a)g(part)g(of)f(the)g(r)o(unning)448
2678 y(code.)448 2977 y Fh(5)120 b(From)30 b(Assertions)g(to)g
(Contracts)448 3188 y Ff(In)d(the)g(business)f(world,)i(a)f(contract)h
(is)f(a)h(document)e(that)h(spells)g(out)g(the)f(obliga-)448
3301 y(tions)i(of)g(two)g(\(or)g(mor)n(e\))g(participants)h(in)f(a)h
(joint)g(activity)-10 b(.)45 b(For)28 b(example,)h(a)g(con-)448
3414 y(tract)g(may)g(specify)g(that)f(an)i(oil)f(company)g(delivers)f
(oil)h(to)g(a)g(r)n(esidence)f(and)g(that)448 3527 y(the)f(owner)f(in)i
(turn)e(pays)h(for)g(the)f(oil.)43 b(If)27 b(either)f(of)h(the)g(two)f
(parties)h(doesn't)e(live)448 3640 y(up)f(to)f(its)g(obligations,)h
(the)f(other)g(one)g(will)i(go)e(to)g(a)i(neutral)e(arbiter)h(who)g
(decides)448 3752 y(whether)k(the)g(claim)i(is)f(corr)n(ect.)47
b(If)29 b(so,)g(we)f(say)h(that)f(one)g(of)h(the)f(two)g(parties)g(got)
448 3865 y(blamed.)589 3978 y(This)18 b(scenario)h(suggests)c(that)j
(turning)f(assertions)g(into)h(useful)g(pr)n(ogram)g(mon-)448
4091 y(itoring)23 b(tools)e(r)n(equir)n(es)h(thr)n(ee)g(things:)562
4279 y(1.)46 b(the)21 b(assertions)g(must)h(become)h(executable;)562
4466 y(2.)46 b(a)23 b(neutral)f(arbiter)h(must)f(monitor)g(the)g
(assertions;)562 4654 y(3.)46 b(if)38 b(an)g(assertion)f(goes)f(wr)n
(ong,)k(the)d(monitor)h(must)f(assign)g(blame)i(to)e(the)676
4767 y(party)21 b(that)i(fails)h(to)e(live)h(up)f(to)g(its)h
(obligations.)p eop end
%%Page: 10 10
TeXDict begin 10 9 bop 448 274 a Fc(5)92 b(FROM)22 b(ASSER)m(TIONS)e(T)
n(O)j(CONTRACTS)1172 b Ff(10)589 573 y(In)21 b(short,)f(assertions)g
(convey)h(knowledge)e(and)i(you)g(can)h(be)f(blamed)h(for)f(what)448
686 y(you)h(knowingly)g(violate;)h(converting)f(assertions)e(into)j
(contracts)f(does)f(just)h(that.)589 799 y(W)-8 b(e)32
b(can)i(go)e(about)g(making)h(assertions)e(executable)h(in)h(two)f
(ways.)57 b(On)33 b(one)448 912 y(hand,)f(we)d(can)h(cr)n(eate)g(a)h
(notation)e(for)g(assertions,)h(have)g(pr)n(ogrammers)f(expr)n(ess)448
1024 y(their)36 b(thoughts)d(in)j(this)g(notation,)i(and)e(translate)f
(it)h(into)g(code.)66 b(On)36 b(the)f(other)448 1137
y(hand,)j(we)d(can)h(simply)g(say)f(that)g(all)h(boolean)g(expr)n
(essions)d(of)i(the)f(underlying)448 1250 y(pr)n(ogramming)e(language)g
(ar)n(e)g(assertions)f(and)h(that)f(the)g(monitor)h(just)f(executes)448
1363 y(them)22 b(at)h(opportune)d(moments.)589 1476 y(The)29
b(boolean-expr)n(ession)e(appr)n(oach)i(is)g(dominant)g(in)h
(industrial)f(languages)448 1589 y(though)16 b(only)h(Eif)n(fel)h(tr)n
(eats)e(these)g(assertions)f(as)j(contracts.)25 b(Meyer)16
b(chose)g(to)h(equate)448 1702 y(boolean)37 b(expr)n(essions)d(with)j
(assertions)e(because)h(of)g(pragmatic)i(r)n(easons,)h(even)448
1815 y(though)34 b(he)h(was)g(keenly)f(awar)n(e)i(of)f(the)g(pr)n
(oblems.)65 b(The)35 b(major)g(pr)n(oblem)h(is)f(of)448
1928 y(course)23 b(that)g(a)h(call)i(to)d(a)h(boolean-value)h(function)
e(is)h(an)g(assertion)e(but)i(the)f(execu-)448 2041 y(tion)e(of)g(this)
g(assertion)e(may)j(have)f(side-ef)n(fects.)26 b(That)21
b(is,)g(it)g(may)g(diver)n(ge,)g(raise)g(an)448 2154
y(exception,)g(or)i(change)f(the)g(state)f(of)i(a)g(variable.)589
2267 y(Resear)n(ch)29 b(pr)n(ojects)e(tend)g(to)h(use)g(separate)g
(languages)g(for)g(contracts)g(and)h(as-)448 2379 y(sertions.)38
b(T)-8 b(wo)26 b(pr)n(ominent)g(examples)g(ar)n(e)g(the)g(ESC/Java)i
(pr)n(oject)e(at)h(the)f(former)448 2492 y(DEC)18 b(SRC)g(lab)h
(\(short)e(for)h(extended)d(static)i(checking\),)i(which)f(uses)e(the)h
(Java)j(Mod-)448 2605 y(eling)25 b(Language)f(\(JML\),)h(and)g(the)f
(SPEC#)h(pr)n(oject)f(at)h(Micr)n(osoft)g(r)n(esear)n(ch,)g(which)448
2718 y(uses)c(its)g(own)g(notation.)27 b(The)21 b(latter)h(pr)n(ovides)
f(a)h(pr)n(ogramming)g(language,)g(a)g(r)o(un-)448 2831
y(time)g(monitoring)f(system,)f(and)i(a)g(theor)n(em)f(pr)n(oofer)-7
b(.)26 b(If)c(the)f(theor)n(em)g(pr)n(oofer)f(can)448
2944 y(verify)k(that)f(a)h(party)e(always)i(meets)e(its)h(obligations,)
g(it)g(can)i(inform)e(the)g(compiler)-7 b(,)448 3057
y(which)24 b(will)h(then)d(disable)h(the)g(corr)n(esponding)e
(monitoring)i(code.)28 b(Conversely)-10 b(,)22 b(if)448
3170 y(the)j(theor)n(em)g(pr)n(over)h(cannot)f(establish)h(that)g(the)f
(party)g(lives)h(up)g(to)f(the)g(contract)448 3283 y(in)e(all)h
(situations,)e(the)g(compiler)h(will)h(issue)d(appr)n(opriate)h(code.)
589 3396 y(No)32 b(matter)g(how)g(contract)h(violations)g(ar)n(e)g
(found,)g(it)g(is)g(important)f(that)g(the)448 3509 y(guilty)22
b(party)f(is)h(blamed)g(and)g(that)f(the)g(err)n(or)h(message)e(is)i(a)
g(good)e(explanation)i(for)448 3621 y(the)j(pr)n(oblem.)37
b(After)25 b(all,)i(the)e(purpose)e(of)j(contracts)f(is)h(to)f(pr)n
(otect)f(pr)n(ogrammers)448 3734 y(against)f(miscommunication)h(and)f
(to)f(help)g(them)g(eliminate)i(pr)n(oblems.)589 3847
y Fd(Note)i(1:)34 b Ff(Unfortunately)-10 b(,)24 b(most)h(contract)g
(systems)e(for)j(Java)h(and)e(Eif)n(fel)h(lack)h(a)448
3960 y(semantic)g(foundation.)37 b(As)26 b(a)h(r)n(esult,)f(they)f(may)
h(not)g(notice)f(a)i(contract)f(violation)448 4073 y(at)36
b(all,)j(blame)d(the)f(wr)n(ong)f(party)-10 b(,)38 b(or)c(blame)j(the)d
(pr)n(oper)g(party)g(with)i(an)f(incor)n(-)448 4186 y(r)n(ect)f
(explanation.)63 b(Furthermor)n(e,)34 b(the)g(pun)f(between)g
(assertion)g(variables)i(and)448 4299 y(pr)n(ogram)20
b(variables)i(has)e(pr)n(evented)e(pr)n(ogrammers)i(fr)n(om)g(expr)n
(essing)e(and)j(moni-)448 4412 y(toring)g(assertions)f(about)i(objects)
f(\(rather)g(than)h(just)f(plain)i(values\).\(See)e(Findler)7
b('s)448 4525 y(dissertation)21 b(and)i(r)n(esear)n(ch)g(for)f
(detailed)g(explanations.\))589 4638 y Fd(Note)28 b(2:)39
b Ff(Monitoring)27 b(contracts)h(can)g(get)f(expensive.)42
b(It)27 b(is)h(ther)n(efor)n(e)f(impor)n(-)448 4751 y(tant)22
b(to)g(think)g(about)g(what)g(you)g(want)g(your)f(contract)i(system)d
(to)i(check.)27 b(The)22 b(goal)448 4863 y(is)33 b(to)e(\002nd)h(the)f
(pr)n(oper)g(compr)n(omise)h(between)e(checking)i(basic)h(pr)n
(operties)d(and)448 4976 y(checking)23 b(them)f(without)g(much)i(over)n
(head)e(in)i(time,)f(space,)f(and)h(ener)n(gy)-10 b(.)27
b(A)c(basic)p eop end
%%Page: 11 11
TeXDict begin 11 10 bop 448 274 a Fc(6)92 b(SEQUENCE)21
b(CONTRACTS)1675 b Ff(11)448 573 y(pr)n(operty)27 b(of)i(a)g(method)e
(is)i(an)g(assertion)e(whose)g(violation)j(suggests)c(something)448
686 y(fundamental)35 b(went)f(wr)n(ong.)62 b(For)34 b(example,)j(if)e
(ther)n(e)f(is)h(no)f(dot)f(at)i(the)e(pr)n(oper)448
799 y(position)28 b(in)i(the)e(r)n(esult)g(of)h Fe(print)d
Ff(in)k Fe(Amount)p Ff(,)d(it)i(is)g(not)f(the)g(desir)n(ed)g(print)g
(r)n(ep-)448 912 y(r)n(esentation)h(of)i(a)g(dollar)g(amount.)51
b(Checking)31 b(this)f(one)f(character)i(in)g(the)f(string)448
1024 y(is)g(r)n(elatively)g(cheap;)j(it)d(adds)e(a)i(constant)f(to)g
(the)f(r)o(unning)i(time.)48 b(Checking)29 b(that)448
1137 y(every)h(other)e(character)j(is)g(a)f(digit)g(r)n(equir)n(es)g(a)
h(loop.)50 b(The)29 b(cost)h(is)g(now)g(linear)h(in)448
1250 y(the)24 b(length)g(of)h(the)f(r)n(esulting)g(string)g(but)g(that)
h(is)g(acceptable)g(because)g(the)f(r)n(outine)448 1363
y(itself)29 b(is)h(pr)n(obably)f(linear)-7 b(.)49 b(Adding)28
b(mor)n(e)h(than)g(a)h(linear)g(cost)e(would)g(de\002nitely)448
1476 y(be)23 b(questionable.)448 1774 y Fh(6)120 b(Sequence)29
b(Contracts)448 1985 y Ff(In)23 b(addition)g(to)f(types)f(\(signatur)n
(es\))h(and)h(basic)h(conditions)f(about)f(the)h(befor)n(e)f(and)448
2098 y(after)37 b(state)e(of)h(the)g(world,)j(we)d(often)f(also)i(want)
f(to)g(ensur)n(e)f(that)h(methods)f(ar)n(e)448 2211 y(called)24
b(in)f(the)f(pr)n(oper)f(or)n(der)-7 b(.)589 2324 y(T)f(ake)22
b(a)h(look)f(at)h(this)f(simple)h(integer)e(\002le)i(interface:)448
2530 y Fe(interface)51 b(IPort)h({)667 2643 y(//)h(connect)e(port)i(to)
h(file)667 2756 y(void)e(open\(\);)667 2982 y(//)h(read)g(one)g
(integer)e(from)i(file,)f(if)i(the)f(file)g(isn't)f(exhausted)667
3095 y(int)h(read\(\);)667 3208 y(//)g(@pre:)f(!out\\_of\\_intsP\()o
(\))667 3434 y(//)h(is)h(the)f(file)g(content)e(exhausted?)667
3547 y(boolean)g(out\\_of\\_intsP)o(\(\);)667 3772 y(//)i(disconnect)d
(the)j(port)g(from)g(the)g(file)667 3885 y(void)f(close\(\);)667
4111 y(//)h(sequence)e(contract:)f(open)j(.)h({read)f(|)h
(out\\_of\\_intsP)o(}*)48 b(.)54 b(close)448 4224 y(})589
4431 y Ff(Pr)n(esumably)-10 b(,)23 b(we)f(cr)n(eate)h(an)g(IPort)e
(with)i(a)g(name)g(and)f(then)g(work)g(with)g(it:)448
4638 y Fe(class)53 b(PortTest)d({)667 4751 y(public)h(static)h(void)h
(main\(String)c(argv[]\))j({)448 4863 y(int)i(sum;)448
4976 y(int)g(silly[])d(=)j({1,2,3};)p eop end
%%Page: 12 12
TeXDict begin 12 11 bop 448 274 a Fc(6)92 b(SEQUENCE)21
b(CONTRACTS)1675 b Ff(12)448 573 y Fe(IPort)53 b(ip)g(=)h(new)f
(PortState\(silly\))o(;)448 799 y(//)h(ip.open\(\);)448
912 y(sum)g(=)g(0;)448 1024 y(while)f(\(!ip.out\\_of\\_)o(in)o(ts)o
(P\()o(\))c(||)k(true\))667 1137 y(sum)g(+=)g(ip.read\(\);)448
1250 y(ip.close\(\);)448 1363 y(System.out.prin)o(tln)o(\(")o(6)48
b(==)54 b(")g(+)g(sum\);)667 1476 y(})448 1589 y(})589
1799 y Ff(Clearly)-10 b(,)34 b(the)c(intention)g(is)h(that)g(consumers)
f(call)i(the)e(methods)g(of)g(IPort)g(in)i(a)448 1912
y(particular)h(sequence,)f(namely)-10 b(,)33 b(one)e(call)i(to)e
Fe(open)p Ff(,)g(followed)g(by)g(calls)i(to)e Fe(read)448
2025 y Ff(and)23 b Fe(out)p 795 2025 28 4 v 31 w(of)p
936 2025 V 32 w(intsP)p Ff(,)d(followed)i(by)h(one)f(\(optional\))h
(call)h(to)e Fe(close)p Ff(.)589 2138 y(W)-8 b(e)22 b(call)j(this)d(a)h
(sequence)e(contract)i(and)f(write)g(something)g(like)g(the)g(above)h
(as)503 2348 y Fe(open)53 b(.)h({)g(read)e(|)j(out\\_of\\_intsP)48
b(}*)53 b(.)h(close)589 2558 y Ff(The)22 b(notation:)585
2743 y Fa(\017)46 b Ff(The)21 b(braces)i(gr)n(oup)f(things.)585
2930 y Fa(\017)46 b Ff(The)21 b(brackets)h(make)h(things)f(optional.)
585 3117 y Fa(\017)46 b Ff(a)23 b(.)28 b(b)23 b(means)f(a)h(followed)f
(by)h(b.)585 3304 y Fa(\017)46 b Ff(a)23 b(\227)f(b)h(means)g(a)g(or)f
(b.)585 3491 y Fa(\017)46 b Ff(a*)23 b(means)g(0)g(or)f(mor)n(e)g
(actions)h(a.)585 3677 y Fa(\017)46 b Ff(a+)23 b(means)f(1)h(or)g(mor)n
(e)f(actions)h(a.)589 3863 y(An)g(alternative)g(\(but)g(equivalent\))g
(notation)f(is)g(that)h(of)f(\002nite)h(state)e(machines:)557
4073 y Fe(port)53 b(:)1321 4299 y(open\(\))1470 b(read\(\),)830
4412 y(+--------------)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o
(--)o(+)267 b(out\\_of\\_intsP)o(\(\))830 4525 y(|)1963
b(|)163 b(+---------+)830 4638 y(|)1963 b(v)163 b(|)491
b(|)503 4751 y(+------------+)1412 b(+----------+)267
b(|)503 4863 y(|)54 b(ClosedPort)c(|)1418 b(|)54 b(OpenPort)d(|)272
b(|)503 4976 y(+------------+)1412 b(+----------+)267
b(|)p eop end
%%Page: 13 13
TeXDict begin 13 12 bop 448 274 a Fc(6)92 b(SEQUENCE)21
b(CONTRACTS)1675 b Ff(13)830 573 y Fe(\210)1963 b(|)163
b(\210)491 b(|)830 686 y(|)1963 b(|)163 b(|)491 b(|)830
799 y(+--------------)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o
(--)o(+)157 b(+---------+)1321 912 y(close\(\))589 1124
y Ff(This)23 b(notation)f(suggests)d(an)k(implementation)g(via)h(the)e
(state)f(pattern)h([GoF]:)448 1337 y Fe({\\tt)448 1450
y(//)54 b(Checking)d(sequence)g(contracts)f(via)j(the)h(state)e
(pattern.)448 1675 y(//)i(Each)f(class)f(of)i(states)d(is)j
(represented)c(with)i(a)i(single)e(instance)f(from)i(a)448
1788 y(//)h(private)d(class.)h(Each)h(state)f(implements)e(the)j(full)g
(repertoire)d(of)k(method)448 1901 y(//)g(calls;)e(the)h(Port)g(class)f
(itself)g(just)g(forwards)f(each)i(message)e(to)j(the)f(current)448
2014 y(//)h(state.)448 2240 y(class)f(PortState)d(implements)g(IPort)i
({)667 2466 y(//)h(---------------)o(--)o(--)o(---)o(--)o(--)o(--)o(--)
o(---)o(--)o(--)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o(--)o
(--)o(--)o(---)o(--)o(--)o(--)o(-)667 2579 y(//)g(fields:)667
2804 y(private)e(int)i(values[];)667 3030 y(private)e(IPort)h(state;)
667 3256 y(private)f(OpenPort)g(theOpenPort)e(=)54 b(new)g
(OpenPort\(\);)667 3482 y(private)d(ClosedPort)f(theClosedPort)e(=)55
b(new)e(ClosedPort\(\);)667 3708 y(PortState\(int)48
b(values[]\))j({)448 3821 y(this.values)f(=)k(values;)448
3934 y(state)f(=)h(theClosedPort;)667 4046 y(})667 4272
y(//)f(---------------)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o
(--)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o
(---)o(--)o(--)o(--)o(-)667 4385 y(//)g(the)g(public)f(interface)667
4611 y(public)f(void)i(open\(\))f({)448 4724 y(state.open\(\);)667
4837 y(})p eop end
%%Page: 14 14
TeXDict begin 14 13 bop 448 274 a Fc(6)92 b(SEQUENCE)21
b(CONTRACTS)1675 b Ff(14)667 573 y Fe(public)51 b(int)i(read\(\))f({)
448 686 y(return)g(state.read\(\);)667 799 y(})667 1024
y(public)f(boolean)h(out\\_of\\_intsP)o(\(\))c({)448
1137 y(return)k(state.out\\_of\\_)o(in)o(ts)o(P\(\))o(;)667
1250 y(})667 1476 y(public)f(void)i(close\(\))e({)448
1589 y(state.close\(\);)667 1702 y(})667 1928 y(//)i(---------------)o
(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o
(--)o(--)o(--)o(--)o(---)o(--)o(--)o(--)o(--)o(---)o(--)o(--)o(--)o(-)
667 2041 y(//)g(the)g(private)f(classes)667 2267 y(private)f(class)h
(OpenPort)f(implements)f(IPort)i({)448 2492 y(private)g(int)h(ptr)g(=)h
(0;)448 2718 y(public)e(void)h(open\(\))f({)667 2831
y(System.out.pri)o(nt)o(ln)o(\(")o(ca)o(n't)c(call)k(open)h(on)h(open)e
(file"\);)667 2944 y(System.exit\(-1)o(\);)448 3057 y(})448
3283 y(public)g(int)h(read\(\))f({)667 3396 y(preRead\(\);)667
3509 y(int)h(r)h(=)g(values[ptr];)667 3621 y(ptr++;)667
3734 y(return)d(r;)448 3847 y(})448 4073 y(public)h(boolean)f
(out\\_of\\_intsP\(\))d({)667 4186 y(return)j(\(ptr)i(>=)h
(values.length\))o(;)448 4299 y(})448 4525 y(public)e(void)h(close\(\))
e({)667 4638 y(state)h(=)i(theClosedPort;)448 4751 y(})448
4976 y(//)g(checking)d(the)i(precondition)c(for)k(read)p
eop end
%%Page: 15 15
TeXDict begin 15 14 bop 448 274 a Fc(7)92 b(CONTRACT)17
b(VIOLA)-7 b(TIONS)15 b(AND)i(F)-7 b(AUL)g(T)i(-T)n(OLERANT)15
b(PROGRAMMING)p Ff(15)448 573 y Fe(private)52 b(boolean)f(preRead\(\))f
({)667 686 y(if)j(\(ptr)g(<)h(values.length\))448 799
y(return)e(true;)667 912 y(System.out.pri)o(nt)o(ln)o(\(")o(pr)o(eco)o
(nd)o(it)o(io)o(n)c(violation"\);)667 1024 y(System.exit\(-1)o(\);)667
1137 y(return)j(false;)448 1250 y(})667 1363 y(})667
1589 y(private)g(class)h(ClosedPort)e(implements)g(IPort)i({)448
1815 y(public)g(void)h(open\(\))f({)667 1928 y(state)g(=)i
(theOpenPort;)448 2041 y(})448 2267 y(public)e(int)h(read\(\))f({)667
2379 y(Ouch\(\);)f(return)h(-1;)448 2492 y(})448 2718
y(public)g(boolean)f(out\\_of\\_intsP\(\))d({)667 2831
y(Ouch\(\);)j(return)h(false;)448 2944 y(})448 3170 y(public)g(void)h
(close\(\))e({)667 3283 y(Ouch\(\);)448 3396 y(})448
3621 y(private)h(void)g(Ouch\(\))g({)667 3734 y(System.out.pri)o(nt)o
(ln)o(\(")o(se)o(que)o(nc)o(e)c(contract)j(violation"\);)667
3847 y(System.exit\(-1)o(\);)448 3960 y(})667 4073 y(})448
4186 y(})448 4299 y(})448 4598 y Fh(7)120 b(Contract)22
b(V)-7 b(iolations)23 b(and)g(Fault-T)-13 b(olerant)21
b(Programming)448 4809 y Ff(When)e(contracts)g(go)g(wr)n(ong,)h(the)e
(system)g(is)i(in)g(tr)n(ouble.)27 b(Contracts)19 b(monitor)g(basic)448
4921 y(pr)n(operties)31 b(that)i(should)f(never)h(go)f(wr)n(ong.)59
b(At)33 b(the)f(same)h(time,)i(however)-7 b(,)35 b(the)p
eop end
%%Page: 16 16
TeXDict begin 16 15 bop 448 274 a Fc(8)92 b(BIBLIOGRAPHY)2067
b Ff(16)448 573 y(purpose)33 b(of)h(contracts)g(is)g(to)g(check)h(on)f
(the)f(communication)j(between)d(disjoint)448 686 y(parts)e(of)h(the)f
(system,)i(and)e(in)i(common)f(cases,)h(the)e(various)i(parts)e(of)h(a)
g(system)448 799 y(ar)n(e)c(not)f(equals.)43 b(If)28
b(a)g(lesser)e(part)i(fails,)h(the)e(overall)i(system)d(might)h(just)g
(work)g(at)448 912 y(acceptable)d(levels)e(without)g(the)g(failing)i
(part.)589 1024 y(This)30 b(r)n(easoning)g(suggests)c(a)31
b(natural)g(combination)g(of)f(contracts)f(with)h(tech-)448
1137 y(niques)24 b(fr)n(om)h(fault-tolerant)g(systems.)31
b(Speci\002cally)-10 b(,)25 b(imagine)g(that)g(the)e(composi-)448
1250 y(tion)f(of)g(the)f(system)g(is)h(\003exible.)28
b(While)22 b(it)g(r)o(uns,)g(various)g(components)e(can)j(join)g(or)448
1363 y(leave)k(the)e(system.)37 b(Naturally)-10 b(,)27
b(the)e(system)f(contains)j(essential)e(components)f(for)448
1476 y(which)i(this)g(is)f(not)g(tr)o(ue,)h(but)f(it)h(might)g(be)f(tr)
o(ue)g(for)h(peripheral)f(or)g(for)g(r)n(edundant)448
1589 y(parts.)40 b(Then,)27 b(when)g(one)f(of)h(those)e(r)n(edundant)h
(or)g(peripheral)h(subsystems)d(fails,)448 1702 y(the)18
b(kernel)g(of)h(the)g(system)e(can)j(\224unplug\224)f(the)f(failing)j
(part)d(and)h(inform)h(the)e(r)n(est)g(of)448 1815 y(the)k(components)f
(to)g(work)h(without)f(it.)28 b(Indeed,)20 b(depending)g(on)i(how)g
(the)g(system)448 1928 y(is)h(con\002gur)n(ed,)e(the)h(r)n(emaining)h
(components)e(don't)h(ever)g(need)f(to)h(know)-8 b(.)589
2041 y(Consider)27 b(a)h(system)e(that)i(is)g(playing)f(the)g(games.)43
b(The)27 b(game)g(administrator)448 2154 y(is)f(obviously)g(an)h
(essential)e(component.)37 b(If)26 b(it)g(fails,)i(nothing)d(else)g
(can)i(r)n(eplace)f(it.)448 2267 y(In)h(contrast,)h(if)g(one)f(of)g
(the)g(player)g(fails\227per)n(haps)h(due)e(to)h(a)h(bad)g(connection)f
(or)448 2379 y(per)n(haps)h(due)f(to)h(cheating\227the)f(game)i(system)
d(can)k(obviously)e(do)g(without)f(the)448 2492 y(player)-7
b(.)589 2605 y(The)25 b(internet)f(is)h(another)g(example)g(of)g(a)h
(fault-tolerant)g(system.)34 b(When)25 b(com-)448 2718
y(puters)d(notice)h(that)g(some)f(other)g(computer)g(no)h(longer)f(r)n
(esponds)f(with)j(acknowl-)448 2831 y(edgments,)31 b(they)g(r)n(oute)f
(network)g(traf)n(\002c)i(ar)n(ound)f(the)g(failing)i(computer)-7
b(.)54 b(If)31 b(the)448 2944 y(failing)e(computer)d(is)h(a)h(mail)h
(server)-7 b(,)27 b(they)f(may)h(hold)g(the)f(mail)j(for)e(several)g
(days)448 3057 y(and)c(attempt)e(to)h(r)n(edeliver)h(it)g(on)f(a)h(r)n
(egular)g(basis.)589 3170 y(In)34 b(general,)i(the)d(use)g(of)h
(assertions)e(\(invariants\))k(and)e(contracts)f(has)h(led)g(to)448
3283 y(a)c(number)e(of)h(r)n(ecent)f(attempts)f(to)h(pr)n(oduce)g
(self-healing)h(or)f(self-r)n(epairing)h(sys-)448 3396
y(tems.)44 b(While)28 b(some)f(ideas)h(have)g(alr)n(eady)h(appear)n(ed)
e(in)i(industrial)f(contexts,)f(for)448 3509 y(many)22
b(it)f(is)h(too)e(early)h(to)g(tell)h(whether)d(they)h(will)j(make)e
(it)h(out)e(of)h(the)g(r)n(esear)n(ch)g(lab.)448 3807
y Fh(8)120 b(Bibliography)585 4018 y Fa(\017)46 b Ff(Dijkstra.)28
b(A)22 b(Discipline)i(of)f(Pr)n(ogramming.)28 b(Pr)n(entice)22
b(Hall.)29 b(1974.)585 4206 y Fa(\017)46 b Ff(Findler)-7
b(.)26 b(Behavioral)21 b(Softwar)n(e)f(Contracts.)27
b(Dissertation,)19 b(Rice)h(University)-10 b(,)676 4319
y(2001.)585 4506 y Fa(\017)46 b Ff(Flanagan,)23 b(Leino,)f
(Lillibridge,)h(Nelson,)e(Saxe,)h(and)h(Stata.)28 b(Extended)20
b(static)676 4619 y(checking)i(for)g(Java.)30 b(PLDI)22
b(2002.)585 4807 y Fa(\017)46 b Ff(Meyer)-7 b(.)26 b(Applying)c
(\224Design)g(by)h(Contract\224.)28 b(IEEE)21 b(Computer)-7
b(,)22 b(Oct)h(1992.)p eop end
%%Page: 17 17
TeXDict begin 17 16 bop 448 274 a Fc(8)92 b(BIBLIOGRAPHY)2067
b Ff(17)585 573 y Fa(\017)46 b Ff(Barnett,)16 b(Leino,)h(Schulte.)26
b(The)16 b(Spec#)h(pr)n(ogramming)h(system:)23 b(An)17
b(overview)-8 b(.)676 686 y(CASSIS)21 b(2004.)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
