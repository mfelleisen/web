<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>1.2&nbsp;Design Recipe</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="figure.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">How to Design Programs (Crash Course)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Some_Racket__First_Design.html" class="tocviewselflink" pltdoc="x">Some Racket, First Design</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Some_More_Design__Some_More_Racket.html" class="tocviewlink" pltdoc="x">Some More Design, Some More Racket</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>1&nbsp;</td><td><a href="Some_Racket__First_Design.html" class="tocviewlink" pltdoc="x">Some Racket, First Design</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="Racket_Mechanics.html" class="tocviewlink" pltdoc="x">Racket Mechanics</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Design Recipe</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="Template.html" class="tocviewlink" pltdoc="x">Template</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Racket_Mechanics.html" title="backward to &quot;1.1 Racket Mechanics&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Some_Racket__First_Design.html" title="up to &quot;1 Some Racket, First Design&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Template.html" title="forward to &quot;1.3 Template&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>1.2<tt>&nbsp;</tt><a name="(part._.Design_.Recipe)"></a>Design Recipe</h4><p><div class="SIntrapara">As far as you are concerned, design has two dimensions: process and the
 organization of data definitions. Let&rsquo;s look at the design process
 first. We call the process a <span style="font-style: italic">design recipe</span>, and here are the six
 mandatory steps:
</div><div class="SIntrapara"><ol><li><p>Analyze the problem. The analysis should identify the information
 that you need to represent as data in your chosen language. Since Racket
 is an untyped language, you can use structured English to document this
 decision. The result is called a <span style="font-style: italic">data definition</span>.</p><p>A data definition names and describes a set of elements from the
 ever-expanding universe of data in Racket.</p></li><li><p>The problem analysis should also produce a concise description of
 the program&rsquo;s task. One line of precise English suffices; keep in mind
 that you should describe <span style="font-style: italic">what</span> the function computes not how it
 computes it.</p><p>In addition, formulate a function signature using the data definitions from
 step 1 and the built-in sets of data.</p></li><li><p>A concise purpose statement as in step 2 is too abstract to provide
 much insight into the concrete workings of the function. It is therefore
 important to illustrate the purpose statement with <span style="font-style: italic">examples</span>. To be
 precise, the examples should illustrate what output functions should
 produce for which inputs.</p><p>To this end you need to generate input data. Use the data definition. It
 tells you whether some piece of data belongs to a chosen set, and it also
 tells you how to generate input examples. (If it doesn&rsquo;t, it isn&rsquo;t a data
 definition.) The organization of the data definition implicitly suggests
 which kinds of inputs you should consider.</p><p>Also use the problem statement. It may point out special cases and you need
 to understand what they should do.</p><p>If you cover a good part of the input space, you will get a good
 understanding of the capabilities and limits of the function. When
 anything is ambiguous, ask the "customer" for a specification of the
 problem statement now.</p></li><li><p>You can now turn the data definition for the inputs into a
 <span style="font-style: italic">template</span>, that is an outline of the program. This is not some
 informal pseudo-code essay, but a transformation of all the knowledge in
 the data definition into a code layout.</p><p>Note that all template for functions with the same input signature are
 identical. The construction of the template does not exploit any knowledge
 about the output or the functionality of the program.</p><p>Technically you can create the template right after step 2. Creating
 input examples may help, however.</p></li><li><p>Now it is time to <span style="font-style: italic">code</span>, that is, to define the function.</p><p>The template lays out what data the function consumes. Any information that
it computes must be the result of combining these pieces of data. The
combination can exploit Racket functions, functions you have defined,
functions you intend to define &ndash; create a stub for those &ndash; and nothing
else.</p></li><li><p>Last but not least, you turn the examples into unit tests so that the
 Racket unit testing framework can run the tests and report problems (if
 any).</p><p>Add the import specification <span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">rackunit</span><span class="RktPn">)</span> to the top of the
 file to load the unit testing framework.</p></li></ol></div></p><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">(require rackunit)</span><br /><span class="stt"></span><br /><span class="stt">#| </span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt">&ndash;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">PROBLEM STATEMENT</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Design a function that determines whether a Cartesian point</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is within a rectangle in the Cartesian plain. Assume that</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">the rectangle</span><span class="stt">&rsquo;</span><span class="stt">s sides are parallel to the two axes.  |#</span><br /><span class="stt"></span><br /><span class="stt">;; DATA DEFINITION</span><br /><span class="stt"></span><br /><span class="stt">(struct point (x y) #:transparent)</span><br /><span class="stt">;; A Point is (point Number Number)</span><br /><span class="stt"></span><br /><span class="stt">(struct rectangle (xmin xmax ymin ymax) #:transparent) </span><br /><span class="stt">;; A Rectangle is (rectangle Number Number Number Number)</span><br /><span class="stt">;; Assume: (rectangle xmin xmax ymin ymax) implies</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (&lt; xmin xmax)</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (&lt; ymin ymax)</span><br /><span class="stt"></span><br /><span class="stt">;; is the Cartesian point p within the rectangle r?</span><br /><span class="stt">;; Point Rectangle -&gt; Boolean </span><br /><span class="stt">;; given (point 3 4) and (rectangle 0 10 0 10), the point is in </span><br /><span class="stt">;; given (point -3 4) and (rectangle 0 10 0 10), the point is out </span><br /><span class="stt">(define (in? p r)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(and (&lt;= (rectangle-xmin r) (point-x p) (rectangle-xmax r))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(&lt;= (rectangle-ymin r) (point-y p) (rectangle-ymax r))))</span><br /><span class="stt"></span><br /><span class="stt">(check-equal? (in? (point 3 4) (rectangle 0 10 0 10)) #t)</span><br /><span class="stt">(check-equal? (in? (point -3 4) (rectangle 0 10 0 10)) #f)</span></p></td></tr></table></blockquote><p><span class="Legend"><a name="(counter._(figure._fig~3arectangle))"></a>Figure&nbsp;1: Is the point inside the rectangle?</span></p></blockquote></blockquote><p><div class="SIntrapara"><a href="#(counter._(figure._fig~3arectangle))" pltdoc="x">Figure&nbsp;1</a> displays a sample problem and the complete code
 to solve it. The template for a function that consumes a <span class="RktSym">Point</span>
 and a <span class="RktSym">Rectangle</span> is this:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in?</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-xmin</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-xmax</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-ymin</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-ymax</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The idea is that a function must produce the answer from the data inside
 the given structure instances (or perhaps from the entire structs if there
 is a function that performs the work). So the template lists all these
 pieces of data. When you go from templates to functions then, your
 creative task is to pick functions that combine the available pieces of
 data.</div></p><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">(require rackunit)</span><br /><span class="stt"></span><br /><span class="stt">#| </span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt">&ndash;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">PROBLEM STATEMENT</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Design a function that determines whether a Cartesian point</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is within some given shape. A shape can be either a</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle whose sides are parallel to the two axes or a</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">circle whose extent is determine by a center and a radius.</span><br /><span class="stt"></span><br /><span class="stt">|#</span><br /><span class="stt"></span><br /><span class="stt">;; DATA DEFINITION</span><br /><span class="stt"></span><br /><span class="stt">(struct point (x y) #:transparent)</span><br /><span class="stt">;; A Point is (point Number Number)</span><br /><span class="stt"></span><br /><span class="stt">(struct rectangle (xmin xmax ymin ymax) #:transparent)</span><br /><span class="stt">(struct circle (x y r))</span><br /><span class="stt">;; A Shape is one of:</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (rectangle Number Number Number Number)</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (circle Number Number Number)</span><br /><span class="stt"></span><br /><span class="stt">;; is the Cartesian point p within the shape s?</span><br /><span class="stt">;; Point Shape -&gt; Boolean </span><br /><span class="stt">;; (circle 0 0 5) and (point 3 4) is in</span><br /><span class="stt">;; (circle 0 0 5) and (point 10 10) is out </span><br /><span class="stt">(define (in? p s) </span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(cond</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(rectangle? s) (rectangle-in? p s)]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(circle? s) (circle-in? p s)]))</span><br /><span class="stt"></span><br /><span class="stt">;; Point Rectangle -&gt; Boolean</span><br /><span class="stt">;; is the Cartesian point p within the rectangle r?</span><br /><span class="stt">(define (rectangle-in? p r)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#f)</span><br /><span class="stt"></span><br /><span class="stt">;; Point Circle -&gt; Boolean</span><br /><span class="stt">;; is the Cartesian point p within the circle s?</span><br /><span class="stt">(define (circle-in? p s)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#f)</span><br /><span class="stt"></span><br /><span class="stt">(check-equal? (in? (point 3 4) (circle 0 0 5)) #t)</span></p></td></tr></table></blockquote><p><span class="Legend"><a name="(counter._(figure._fig~3acircle))"></a>Figure&nbsp;2: Is the point inside a circle or rectangle?</span></p></blockquote></blockquote><p><a href="#(counter._(figure._fig~3acircle))" pltdoc="x">Figure&nbsp;2</a> is about a data definition that unions two disjoint
 sets: the set of circle representations and the set of rectangle
 representations. Every language has some way of representing unions; in an
 untyped language such as Racket the programmer uses English to describe
 the union.</p><p><div class="SIntrapara">The template for a union-based data definition demands a case
 distinction. To be precise, it demands a case distinction that has as many
 branches as there are distinct subsets in the unions:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in?</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">rectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-xmin</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-xmax</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-ymin</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle-ymax</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">circle?</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle-x</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle-y</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle-r</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Since both cases deal with structs, both answer portions of the
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> list all possible fields in the two structs.</div></p><p>As <a href="#(counter._(figure._fig~3acircle))" pltdoc="x">figure&nbsp;2</a> shows, however, the definition itself may ignore
 this knowledge about the program. When functions or <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> lines
 get large &ndash; say three to five lines &ndash; it is much better to formulate a
 "wish list" of auxiliary (helper) functions and to hand (some of) the data
 to these helper functions. The figure illustrates how such "wishes" are
 formulated as stubs that give a constant answer and are thus guaranteed to
 fail some of the unit tests.</p><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">(require rackunit)</span><br /><span class="stt"></span><br /><span class="stt">#| </span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt"> &ndash; </span><span class="stt"></span><span class="stt">&ndash;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">PROBLEM STATEMENT</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Design a function that determines whether a Cartesian point</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is within some given shape. A shape can be either a</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">rectangle (whose sides ...); a circle (whose extent ...) or</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">a combination of two shapes.</span><br /><span class="stt">|#</span><br /><span class="stt"></span><br /><span class="stt">;; DATA DEFINITION</span><br /><span class="stt"></span><br /><span class="stt">(struct point (x y) #:transparent)</span><br /><span class="stt">;; A Point is (point Number Number)</span><br /><span class="stt"></span><br /><span class="stt">(struct rectangle (xmin xmax ymin ymax) #:transparent)</span><br /><span class="stt">(struct circle (x y r) #:transparent)</span><br /><span class="stt">(struct union (top bot) #:transparent)</span><br /><span class="stt">;; A Shape is one of:</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (rectangle Number Number Number Number)</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (circle Number Number Number)</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (union Shape Shape)</span><br /><span class="stt"></span><br /><span class="stt">;; Point Shape -&gt; Boolean</span><br /><span class="stt">;; is the Cartesian point p within the shape s? </span><br /><span class="stt">;; examples: </span><br /><span class="stt">;; ... </span><br /><span class="stt">;; (point 9 9) NOT in (union (circle 0 0 5)(rectangle 0 1 0 1))</span><br /><span class="stt">;; (point 8 8)  is in (union (circle 0 0 5) (rectangle 8 9 7 8)) </span><br /><span class="stt">;; (point 3 4) is in (union (circle 0 0 5) (rectangle 8 9 7 8)) </span><br /><span class="stt"></span><br /><span class="stt">;; TEMPLATE</span><br /><span class="stt">(define (in? p s)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(cond</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(rectangle? s)</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... (point-x p) ... (point-y p) ...</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... (rectangle-xmin s) (rectangle-xmax s) ...</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... (rectangle-ymin s) (rectangle-ymax s) ...]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(circle? s)</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... (point-x p) ... (point-y p) ...</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... (circle-x s) (circle-y s) (circle-r s) ...]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(union? s) ... p .. </span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(in? p (union-top s)) </span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(in? p (union-bot s)) ...]))</span></p></td></tr></table></blockquote><p><span class="Legend"><a name="(counter._(figure._fig~3ashape))"></a>Figure&nbsp;3: Is the point inside the shape?</span></p></blockquote></blockquote><p><a href="#(counter._(figure._fig~3ashape))" pltdoc="x">Figure&nbsp;3</a> shows the next logical step: a
 <span style="font-style: italic">self-referential</span> data definition. This kind of definition is
 also called <span style="font-style: italic">inductive</span>. Unlike any definition of plain English
 terms, this kind of definition is circular and yet it makes sense. For a
 self-referential definition to make sense, it is necessary to generate
 examples and to ensure that the examples represent the desired kind of
 information.</p><p><div class="SIntrapara">Here are two straightforward examples of <span class="RktSym">Shape</span>:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The first is generated from the first line in the data definition, and the
 second one is generated from the second line. Now that there are two
 shapes, it becomes possible to use the third clause of the data definition
 to create four more examples of <span class="RktSym">Shape</span>s:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">union</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">union</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">union</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">union</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">These four union shapes just combine the two existing shapes in all
 possible ways. But now there are four more shapes and it becomes possible
 to create even larger <span class="RktSym">union</span> shapes, e.g.,
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">union</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">union</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">It is easy to see that self-referential data definitions allow the
 creation of arbitrarily large pieces of data &ndash; and that is what makes
 programming interesting. <span class="refelem"><span class="refcolumn"><span class="refcontent">All interesting programs that deal
with data unbounded in size rely on the existence of self-referential data
definitions, whether the programmers who created them know and understand
this fact or not. Programmers who do understand this fact are better off
than those who don&rsquo;t.</span></span></span></div></p><p><div class="SIntrapara">The template in the figure reflects one-to-one this data definition:
</div><div class="SIntrapara"><ul><li><p>it consists of three <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> lines, because the data definition
deals with three kinds of sets;</p></li><li><p>each <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> line uses a predicate for the corresponding
structure to distinguish it from other cases;</p></li><li><p>each <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> line contains selectors for the two structs; and</p></li><li><p>the last <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> line contains <span style="font-style: italic">recursive</span> function calls
for exactly those places where the data definition contain anchors for
self-references.</p></li></ul></div><div class="SIntrapara">The last point in <a href="#(counter._(figure._fig~3ashape))" pltdoc="x">figure&nbsp;3</a> is the key innovation over
 <a href="#(counter._(figure._fig~3acircle))" pltdoc="x">figure&nbsp;2</a>. And it makes programming interesting!</div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Racket_Mechanics.html" title="backward to &quot;1.1 Racket Mechanics&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Some_Racket__First_Design.html" title="up to &quot;1 Some Racket, First Design&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Template.html" title="forward to &quot;1.3 Template&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>