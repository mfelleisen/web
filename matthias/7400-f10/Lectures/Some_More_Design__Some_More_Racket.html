<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2&nbsp;Some More Design, Some More Racket</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="figure.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">How to Design Programs (Crash Course)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Some_Racket__First_Design.html" class="tocviewlink" pltdoc="x">Some Racket, First Design</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Some More Design, Some More Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Design_with_Accumulators.html" class="tocviewlink" pltdoc="x">Design with Accumulators</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Some More Design, Some More Racket</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#(part._.Definition)" class="tocviewlink" pltdoc="x">Definition</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#(part._.Lists_are_special_structures)" class="tocviewlink" pltdoc="x">Lists are special structures</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#(part._.S-expressions_and_.Other_.Nestings)" class="tocviewlink" pltdoc="x">S-<wbr></wbr>expressions and Other Nestings</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#(part._.Quote_and_.Quine)" class="tocviewlink" pltdoc="x">Quote and Quine</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#(part._.Definition)" class="tocsubseclink" pltdoc="x">Definition</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#(part._.Lists_are_special_structures)" class="tocsubseclink" pltdoc="x">Lists are special structures</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#(part._.S-expressions_and_.Other_.Nestings)" class="tocsubseclink" pltdoc="x">S-<wbr></wbr>expressions and Other Nestings</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#(part._.Quote_and_.Quine)" class="tocsubseclink" pltdoc="x">Quote and Quine</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Some_Racket__First_Design.html" title="backward to &quot;1 Some Racket, First Design&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;How to Design Programs (Crash Course)&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Design_with_Accumulators.html" title="forward to &quot;3 Design with Accumulators&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._.Some_.More_.Design__.Some_.More_.Racket)"></a>Some More Design, Some More Racket</h3><p>Let us work through one more exercises to see how the design recipe
works.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">(require rackunit)</span><br /><span class="stt"></span><br /><span class="stt">#| </span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&ndash;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">PROBLEM STATEMENT</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">A Russian doll is either a solid wooden figure or a</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Russian doll encased in a hollow wooden dress. Each</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">dress has a distinct color.</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Design a program that consumes the representation of a</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Russian doll and counts how many layer wrap the </span><span class="stt">&rsquo;</span><span class="stt">core</span><span class="stt">&rsquo;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">figure.</span><br /><span class="stt"></span><br /><span class="stt">|# </span><br /><span class="stt"></span><br /><span class="stt">;; DATA DEFINITION</span><br /><span class="stt"></span><br /><span class="stt">(struct dress (content) #:transparent)</span><br /><span class="stt">;; A Russian-doll (RD) is one of:</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> "wooden figure"</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (dress Russian-doll)</span><br /><span class="stt"></span><br /><span class="stt"></span><br /><span class="stt">;; RD -&gt; Number </span><br /><span class="stt">;; how many dresses are around the "wooden figure" in rd</span><br /><span class="stt">;; given (dress (dress (dress (dress "wooden figure"))))</span><br /><span class="stt">;; expect 4</span><br /><span class="stt">(define (count-dresses rd)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(cond</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(string? rd) 0]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[else ; (dress? rd)</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(count-dresses (dress-content rd))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1)]))</span><br /><span class="stt"></span><br /><span class="stt">(check-equal? (count-dresses (dress (dress (dress (dress "wooden figure"))))) 4)</span><br /><span class="stt">(check-equal? (count-dresses "woodern figure") 0)</span></p></td></tr></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><a name="(counter._(figure._fig~3arussian))"></a>Figure&nbsp;5: The dresses of a Russian doll</span></p></blockquote><p><a href="#(counter._(figure._fig~3arussian))" pltdoc="x">Figure&nbsp;5</a> isn&rsquo;t about anything realistic. It is a finger
exercise in a minimalistic representation of a naturally occurring nested
piece of "information." The key is, however, that by carefully following
the design recipe, the definition of the function itself is a matter of a
few keystrokes. The question is whether/how to come up with these
keystrokes.</p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Definition)"></a>Definition</h4><p>The step from the template to the full definition is all about combing the
values that the template expressions compute. Here are some basic ideas on
how to go about that.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SubFlow"><table cellspacing="0" class="boxed" cellpadding="3"><tr><td width="500"><p>What are the answers for the non-recursive <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> clauses?</p></td><td width="500"><p>The examples should tell you which values you need here. If not,
formulate appropriate examples and tests.</p></td></tr><tr><td width="500"><p>What do the selector expressions in the recursive clauses compute?</p></td><td width="500"><p>The data definitions tell you what kind of data these expressions
extract and the interpretations of the data definitions tell you what
this data represents.</p></td></tr><tr><td width="500"><p>What do the natural recursions compute?</p></td><td width="500"><p>Use the purpose statement of the function to determine what the
value of the recursion means <span style="font-weight: bold">not how it computes this answer</span>. If
the purpose statement doesn't tell you the answer, improve the purpose
statement.</p></td></tr><tr><td width="500"><p>How can you combine these values into the desired answer?</p></td><td width="500"><p>If you are stuck here, arrange the examples from the third step in
a table. Place the given input in the first column and the desired output
in the last column. In the intermediate columns enter the values of the
selector expressions and the natural recursion(s). Add examples until you
see a pattern emerge that suggests a ``combinator'' function.</p></td></tr></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><a name="(counter._(figure._definition-q))"></a>Figure&nbsp;6: How to turn the template into a function definition</span></p></blockquote><p>In addition, keep in mind that you should design auxiliary functions when a
function gets large. Conversely, keep functions small and the "combination"
functions are natural candidates for separate helper functions. HtDP/2e has
some additional guidelines on this topic.</p><p>Finally, on some occasions the &ldquo;combinator&rdquo; cannot be just a function.
Because the arguments to functions are evaluated first &ndash; Racket is a
call-by-value language &ndash; you may have to create nested conditional
expressions on occasion.</p><p>Work through the example in <a href="#(counter._(figure._fig~3aarith))" pltdoc="x">figure&nbsp;7</a> using the
question-answer games for creating templates and function definitions.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">(require rackunit)</span><br /><span class="stt"></span><br /><span class="stt">#| </span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&#8212;<wbr></wbr></span><span class="stt"></span><span class="stt">&ndash;</span><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">PROBLEM STATEMENT</span><br /><span class="stt"></span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">An arithmetic expression is either a number, a string</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(representing a variable), an addition of two</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">arithmetic expressions, or a subtraction of two</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">arithmetic expressions.  Design a function that</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">replaces some given string with the number 5 in an</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">arithmetic expression.</span><br /><span class="stt"></span><br /><span class="stt">|#</span><br /><span class="stt"></span><br /><span class="stt">;; DATA DEFINITION</span><br /><span class="stt"></span><br /><span class="stt">(struct plus (left right) #:transparent)</span><br /><span class="stt">(struct subt (left right) #:transparent)</span><br /><span class="stt">;; An AE is one of:</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> number</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> string</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (plus AE AE)</span><br /><span class="stt">;; </span><span class="stt">&ndash;</span><span class="stt"> (subt AE AE)</span><br /><span class="stt"></span><br /><span class="stt"></span><br /><span class="stt">;; String AE -&gt; AE </span><br /><span class="stt">;; eeplace all occurrences of string s with 5 in ae </span><br /><span class="stt">(define (replace s ae)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(cond</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(number? ae) ae]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(string? ae) (if (string=? s ae) 5 ae)]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[(plus? ae)</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(plus (replace s (plus-left ae))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(replace s (plus-right ae)))]</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[else</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(subt (replace s (subt-left ae))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(replace s (subt-right ae)))]))</span><br /><span class="stt"></span><br /><span class="stt"></span><br /><span class="stt">(check-equal? (replace "hari" 0) 0)</span><br /><span class="stt">(check-equal? (replace "hari" "hari") 5)</span><br /><span class="stt">(check-equal? (replace "hari" (plus 42 "hari")) (plus 42 5))</span><br /><span class="stt">(check-equal? (replace "hari" (subt 42 "hari")) (subt 42 5))</span><br /><span class="stt"></span><br /><span class="stt">;; the second cond line needs another test case: </span><br /><span class="stt">(check-equal? (replace "matthias" (plus 42 "hari")) (plus 42 "hari"))</span><br /><span class="stt"></span></p></td></tr></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><a name="(counter._(figure._fig~3aarith))"></a>Figure&nbsp;7: Arithmetic expressions and their value</span></p></blockquote><p>The example illustrates a first important point about programming
languages, too. Instead of working through syntax-as-strings, a programming
language researcher thinks of the syntax of a language as trees and of
functions/programs that process a program as tree-walking functions. This
form of syntax is called <span style="font-style: italic">abstract syntax tree (AST)</span>.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._.Lists_are_special_structures)"></a>Lists are special structures</h4><p><div class="SIntrapara">Racket provides one prominent form of data, lists. Lists aren&rsquo;t really
 special, however. And it isn&rsquo;t lists per se that Racket provides but
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> structures, which combine two arbitrary values. Thus
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">23</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">creates an instance of <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> as does
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="hspace">&nbsp;</span><span class="RktVal">"world"</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">The key to lists is the nesting of <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> instances inside of each
 other. In particular, lists nest <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> structures in the right
 field and the chain of right fields is the spine of the list.</div></p><p>The end of the list is a special token: <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span> also written as
 <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>.</p><p>Naturally, <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> structures come with a predicate, <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._cons~3f))" class="RktValLink" pltdoc="x">cons?</a></span>,
 as does the special token <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span>, namely <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span>. The only
 unusual aspect of lists is that the <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> selector names don&rsquo;t
 start with <span class="RktSym">cons-</span>. Instead they are called <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span> and
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span>&#8212;<wbr></wbr>as long as they are dealing with "real" lists.</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">Traditionally the selectors for <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> structures are
known as <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span> and <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cdr))" class="RktValLink" pltdoc="x">cdr</a></span>, and yes, these selectors are
available in Racket. We will deal with proper lists whenever possible and
ignore these two selectors therefore.</span></span></span></p><p><div class="SIntrapara">Here is the data definition for "real" lists:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._list)"></a><span style="font-style: italic">List</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">AnyValue</span><span class="stt"> </span><span class="RktSym">List</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This definition immediately rules out the values above: yes they are
 instances of <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span>, but no they are not elements of
 <a href="#(tech._list)" class="techoutside" pltdoc="x"><span class="techinside">List</span></a>.</div></p><p><div class="SIntrapara">The definition also shows how to create special subsets, say lists of
 strings:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._lo)"></a><span style="font-style: italic">LOS</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">(list of strings) is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">String</span><span class="stt"> </span><span class="RktSym">LOS</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Another example is a list of list of numbers:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._lon)"></a><span style="font-style: italic">LON</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">(list of numbers) is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">Number</span><span class="stt"> </span><span class="RktSym">LON</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._lolon)"></a><span style="font-style: italic">LOLON</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">(list of list of numbers) is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">LON</span><span class="stt"> </span><span class="RktSym">LOLON</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">If you are wondering why the collection of lists contains the empty list,
 it doesn&rsquo;t have to. Here is a definition that introduces a set of
 non-empty lists of strings:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._nelo)"></a><span style="font-style: italic">NELOS</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">String</span><span class="stt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">String</span><span class="stt"> </span><span class="RktSym">NELOS</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Using non-empty lists may strike you as pragmatic. A function that counts
 the number of strings on a list of strings is a good example:
</div><div class="SIntrapara"><table cellspacing="0" align="center"><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._count))" class="RktValLink" pltdoc="x">count</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._count))" class="RktValLink" pltdoc="x">count</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></td><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._count))" class="RktValLink" pltdoc="x">count</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._count))" class="RktValLink" pltdoc="x">count</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">The difference is really only visible in the first condition. The version
 for general lists&#8212;<wbr></wbr>on the left-hand side&#8212;<wbr></wbr>uses <span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="stt"> </span><span class="RktSym">los</span><span class="RktPn">)</span> to
 check whether the list is empty. In contrast, the version for non-empty
 lists&#8212;<wbr></wbr>on the right-hand side&#8212;<wbr></wbr>needs to extract the <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span> and
 then check whether it is empty.  Generally, however, it is much easier to
 deal with the general set of lists because it greatly simplifies the
 design of functions.</div></p><p><div class="SIntrapara">Consider a function that looks for the presence of <span class="RktVal">"xxx"</span> in a list
 of strings:
</div><div class="SIntrapara"><table cellspacing="0" align="center"><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xxx?</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/booleans.html#(def._((lib._racket%2Fbool..rkt)._false))" class="RktValLink" pltdoc="x">false</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3d~3f))" class="RktValLink" pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"xxx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xxx?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></td><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xxx?</span><span class="hspace">&nbsp;</span><span class="RktSym">nl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nl</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3d~3f))" class="RktValLink" pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"xxx"</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3d~3f))" class="RktValLink" pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"xxx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xxx?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">This comparison demonstrates how a function must check even the last item
 on a list, because it could just be the one that is the key to the
 computation.</div></p><p>You will find that this kind of code repetition between the two
<span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> clauses is common, and the version for plain lists almost
always looks simpler than the one for non-empty lists.</p><p><span style="font-weight: bold">Exercise</span>: Racket is untyped so <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> doesn&rsquo;t have to be used
with the linear list format, and Racketeers use <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> in all kinds
of ways, because it is convenient. See below.</p><p><div class="SIntrapara">Here is an example. Represent Russian dolls with a nested <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span>
representation like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> A </span><a name="(tech._s._russian._doll)"></a><span style="font-style: italic">S-Russian-doll</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> </span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktVal">"wooden"</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> </span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">Russian-doll</span><span class="stt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Now design a function that counts the number of layers around the wooden
 figure.</div></p><h4>2.3<tt>&nbsp;</tt><a name="(part._.S-expressions_and_.Other_.Nestings)"></a>S-expressions and Other Nestings</h4><p><div class="SIntrapara">Lisp introduced S-expressions as Lisp&rsquo;s syntax and as its major datatype.
 In Racket the collection of S-expressions is just a subset of the universe
 of data:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._s._expression)"></a><span style="font-style: italic">S-expression</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><a href="#(tech._atom)" class="techoutside" pltdoc="x"><span class="techinside">Atom</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><a href="#(tech._ls._expression)" class="techoutside" pltdoc="x"><span class="techinside">LS-expression</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._ls._expression)"></a><span style="font-style: italic">LS-expression</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktSym">S-expression</span><span class="stt"> </span><span class="RktSym">LS-expression</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._atom)"></a><span style="font-style: italic">Atom</span><span class="RktCmt"> is ...</span></td></tr></table></blockquote></div><div class="SIntrapara">This data definition refers to <a href="#(tech._atom)" class="techoutside" pltdoc="x"><span class="techinside">Atom</span></a>, however, which is an
unspecified set. There are two ways to deal with this problem:
</div><div class="SIntrapara"><ol><li><p>consider <a href="#(tech._atom)" class="techoutside" pltdoc="x"><span class="techinside">Atom</span></a> a parameter of the definition and specify it
differently at different times; or</p></li><li><p>define <a href="#(tech._atom)" class="techoutside" pltdoc="x"><span class="techinside">Atom</span></a> once and for all as some set of atomic data.</p></li></ol></div><div class="SIntrapara">The literature knows both approaches and both are used in Racket
 programming.</div></p><p>The definition also uses two interrelated data definitions, but still
 programming with S-expressions isn&rsquo;t any different from programming with
 arithmetic expressions or Russian dolls. The key is to create two
 interrelated templates that refer to each other where the data definitions
 refer to each other.</p><p><div class="SIntrapara">To create each template, answer the questions from
 <a href="Some_Racket__First_Design.html#(counter._(figure._template-q))" pltdoc="x">figure&nbsp;4</a>. Doing so says that the template needs a
 three-pronged <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span>; that <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span> and <span class="RktSym">atom?</span> of
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span> distinguish the first two cases (which is enough); that the
 second and third clause involve structs but the first one is about atomic
 data; and that the three self-references of the data definition imply
 three recursions in the template:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-template</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">atom?</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ls-template</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ls-template</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty~3f))" class="RktValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/if.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-template</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ls-template</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/stx-patterns.html#(form._((lib._racket%2Fprivate%2Fstxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Other than that, there is little special about S-expressions.</div></p><h4>2.4<tt>&nbsp;</tt><a name="(part._.Quote_and_.Quine)"></a>Quote and Quine</h4><p>Well, S-expressions are an extremely convenient representation for
 (extensible) languages. It is noteworthy here to say that the XML
 community discovered this fact some 50 years after the
 Lispers. <span class="refelem"><span class="refcolumn"><span class="refcontent">What would the world know if they listened to
Lispers instead of complaining about the parentheses?</span></span></span></p><p>The key to S-expressions are three special notations for lists:
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">quote</a></span> (&rsquo;), <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._quasiquote))" class="RktStxLink" pltdoc="x">quasiquote</a></span> (`), and <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((quote._~23~25kernel)._unquote))" class="RktStxLink" pltdoc="x">unquote</a></span>
 (,). There is more but these three ideas are a good start.</p><p>In addition, you need to know about one more atomic datatype: symbols. A
 symbol is a quote (&rsquo;) form followed by keys other than these: ( ) , ` &rsquo;
 and a few more.</p><p><div class="SIntrapara">So <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktVal">)</span> is short for <span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>; see
 lists-as-sequences-of-cons are easy to create with a single stroke. In
 reality quote is distributed over the pieces of a parenthesized form, so
 <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">"hello"</span><span class="RktVal">)</span> is short for <span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">a</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">"hello"</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>.
 In other words, the letter a turned into a symbol, while quote numbers and
 string remain what they are. To show how powerful it all is, look at this
 S-expression:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"a first web page"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">bgcolor</span><span class="hspace">&nbsp;</span><span class="RktVal">"white"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"My</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">first web page. Please admire it."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The quote just creates all the necessary <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span>es and symbols and
 otherwise leaves things alone. The result is a concise representation of
 the HTML for a simple web page.</div></p><p><div class="SIntrapara">When the quote is distributed over a parenthesized expression, it makes no
exception. Thus
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara">turns into
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktVal">'</span></span><span class="highlighted"><span class="RktVal">(</span></span><span class="highlighted"><span class="RktVal">+</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">2</span></span><span class="highlighted"><span class="RktVal">)</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">and then the inner quoted expression is dealt with in the same manner:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">'</span></span><span class="highlighted"><span class="RktVal">+</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">2</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">'</span></span><span class="highlighted"><span class="RktVal">(</span></span><span class="highlighted"><span class="RktVal">)</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">In some cases, however, the program needs the value of this inner
 expression not its symbolic representation. This is what
 <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._quasiquote))" class="RktStxLink" pltdoc="x">quasiquote</a></span> and <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((quote._~23~25kernel)._unquote))" class="RktStxLink" pltdoc="x">unquote</a></span> accomplish:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara">When this shorthand is expanded, the comma exempts the nested quotation
 and the expansion is this expression:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">2</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">Note how the inner addition expression isn&rsquo;t quoted, and hence is
 evaluated once the program runs. The result is this piece of data:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div></p><p>For an example of how <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((lib._racket%2Fprivate%2Fletstx-scheme..rkt)._quasiquote))" class="RktStxLink" pltdoc="x">quasiquote</a></span> and <span class="RktSym"><a href="http://pre.racket-lang.org/docs/html/reference/quasiquote.html#(form._((quote._~23~25kernel)._unquote))" class="RktStxLink" pltdoc="x">unquote</a></span> work in
functions, take a look at <a href="#(counter._(figure._fig~3aquote))" pltdoc="x">figure&nbsp;8</a>.</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered"><table cellspacing="0"><tr><td><p><span class="stt">#lang racket</span><br /><span class="stt"></span><br /><span class="stt">;; String String -&gt; S-expression </span><br /><span class="stt">(define (a-web-page t stuff)</span><br /><span class="hspace">&nbsp;&nbsp;</span><span class="stt">`(html ()</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(head ()</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(title () "A " ,t " web page"))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(body ((bgcolor "white"))</span><br /><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"My " ,stuff " web page. Please admire it.")))</span><br /><span class="stt"></span><br /><span class="stt">(a-web-page "first" "first")</span><br /><span class="stt">(a-web-page "second" "beautiful")</span><br /><span class="stt">(a-web-page "last" "final")</span><br /><span class="stt"></span><br /><span class="stt"></span></p></td></tr></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><a name="(counter._(figure._fig~3aquote))"></a>Figure&nbsp;8: Quasiquote and unquote at work</span></p></blockquote><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Some_Racket__First_Design.html" title="backward to &quot;1 Some Racket, First Design&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;How to Design Programs (Crash Course)&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Design_with_Accumulators.html" title="forward to &quot;3 Design with Accumulators&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>